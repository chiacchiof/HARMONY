/*! For license information please see main.b67cc921.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var o=n(43),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,r={},c=null,u=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,o)&&!s.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:a,type:e,key:c,ref:u,props:r,_owner:l.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,h(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,o){var a,r={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)S.call(t,a)&&!C.hasOwnProperty(a)&&(r[a]=t[a]);var s=arguments.length-2;if(1===s)r.children=o;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===r[a]&&(r[a]=s[a]);return{$$typeof:n,type:e,key:i,ref:l,props:r,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,a,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case o:s=!0}}if(s)return i=i(s=e),e=""===r?"."+P(s,0):r,w(i)?(a="",null!=e&&(a=e.replace(j,"$&/")+"/"),M(i,t,a,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(j,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=""===r?".":r+":",w(e))for(var c=0;c<e.length;c++){var u=r+P(l=e[c],c);s+=M(l,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(l=e.next()).done;)s+=M(l=l.value,t,a,u=r+P(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function T(e,t,n){if(null==e)return e;var o=[],a=0;return M(e,o,"","",function(e){return t.call(n,e,a++)}),o}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},A={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=r,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=O,t.cloneElement=function(e,t,o){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),r=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=k.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=o;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];a.children=s}return{$$typeof:n,type:e.type,key:r,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,a=e[o];if(!(0<r(a,t)))break e;e[o]=t,e[n]=a,n=o}}function o(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,a=e.length,i=a>>>1;o<i;){var l=2*(o+1)-1,s=e[l],c=l+1,u=e[c];if(0>r(s,n))c<a&&0>r(u,s)?(e[o]=u,e[c]=n,o=c):(e[o]=s,e[l]=n,o=l);else{if(!(c<a&&0>r(u,n)))break e;e[o]=u,e[c]=n,o=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var c=[],u=[],d=1,p=null,f=3,m=!1,h=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=o(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=o(u)}}function w(e){if(g=!1,x(e),!h)if(null!==o(c))h=!0,R(S);else{var t=o(u);null!==t&&A(w,t.startTime-e)}}function S(e,n){h=!1,g&&(g=!1,y(N),N=-1),m=!0;var r=f;try{for(x(n),p=o(c);null!==p&&(!(p.expirationTime>n)||e&&!M());){var i=p.callback;if("function"===typeof i){p.callback=null,f=p.priorityLevel;var l=i(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?p.callback=l:p===o(c)&&a(c),x(n)}else a(c);p=o(c)}if(null!==p)var s=!0;else{var d=o(u);null!==d&&A(w,d.startTime-n),s=!1}return s}finally{p=null,f=r,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,N=-1,j=5,P=-1;function M(){return!(t.unstable_now()-P<j)}function T(){if(null!==E){var e=t.unstable_now();P=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof b)k=function(){b(T)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,D=_.port2;_.port1.onmessage=T,k=function(){D.postMessage(null)}}else k=function(){v(T,0)};function R(e){E=e,C||(C=!0,k())}function A(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return o(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,n(u,e),null===o(c)&&e===o(u)&&(g?(y(N),N=-1):g=!0,A(w,r-i))):(e.sortIndex=l,n(c,e),h||m||(h=!0,R(S))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},330:(e,t,n)=>{var o=n(43);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=o.useState,i=o.useEffect,l=o.useLayoutEffect,s=o.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(o){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=r({inst:{value:n,getSnapshot:t}}),a=o[0].inst,u=o[1];return l(function(){a.value=n,a.getSnapshot=t,c(a)&&u({inst:a})},[e,n,t]),i(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),s(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},391:(e,t,n)=>{var o=n(950);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot},443:(e,t,n)=>{e.exports=n(717)},461:(e,t,n)=>{e.exports=n(330)},579:(e,t,n)=>{e.exports=n(153)},717:(e,t,n)=>{var o=n(43),a=n(461);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=a.useSyncExternalStore,l=o.useRef,s=o.useEffect,c=o.useMemo,u=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,o,a){var d=l(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=c(function(){function e(e){if(!s){if(s=!0,i=e,e=o(e),void 0!==a&&p.hasValue){var t=p.value;if(a(t,e))return l=t}return l=e}if(t=l,r(i,e))return t;var n=o(e);return void 0!==a&&a(t,n)?(i=e,t):(i=e,l=n)}var i,l,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,o,a]);var f=i(e,d[0],d[1]);return s(function(){p.hasValue=!0,p.value=f},[f]),u(f),f}},730:(e,t,n)=>{var o=n(43),a=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function h(e,t,n,o,a,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,o){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:o||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,o){if(null===t||"undefined"===typeof t||function(e,t,n,o){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,o))return!0;if(o)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,o)&&(n=null),o||null===a?function(e){return!!d.call(m,e)||!d.call(f,e)&&(p.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,o=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),j=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var z,F=Object.assign;function L(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var I=!1;function B(e,t){if(!e||I)return"";I=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),r=o.stack.split("\n"),i=a.length-1,l=r.length-1;1<=i&&0<=l&&a[i]!==r[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==r[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==r[l]){var s="\n"+a[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{I=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function U(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case E:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){o=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=X(e)?e.checked?"true":"false":e.value),(e=o)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function q(e,t){var n=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=W(t.value),o=t.type;if(null!=n)"number"===o?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,o){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&o&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(o&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function re(e,t){var n=W(t.value),o=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=o&&(e.defaultValue=""+o)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,o){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var o=0===n.indexOf("--"),a=he(n,t[n],o);"float"===n&&(n="cssFloat"),o?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ce=null;function Ee(e){if(e=xa(e)){if("function"!==typeof Se)throw Error(r(280));var t=e.stateNode;t&&(t=Sa(t),Se(e.stateNode,e.type,t))}}function Ne(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function je(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Pe(e,t){return e(t)}function Me(){}var Te=!1;function _e(e,t,n){if(Te)return e(t,n);Te=!0;try{return Pe(e,t,n)}finally{Te=!1,(null!==ke||null!==Ce)&&(Me(),je())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var o=Sa(n);if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Re=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Re=!1}function Oe(e,t,n,o,a,r,i,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var ze=!1,Fe=null,Le=!1,Ie=null,Be={onError:function(e){ze=!0,Fe=e}};function Ue(e,t,n,o,a,r,i,l,s){ze=!1,Fe=null,Oe.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(r(188))}function Xe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,o=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(o=a.return)){n=o;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return We(a),e;if(i===o)return We(a),t;i=i.sibling}throw Error(r(188))}if(n.return!==o.return)n=a,o=i;else{for(var l=!1,s=a.child;s;){if(s===n){l=!0,n=a,o=i;break}if(s===o){l=!0,o=a,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,o=a;break}if(s===o){l=!0,o=i,n=a;break}s=s.sibling}if(!l)throw Error(r(189))}}if(n.alternate!==o)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,$e=a.unstable_shouldYield,qe=a.unstable_requestPaint,Ze=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,ot=a.unstable_IdlePriority,at=null,rt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/st|0)|0},lt=Math.log,st=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var o=0,a=e.suspendedLanes,r=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~a;0!==l?o=dt(l):0!==(r&=i)&&(o=dt(r))}else 0!==(i=n&~a)?o=dt(i):0!==r&&(o=dt(r));if(0===o)return 0;if(0!==t&&t!==o&&0===(t&a)&&((a=o&-o)>=(r=t&-t)||16===a&&0!==(4194240&r)))return t;if(0!==(4&o)&&(o|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)a=1<<(n=31-it(t)),o|=e[n],t&=~a;return o}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-it(n),a=1<<o;a&t|e[o]&t&&(e[o]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Ct,Et,Nt=!1,jt=[],Pt=null,Mt=null,Tt=null,_t=new Map,Dt=new Map,Rt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function zt(e,t,n,o,a,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&St(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ba(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xa(n))&&St(t),e.blockedOn=n,!1;var o=new(n=e.nativeEvent).constructor(n.type,n);xe=o,n.target.dispatchEvent(o),xe=null,t.shift()}return!0}function It(e,t,n){Lt(e)&&n.delete(t)}function Bt(){Nt=!1,null!==Pt&&Lt(Pt)&&(Pt=null),null!==Mt&&Lt(Mt)&&(Mt=null),null!==Tt&&Lt(Tt)&&(Tt=null),_t.forEach(It),Dt.forEach(It)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<jt.length){Ut(jt[0],e);for(var n=1;n<jt.length;n++){var o=jt[n];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==Pt&&Ut(Pt,e),null!==Mt&&Ut(Mt,e),null!==Tt&&Ut(Tt,e),_t.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(o=Rt[n]).blockedOn===e&&(o.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Vt=x.ReactCurrentBatchConfig,Wt=!0;function Xt(e,t,n,o){var a=bt,r=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,o)}finally{bt=a,Vt.transition=r}}function Yt(e,t,n,o){var a=bt,r=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,o)}finally{bt=a,Vt.transition=r}}function Kt(e,t,n,o){if(Wt){var a=$t(e,t,n,o);if(null===a)Xo(e,t,o,Gt,n),Ot(e,o);else if(function(e,t,n,o,a){switch(t){case"focusin":return Pt=zt(Pt,e,t,n,o,a),!0;case"dragenter":return Mt=zt(Mt,e,t,n,o,a),!0;case"mouseover":return Tt=zt(Tt,e,t,n,o,a),!0;case"pointerover":var r=a.pointerId;return _t.set(r,zt(_t.get(r)||null,e,t,n,o,a)),!0;case"gotpointercapture":return r=a.pointerId,Dt.set(r,zt(Dt.get(r)||null,e,t,n,o,a)),!0}return!1}(a,e,t,n,o))o.stopPropagation();else if(Ot(e,o),4&t&&-1<At.indexOf(e)){for(;null!==a;){var r=xa(a);if(null!==r&&wt(r),null===(r=$t(e,t,n,o))&&Xo(e,t,o,Gt,n),r===a)break;a=r}null!==a&&o.stopPropagation()}else Xo(e,t,o,null,n)}}var Gt=null;function $t(e,t,n,o){if(Gt=null,null!==(e=ba(e=we(o))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,o=n.length,a="value"in Zt?Zt.value:Zt.textContent,r=a.length;for(e=0;e<o&&n[e]===a[e];e++);var i=o-e;for(t=1;t<=i&&n[o-t]===a[r-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function on(){return!1}function an(e){function t(t,n,o,a,r){for(var i in this._reactName=t,this._targetInst=o,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:on,this.isPropagationStopped=on,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,ln,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=F({},cn,{view:0,detail:0}),pn=an(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(rn=e.screenX-sn.screenX,ln=e.screenY-sn.screenY):ln=rn=0,sn=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(fn),hn=an(F({},fn,{dataTransfer:0})),gn=an(F({},dn,{relatedTarget:0})),vn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var Nn=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=an(Nn),Pn=an(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Tn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(_n),Rn=[9,13,27,32],An=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var zn=u&&"TextEvent"in window&&!On,Fn=u&&(!An||On&&8<On&&11>=On),Ln=String.fromCharCode(32),In=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Xn(e,t,n,o){Ne(o),0<(t=Ko(t,"onChange")).length&&(n=new un("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Yn=null,Kn=null;function Gn(e){Io(e,0)}function $n(e){if(K(wa(e)))return e}function qn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var eo=document.createElement("div");eo.setAttribute("oninput","return;"),Jn="function"===typeof eo.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function to(){Yn&&(Yn.detachEvent("onpropertychange",no),Kn=Yn=null)}function no(e){if("value"===e.propertyName&&$n(Kn)){var t=[];Xn(t,Kn,e,we(e)),_e(Gn,t)}}function oo(e,t,n){"focusin"===e?(to(),Kn=n,(Yn=t).attachEvent("onpropertychange",no)):"focusout"===e&&to()}function ao(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function ro(e,t){if("click"===e)return $n(t)}function io(e,t){if("input"===e||"change"===e)return $n(t)}var lo="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function so(e,t){if(lo(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var a=n[o];if(!d.call(t,a)||!lo(e[a],t[a]))return!1}return!0}function co(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uo(e,t){var n,o=co(e);for(e=0;o;){if(3===o.nodeType){if(n=e+o.textContent.length,e<=t&&n>=t)return{node:o,offset:t-e};e=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=co(o)}}function po(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?po(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fo(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(o){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function mo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ho(e){var t=fo(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&po(n.ownerDocument.documentElement,n)){if(null!==o&&mo(n))if(t=o.start,void 0===(e=o.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,r=Math.min(o.start,a);o=void 0===o.end?r:Math.min(o.end,a),!e.extend&&r>o&&(a=o,o=r,r=a),a=uo(n,r);var i=uo(n,o);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),r>o?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var go=u&&"documentMode"in document&&11>=document.documentMode,vo=null,yo=null,bo=null,xo=!1;function wo(e,t,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xo||null==vo||vo!==G(o)||("selectionStart"in(o=vo)&&mo(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},bo&&so(bo,o)||(bo=o,0<(o=Ko(yo,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=vo)))}function So(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ko={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionend:So("Transition","TransitionEnd")},Co={},Eo={};function No(e){if(Co[e])return Co[e];if(!ko[e])return e;var t,n=ko[e];for(t in n)if(n.hasOwnProperty(t)&&t in Eo)return Co[e]=n[t];return e}u&&(Eo=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);var jo=No("animationend"),Po=No("animationiteration"),Mo=No("animationstart"),To=No("transitionend"),_o=new Map,Do="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ro(e,t){_o.set(e,t),s(t,[e])}for(var Ao=0;Ao<Do.length;Ao++){var Oo=Do[Ao];Ro(Oo.toLowerCase(),"on"+(Oo[0].toUpperCase()+Oo.slice(1)))}Ro(jo,"onAnimationEnd"),Ro(Po,"onAnimationIteration"),Ro(Mo,"onAnimationStart"),Ro("dblclick","onDoubleClick"),Ro("focusin","onFocus"),Ro("focusout","onBlur"),Ro(To,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fo=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function Lo(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,o,a,i,l,s,c){if(Ue.apply(this,arguments),ze){if(!ze)throw Error(r(198));var u=Fe;ze=!1,Fe=null,Le||(Le=!0,Ie=u)}}(o,t,void 0,e),e.currentTarget=null}function Io(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var o=e[n],a=o.event;o=o.listeners;e:{var r=void 0;if(t)for(var i=o.length-1;0<=i;i--){var l=o[i],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==r&&a.isPropagationStopped())break e;Lo(a,l,c),r=s}else for(i=0;i<o.length;i++){if(s=(l=o[i]).instance,c=l.currentTarget,l=l.listener,s!==r&&a.isPropagationStopped())break e;Lo(a,l,c),r=s}}}if(Le)throw e=Ie,Le=!1,Ie=null,e}function Bo(e,t){var n=t[ga];void 0===n&&(n=t[ga]=new Set);var o=e+"__bubble";n.has(o)||(Wo(t,e,2,!1),n.add(o))}function Uo(e,t,n){var o=0;t&&(o|=4),Wo(n,e,o,t)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[Ho]){e[Ho]=!0,i.forEach(function(t){"selectionchange"!==t&&(Fo.has(t)||Uo(t,!1,e),Uo(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ho]||(t[Ho]=!0,Uo("selectionchange",!1,t))}}function Wo(e,t,n,o){switch(qt(t)){case 1:var a=Xt;break;case 4:a=Yt;break;default:a=Kt}n=a.bind(null,t,n,e),a=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),o?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Xo(e,t,n,o,a){var r=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var i=o.tag;if(3===i||4===i){var l=o.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=o.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=ba(l)))return;if(5===(s=i.tag)||6===s){o=r=i;continue e}l=l.parentNode}}o=o.return}_e(function(){var o=r,a=we(n),i=[];e:{var l=_o.get(e);if(void 0!==l){var s=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=jn;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Mn;break;case jo:case Po:case Mo:s=vn;break;case To:s=Tn;break;case"scroll":s=pn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Pn}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==l?l+"Capture":null:l;u=[];for(var f,m=o;null!==m;){var h=(f=m).stateNode;if(5===f.tag&&null!==h&&(f=h,null!==p&&(null!=(h=De(m,p))&&u.push(Yo(m,h,f)))),d)break;m=m.return}0<u.length&&(l=new s(l,c,null,n,a),i.push({event:l,listeners:u}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[ha])&&(s||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=o,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=o),s!==c)){if(u=mn,h="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,h="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==s?l:wa(s),f=null==c?l:wa(c),(l=new u(h,m+"leave",s,n,a)).target=d,l.relatedTarget=f,h=null,ba(a)===o&&((u=new u(p,m+"enter",c,n,a)).target=f,u.relatedTarget=d,h=u),d=h,s&&c)e:{for(p=c,m=0,f=u=s;f;f=Go(f))m++;for(f=0,h=p;h;h=Go(h))f++;for(;0<m-f;)u=Go(u),m--;for(;0<f-m;)p=Go(p),f--;for(;m--;){if(u===p||null!==p&&u===p.alternate)break e;u=Go(u),p=Go(p)}u=null}else u=null;null!==s&&$o(i,l,s,u,!1),null!==c&&null!==d&&$o(i,d,c,u,!0)}if("select"===(s=(l=o?wa(o):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var g=qn;else if(Wn(l))if(Zn)g=io;else{g=ao;var v=oo}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(g=ro);switch(g&&(g=g(e,o))?Xn(i,g,n,a):(v&&v(e,l,o),"focusout"===e&&(v=l._wrapperState)&&v.controlled&&"number"===l.type&&ee(l,"number",l.value)),v=o?wa(o):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(vo=v,yo=o,bo=null);break;case"focusout":bo=yo=vo=null;break;case"mousedown":xo=!0;break;case"contextmenu":case"mouseup":case"dragend":xo=!1,wo(i,n,a);break;case"selectionchange":if(go)break;case"keydown":case"keyup":wo(i,n,a)}var y;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Qt="value"in(Zt=a)?Zt.value:Zt.textContent,Hn=!0)),0<(v=Ko(o,b)).length&&(b=new xn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=zn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(In=!0,Ln);case"textInput":return(e=t.data)===Ln&&In?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!An&&Bn(e,t)?(e=en(),Jt=Qt=Zt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(o=Ko(o,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:o}),a.data=y))}Io(i,t)})}function Yo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ko(e,t){for(var n=t+"Capture",o=[];null!==e;){var a=e,r=a.stateNode;5===a.tag&&null!==r&&(a=r,null!=(r=De(e,n))&&o.unshift(Yo(e,r,a)),null!=(r=De(e,t))&&o.push(Yo(e,r,a))),e=e.return}return o}function Go(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $o(e,t,n,o,a){for(var r=t._reactName,i=[];null!==n&&n!==o;){var l=n,s=l.alternate,c=l.stateNode;if(null!==s&&s===o)break;5===l.tag&&null!==c&&(l=c,a?null!=(s=De(n,r))&&i.unshift(Yo(n,s,l)):a||null!=(s=De(n,r))&&i.push(Yo(n,s,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var qo=/\r\n?/g,Zo=/\u0000|\uFFFD/g;function Qo(e){return("string"===typeof e?e:""+e).replace(qo,"\n").replace(Zo,"")}function Jo(e,t,n){if(t=Qo(t),Qo(e)!==t&&n)throw Error(r(425))}function ea(){}var ta=null,na=null;function oa(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var aa="function"===typeof setTimeout?setTimeout:void 0,ra="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,la="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:aa;function sa(e){setTimeout(function(){throw e})}function ca(e,t){var n=t,o=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===o)return e.removeChild(a),void Ht(t);o--}else"$"!==n&&"$?"!==n&&"$!"!==n||o++;n=a}while(n);Ht(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var pa=Math.random().toString(36).slice(2),fa="__reactFiber$"+pa,ma="__reactProps$"+pa,ha="__reactContainer$"+pa,ga="__reactEvents$"+pa,va="__reactListeners$"+pa,ya="__reactHandles$"+pa;function ba(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[fa])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function xa(e){return!(e=e[fa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Sa(e){return e[ma]||null}var ka=[],Ca=-1;function Ea(e){return{current:e}}function Na(e){0>Ca||(e.current=ka[Ca],ka[Ca]=null,Ca--)}function ja(e,t){Ca++,ka[Ca]=e.current,e.current=t}var Pa={},Ma=Ea(Pa),Ta=Ea(!1),_a=Pa;function Da(e,t){var n=e.type.contextTypes;if(!n)return Pa;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var a,r={};for(a in n)r[a]=t[a];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Aa(){Na(Ta),Na(Ma)}function Oa(e,t,n){if(Ma.current!==Pa)throw Error(r(168));ja(Ma,t),ja(Ta,n)}function za(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,"function"!==typeof o.getChildContext)return n;for(var a in o=o.getChildContext())if(!(a in t))throw Error(r(108,V(e)||"Unknown",a));return F({},n,o)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pa,_a=Ma.current,ja(Ma,e),ja(Ta,Ta.current),!0}function La(e,t,n){var o=e.stateNode;if(!o)throw Error(r(169));n?(e=za(e,t,_a),o.__reactInternalMemoizedMergedChildContext=e,Na(Ta),Na(Ma),ja(Ma,e)):Na(Ta),ja(Ta,n)}var Ia=null,Ba=!1,Ua=!1;function Ha(e){null===Ia?Ia=[e]:Ia.push(e)}function Va(){if(!Ua&&null!==Ia){Ua=!0;var e=0,t=bt;try{var n=Ia;for(bt=1;e<n.length;e++){var o=n[e];do{o=o(!0)}while(null!==o)}Ia=null,Ba=!1}catch(a){throw null!==Ia&&(Ia=Ia.slice(e+1)),Ke(Je,Va),a}finally{bt=t,Ua=!1}}return null}var Wa=[],Xa=0,Ya=null,Ka=0,Ga=[],$a=0,qa=null,Za=1,Qa="";function Ja(e,t){Wa[Xa++]=Ka,Wa[Xa++]=Ya,Ya=e,Ka=t}function er(e,t,n){Ga[$a++]=Za,Ga[$a++]=Qa,Ga[$a++]=qa,qa=e;var o=Za;e=Qa;var a=32-it(o)-1;o&=~(1<<a),n+=1;var r=32-it(t)+a;if(30<r){var i=a-a%5;r=(o&(1<<i)-1).toString(32),o>>=i,a-=i,Za=1<<32-it(t)+a|n<<a|o,Qa=r+e}else Za=1<<r|n<<a|o,Qa=e}function tr(e){null!==e.return&&(Ja(e,1),er(e,1,0))}function nr(e){for(;e===Ya;)Ya=Wa[--Xa],Wa[Xa]=null,Ka=Wa[--Xa],Wa[Xa]=null;for(;e===qa;)qa=Ga[--$a],Ga[$a]=null,Qa=Ga[--$a],Ga[$a]=null,Za=Ga[--$a],Ga[$a]=null}var or=null,ar=null,rr=!1,ir=null;function lr(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sr(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,or=e,ar=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,or=e,ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qa?{id:Za,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,or=e,ar=null,!0);default:return!1}}function cr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ur(e){if(rr){var t=ar;if(t){var n=t;if(!sr(e,t)){if(cr(e))throw Error(r(418));t=ua(n.nextSibling);var o=or;t&&sr(e,t)?lr(o,n):(e.flags=-4097&e.flags|2,rr=!1,or=e)}}else{if(cr(e))throw Error(r(418));e.flags=-4097&e.flags|2,rr=!1,or=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;or=e}function pr(e){if(e!==or)return!1;if(!rr)return dr(e),rr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!oa(e.type,e.memoizedProps)),t&&(t=ar)){if(cr(e))throw fr(),Error(r(418));for(;t;)lr(e,t),t=ua(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ar=ua(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ar=null}}else ar=or?ua(e.stateNode.nextSibling):null;return!0}function fr(){for(var e=ar;e;)e=ua(e.nextSibling)}function mr(){ar=or=null,rr=!1}function hr(e){null===ir?ir=[e]:ir.push(e)}var gr=x.ReactCurrentBatchConfig;function vr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var o=n.stateNode}if(!o)throw Error(r(147,e));var a=o,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function yr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function br(e){return(0,e._init)(e._payload)}function xr(e){function t(t,n){if(e){var o=t.deletions;null===o?(t.deletions=[n],t.flags|=16):o.push(n)}}function n(n,o){if(!e)return null;for(;null!==o;)t(n,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<n?(t.flags|=2,n):o:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,o){return null===t||6!==t.tag?((t=Fc(n,e.mode,o)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,o){var r=n.type;return r===k?d(e,t,n.props.children,o,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===D&&br(r)===t.type)?((o=a(t,n.props)).ref=vr(e,t,n),o.return=e,o):((o=Ac(n.type,n.key,n.props,null,e.mode,o)).ref=vr(e,t,n),o.return=e,o)}function u(e,t,n,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,o)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,o,r){return null===t||7!==t.tag?((t=Oc(n,e.mode,o,r)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=vr(e,null,t),n.return=e,n;case S:return(t=Lc(t,e.mode,n)).return=e,t;case D:return p(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;yr(e,t)}return null}function f(e,t,n,o){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:s(e,t,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,o):null;case S:return n.key===a?u(e,t,n,o):null;case D:return f(e,t,(a=n._init)(n._payload),o)}if(te(n)||O(n))return null!==a?null:d(e,t,n,o,null);yr(e,n)}return null}function m(e,t,n,o,a){if("string"===typeof o&&""!==o||"number"===typeof o)return s(t,e=e.get(n)||null,""+o,a);if("object"===typeof o&&null!==o){switch(o.$$typeof){case w:return c(t,e=e.get(null===o.key?n:o.key)||null,o,a);case S:return u(t,e=e.get(null===o.key?n:o.key)||null,o,a);case D:return m(e,t,n,(0,o._init)(o._payload),a)}if(te(o)||O(o))return d(t,e=e.get(n)||null,o,a,null);yr(t,o)}return null}function h(a,r,l,s){for(var c=null,u=null,d=r,h=r=0,g=null;null!==d&&h<l.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var v=f(a,d,l[h],s);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),r=i(v,r,h),null===u?c=v:u.sibling=v,u=v,d=g}if(h===l.length)return n(a,d),rr&&Ja(a,h),c;if(null===d){for(;h<l.length;h++)null!==(d=p(a,l[h],s))&&(r=i(d,r,h),null===u?c=d:u.sibling=d,u=d);return rr&&Ja(a,h),c}for(d=o(a,d);h<l.length;h++)null!==(g=m(d,a,h,l[h],s))&&(e&&null!==g.alternate&&d.delete(null===g.key?h:g.key),r=i(g,r,h),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),rr&&Ja(a,h),c}function g(a,l,s,c){var u=O(s);if("function"!==typeof u)throw Error(r(150));if(null==(s=u.call(s)))throw Error(r(151));for(var d=u=null,h=l,g=l=0,v=null,y=s.next();null!==h&&!y.done;g++,y=s.next()){h.index>g?(v=h,h=null):v=h.sibling;var b=f(a,h,y.value,c);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&t(a,h),l=i(b,l,g),null===d?u=b:d.sibling=b,d=b,h=v}if(y.done)return n(a,h),rr&&Ja(a,g),u;if(null===h){for(;!y.done;g++,y=s.next())null!==(y=p(a,y.value,c))&&(l=i(y,l,g),null===d?u=y:d.sibling=y,d=y);return rr&&Ja(a,g),u}for(h=o(a,h);!y.done;g++,y=s.next())null!==(y=m(h,a,g,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?g:y.key),l=i(y,l,g),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return t(a,e)}),rr&&Ja(a,g),u}return function e(o,r,i,s){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=r;null!==u;){if(u.key===c){if((c=i.type)===k){if(7===u.tag){n(o,u.sibling),(r=a(u,i.props.children)).return=o,o=r;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&br(c)===u.type){n(o,u.sibling),(r=a(u,i.props)).ref=vr(o,u,i),r.return=o,o=r;break e}n(o,u);break}t(o,u),u=u.sibling}i.type===k?((r=Oc(i.props.children,o.mode,s,i.key)).return=o,o=r):((s=Ac(i.type,i.key,i.props,null,o.mode,s)).ref=vr(o,r,i),s.return=o,o=s)}return l(o);case S:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(o,r.sibling),(r=a(r,i.children||[])).return=o,o=r;break e}n(o,r);break}t(o,r),r=r.sibling}(r=Lc(i,o.mode,s)).return=o,o=r}return l(o);case D:return e(o,r,(u=i._init)(i._payload),s)}if(te(i))return h(o,r,i,s);if(O(i))return g(o,r,i,s);yr(o,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(n(o,r.sibling),(r=a(r,i)).return=o,o=r):(n(o,r),(r=Fc(i,o.mode,s)).return=o,o=r),l(o)):n(o,r)}}var wr=xr(!0),Sr=xr(!1),kr=Ea(null),Cr=null,Er=null,Nr=null;function jr(){Nr=Er=Cr=null}function Pr(e){var t=kr.current;Na(kr),e._currentValue=t}function Mr(e,t,n){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t){Cr=e,Nr=Er=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bl=!0),e.firstContext=null)}function _r(e){var t=e._currentValue;if(Nr!==e)if(e={context:e,memoizedValue:t,next:null},null===Er){if(null===Cr)throw Error(r(308));Er=e,Cr.dependencies={lanes:0,firstContext:e}}else Er=Er.next=e;return t}var Dr=null;function Rr(e){null===Dr?Dr=[e]:Dr.push(e)}function Ar(e,t,n,o){var a=t.interleaved;return null===a?(n.next=n,Rr(t)):(n.next=a.next,a.next=n),t.interleaved=n,Or(e,o)}function Or(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var zr=!1;function Fr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Br(e,t,n){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&Ps)){var a=o.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),o.pending=t,Or(e,n)}return null===(a=o.interleaved)?(t.next=t,Rr(o)):(t.next=a.next,a.next=t),o.interleaved=t,Or(e,n)}function Ur(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Hr(e,t){var n=e.updateQueue,o=e.alternate;if(null!==o&&n===(o=o.updateQueue)){var a=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?a=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?a=r=t:r=r.next=t}else a=r=t;return n={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:o.shared,effects:o.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vr(e,t,n,o){var a=e.updateQueue;zr=!1;var r=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var s=l,c=s.next;s.next=null,null===i?r=c:i.next=c,i=s;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=s))}if(null!==r){var d=a.baseState;for(i=0,u=c=s=null,l=r;;){var p=l.lane,f=l.eventTime;if((o&p)===p){null!==u&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,h=l;switch(p=t,f=n,h.tag){case 1:if("function"===typeof(m=h.payload)){d=m.call(f,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=h.payload)?m.call(f,d,p):m)||void 0===p)break e;d=F({},d,p);break e;case 2:zr=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=f,s=d):u=u.next=f,i|=p;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(p=l).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===u&&(s=d),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===r&&(a.shared.lanes=0);zs|=i,e.lanes=i,e.memoizedState=d}}function Wr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],a=o.callback;if(null!==a){if(o.callback=null,o=n,"function"!==typeof a)throw Error(r(191,a));a.call(o)}}}var Xr={},Yr=Ea(Xr),Kr=Ea(Xr),Gr=Ea(Xr);function $r(e){if(e===Xr)throw Error(r(174));return e}function qr(e,t){switch(ja(Gr,t),ja(Kr,e),ja(Yr,Xr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Na(Yr),ja(Yr,t)}function Zr(){Na(Yr),Na(Kr),Na(Gr)}function Qr(e){$r(Gr.current);var t=$r(Yr.current),n=se(t,e.type);t!==n&&(ja(Kr,e),ja(Yr,n))}function Jr(e){Kr.current===e&&(Na(Yr),Na(Kr))}var ei=Ea(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function oi(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=x.ReactCurrentDispatcher,ri=x.ReactCurrentBatchConfig,ii=0,li=null,si=null,ci=null,ui=!1,di=!1,pi=0,fi=0;function mi(){throw Error(r(321))}function hi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lo(e[n],t[n]))return!1;return!0}function gi(e,t,n,o,a,i){if(ii=i,li=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Ji:el,e=n(o,a),di){i=0;do{if(di=!1,pi=0,25<=i)throw Error(r(301));i+=1,ci=si=null,t.updateQueue=null,ai.current=tl,e=n(o,a)}while(di)}if(ai.current=Qi,t=null!==si&&null!==si.next,ii=0,ci=si=li=null,ui=!1,t)throw Error(r(300));return e}function vi(){var e=0!==pi;return pi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?li.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===si){var e=li.alternate;e=null!==e?e.memoizedState:null}else e=si.next;var t=null===ci?li.memoizedState:ci.next;if(null!==t)ci=t,si=e;else{if(null===e)throw Error(r(310));e={memoizedState:(si=e).memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},null===ci?li.memoizedState=ci=e:ci=ci.next=e}return ci}function xi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=bi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var o=si,a=o.baseQueue,i=n.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}o.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,o=o.baseState;var s=l=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),o=u.hasEagerState?u.eagerState:e(o,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(s=c=p,l=o):c=c.next=p,li.lanes|=d,zs|=d}u=u.next}while(null!==u&&u!==i);null===c?l=o:c.next=s,lo(o,t.memoizedState)||(bl=!0),t.memoizedState=o,t.baseState=l,t.baseQueue=c,n.lastRenderedState=o}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,li.lanes|=i,zs|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Si(e){var t=bi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var o=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);lo(i,t.memoizedState)||(bl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,o]}function ki(){}function Ci(e,t){var n=li,o=bi(),a=t(),i=!lo(o.memoizedState,a);if(i&&(o.memoizedState=a,bl=!0),o=o.queue,zi(ji.bind(null,n,o,e),[e]),o.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,_i(9,Ni.bind(null,n,o,a,t),void 0,null),null===Ms)throw Error(r(349));0!==(30&ii)||Ei(n,t,a)}return a}function Ei(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ni(e,t,n,o){t.value=n,t.getSnapshot=o,Pi(t)&&Mi(e)}function ji(e,t,n){return n(function(){Pi(t)&&Mi(e)})}function Pi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lo(e,n)}catch(o){return!0}}function Mi(e){var t=Or(e,1);null!==t&&nc(t,e,1,-1)}function Ti(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,li,e),[t.memoizedState,e]}function _i(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function Di(){return bi().memoizedState}function Ri(e,t,n,o){var a=yi();li.flags|=e,a.memoizedState=_i(1|t,n,void 0,void 0===o?null:o)}function Ai(e,t,n,o){var a=bi();o=void 0===o?null:o;var r=void 0;if(null!==si){var i=si.memoizedState;if(r=i.destroy,null!==o&&hi(o,i.deps))return void(a.memoizedState=_i(t,n,r,o))}li.flags|=e,a.memoizedState=_i(1|t,n,r,o)}function Oi(e,t){return Ri(8390656,8,e,t)}function zi(e,t){return Ai(2048,8,e,t)}function Fi(e,t){return Ai(4,2,e,t)}function Li(e,t){return Ai(4,4,e,t)}function Ii(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,4,Ii.bind(null,t,e),n)}function Ui(){}function Hi(e,t){var n=bi();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&hi(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function Vi(e,t){var n=bi();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&hi(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=n):(lo(n,t)||(n=ht(),li.lanes|=n,zs|=n,e.baseState=!0),t)}function Xi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var o=ri.transition;ri.transition={};try{e(!1),t()}finally{bt=n,ri.transition=o}}function Yi(){return bi().memoizedState}function Ki(e,t,n){var o=tc(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e))qi(t,n);else if(null!==(n=Ar(e,t,n,o))){nc(n,e,o,ec()),Zi(n,t,o)}}function Gi(e,t,n){var o=tc(e),a={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if($i(e))qi(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,n);if(a.hasEagerState=!0,a.eagerState=l,lo(l,i)){var s=t.interleaved;return null===s?(a.next=a,Rr(t)):(a.next=s.next,s.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ar(e,t,a,o))&&(nc(n,e,o,a=ec()),Zi(n,t,o))}}function $i(e){var t=e.alternate;return e===li||null!==t&&t===li}function qi(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zi(e,t,n){if(0!==(4194240&n)){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qi={readContext:_r,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Ji={readContext:_r,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:_r,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4194308,4,Ii.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=yi();return t=void 0!==n?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Ki.bind(null,li,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ti,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Xi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=li,a=yi();if(rr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Ms)throw Error(r(349));0!==(30&ii)||Ei(o,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Oi(ji.bind(null,o,i,e),[e]),o.flags|=2048,_i(9,Ni.bind(null,o,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Ms.identifierPrefix;if(rr){var n=Qa;t=":"+t+"R"+(n=(Za&~(1<<32-it(Za)-1)).toString(32)+n),0<(n=pi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},el={readContext:_r,useCallback:Hi,useContext:_r,useEffect:zi,useImperativeHandle:Bi,useInsertionEffect:Fi,useLayoutEffect:Li,useMemo:Vi,useReducer:wi,useRef:Di,useState:function(){return wi(xi)},useDebugValue:Ui,useDeferredValue:function(e){return Wi(bi(),si.memoizedState,e)},useTransition:function(){return[wi(xi)[0],bi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Ci,useId:Yi,unstable_isNewReconciler:!1},tl={readContext:_r,useCallback:Hi,useContext:_r,useEffect:zi,useImperativeHandle:Bi,useInsertionEffect:Fi,useLayoutEffect:Li,useMemo:Vi,useReducer:Si,useRef:Di,useState:function(){return Si(xi)},useDebugValue:Ui,useDeferredValue:function(e){var t=bi();return null===si?t.memoizedState=e:Wi(t,si.memoizedState,e)},useTransition:function(){return[Si(xi)[0],bi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Ci,useId:Yi,unstable_isNewReconciler:!1};function nl(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ol(e,t,n,o){n=null===(n=n(o,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=ec(),a=tc(e),r=Ir(o,a);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Br(e,r,a))&&(nc(t,e,a,o),Ur(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=ec(),a=tc(e),r=Ir(o,a);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Br(e,r,a))&&(nc(t,e,a,o),Ur(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),o=tc(e),a=Ir(n,o);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Br(e,a,o))&&(nc(t,e,o,n),Ur(t,e,o))}};function rl(e,t,n,o,a,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!so(n,o)||!so(a,r))}function il(e,t,n){var o=!1,a=Pa,r=t.contextType;return"object"===typeof r&&null!==r?r=_r(r):(a=Ra(t)?_a:Ma.current,r=(o=null!==(o=t.contextTypes)&&void 0!==o)?Da(e,a):Pa),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=r),t}function ll(e,t,n,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function sl(e,t,n,o){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Fr(e);var r=t.contextType;"object"===typeof r&&null!==r?a.context=_r(r):(r=Ra(t)?_a:Ma.current,a.context=Da(e,r)),a.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(ol(e,t,r,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&al.enqueueReplaceState(a,a.state,null),Vr(e,n,a,o),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function cl(e,t){try{var n="",o=t;do{n+=U(o),o=o.return}while(o);var a=n}catch(r){a="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:a,digest:null}}function ul(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pl="function"===typeof WeakMap?WeakMap:Map;function fl(e,t,n){(n=Ir(-1,n)).tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Ws||(Ws=!0,Xs=o),dl(0,t)},n}function ml(e,t,n){(n=Ir(-1,n)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var a=t.value;n.payload=function(){return o(a)},n.callback=function(){dl(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){dl(0,t),"function"!==typeof o&&(null===Ys?Ys=new Set([this]):Ys.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hl(e,t,n){var o=e.pingCache;if(null===o){o=e.pingCache=new pl;var a=new Set;o.set(t,a)}else void 0===(a=o.get(t))&&(a=new Set,o.set(t,a));a.has(n)||(a.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vl(e,t,n,o,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ir(-1,1)).tag=2,Br(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yl=x.ReactCurrentOwner,bl=!1;function xl(e,t,n,o){t.child=null===e?Sr(t,null,n,o):wr(t,e.child,n,o)}function wl(e,t,n,o,a){n=n.render;var r=t.ref;return Tr(t,a),o=gi(e,t,n,o,r,a),n=vi(),null===e||bl?(rr&&n&&tr(t),t.flags|=1,xl(e,t,o,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wl(e,t,a))}function Sl(e,t,n,o,a){if(null===e){var r=n.type;return"function"!==typeof r||Dc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,o,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,kl(e,t,r,o,a))}if(r=e.child,0===(e.lanes&a)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:so)(i,o)&&e.ref===t.ref)return Wl(e,t,a)}return t.flags|=1,(e=Rc(r,o)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,n,o,a){if(null!==e){var r=e.memoizedProps;if(so(r,o)&&e.ref===t.ref){if(bl=!1,t.pendingProps=o=r,0===(e.lanes&a))return t.lanes=e.lanes,Wl(e,t,a);0!==(131072&e.flags)&&(bl=!0)}}return Nl(e,t,n,o,a)}function Cl(e,t,n){var o=t.pendingProps,a=o.children,r=null!==e?e.memoizedState:null;if("hidden"===o.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ja(Rs,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ja(Rs,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==r?r.baseLanes:n,ja(Rs,Ds),Ds|=o}else null!==r?(o=r.baseLanes|n,t.memoizedState=null):o=n,ja(Rs,Ds),Ds|=o;return xl(e,t,a,n),t.child}function El(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Nl(e,t,n,o,a){var r=Ra(n)?_a:Ma.current;return r=Da(t,r),Tr(t,a),n=gi(e,t,n,o,r,a),o=vi(),null===e||bl?(rr&&o&&tr(t),t.flags|=1,xl(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wl(e,t,a))}function jl(e,t,n,o,a){if(Ra(n)){var r=!0;Fa(t)}else r=!1;if(Tr(t,a),null===t.stateNode)Vl(e,t),il(t,n,o),sl(t,n,o,a),o=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var s=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=_r(c):c=Da(t,c=Ra(n)?_a:Ma.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==o||s!==c)&&ll(t,i,o,c),zr=!1;var p=t.memoizedState;i.state=p,Vr(t,o,i,a),s=t.memoizedState,l!==o||p!==s||Ta.current||zr?("function"===typeof u&&(ol(t,n,u,o),s=t.memoizedState),(l=zr||rl(t,n,l,o,p,s,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=s),i.props=o,i.state=s,i.context=c,o=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),o=!1)}else{i=t.stateNode,Lr(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:nl(t.type,l),i.props=c,d=t.pendingProps,p=i.context,"object"===typeof(s=n.contextType)&&null!==s?s=_r(s):s=Da(t,s=Ra(n)?_a:Ma.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==d||p!==s)&&ll(t,i,o,s),zr=!1,p=t.memoizedState,i.state=p,Vr(t,o,i,a);var m=t.memoizedState;l!==d||p!==m||Ta.current||zr?("function"===typeof f&&(ol(t,n,f,o),m=t.memoizedState),(c=zr||rl(t,n,c,o,p,m,s)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(o,m,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(o,m,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=m),i.props=o,i.state=m,i.context=s,o=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),o=!1)}return Pl(e,t,n,o,r,a)}function Pl(e,t,n,o,a,r){El(e,t);var i=0!==(128&t.flags);if(!o&&!i)return a&&La(t,n,!1),Wl(e,t,r);o=t.stateNode,yl.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:o.render();return t.flags|=1,null!==e&&i?(t.child=wr(t,e.child,null,r),t.child=wr(t,null,l,r)):xl(e,t,l,r),t.memoizedState=o.state,a&&La(t,n,!0),t.child}function Ml(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),qr(e,t.containerInfo)}function Tl(e,t,n,o,a){return mr(),hr(a),t.flags|=256,xl(e,t,n,o),t.child}var _l,Dl,Rl,Al,Ol={dehydrated:null,treeContext:null,retryLane:0};function zl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fl(e,t,n){var o,a=t.pendingProps,i=ei.current,l=!1,s=0!==(128&t.flags);if((o=s)||(o=(null===e||null!==e.memoizedState)&&0!==(2&i)),o?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),ja(ei,1&i),null===e)return ur(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=a.children,e=a.fallback,l?(a=t.mode,l=t.child,s={mode:"hidden",children:s},0===(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=zc(s,a,0,null),e=Oc(e,a,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=zl(n),t.memoizedState=Ol,e):Ll(t,s));if(null!==(i=e.memoizedState)&&null!==(o=i.dehydrated))return function(e,t,n,o,a,i,l){if(n)return 256&t.flags?(t.flags&=-257,Il(e,t,l,o=ul(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=o.fallback,a=t.mode,o=zc({mode:"visible",children:o.children},a,0,null),(i=Oc(i,a,l,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,0!==(1&t.mode)&&wr(t,e.child,null,l),t.child.memoizedState=zl(l),t.memoizedState=Ol,i);if(0===(1&t.mode))return Il(e,t,l,null);if("$!"===a.data){if(o=a.nextSibling&&a.nextSibling.dataset)var s=o.dgst;return o=s,Il(e,t,l,o=ul(i=Error(r(419)),o,void 0))}if(s=0!==(l&e.childLanes),bl||s){if(null!==(o=Ms)){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(o.suspendedLanes|l))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Or(e,a),nc(o,e,a,-1))}return hc(),Il(e,t,l,o=ul(Error(r(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ar=ua(a.nextSibling),or=t,rr=!0,ir=null,null!==e&&(Ga[$a++]=Za,Ga[$a++]=Qa,Ga[$a++]=qa,Za=e.id,Qa=e.overflow,qa=t),t=Ll(t,o.children),t.flags|=4096,t)}(e,t,s,a,o,i,n);if(l){l=a.fallback,s=t.mode,o=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&s)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==o?l=Rc(o,l):(l=Oc(l,s,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,s=null===(s=e.child.memoizedState)?zl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=Ol,a}return e=(l=e.child).sibling,a=Rc(l,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ll(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Il(e,t,n,o){return null!==o&&hr(o),wr(t,e.child,null,n),(e=Ll(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bl(e,t,n){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),Mr(e.return,t,n)}function Ul(e,t,n,o,a){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=a)}function Hl(e,t,n){var o=t.pendingProps,a=o.revealOrder,r=o.tail;if(xl(e,t,o.children,n),0!==(2&(o=ei.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bl(e,n,t);else if(19===e.tag)Bl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(ja(ei,o),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ul(t,!1,a,n,r);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ul(t,!0,n,null,r);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xl(e,t){if(!rr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Yl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,o=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,o|=14680064&a.subtreeFlags,o|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Kl(e,t,n){var o=t.pendingProps;switch(nr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yl(t),null;case 1:case 17:return Ra(t.type)&&Aa(),Yl(t),null;case 3:return o=t.stateNode,Zr(),Na(Ta),Na(Ma),oi(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(pr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ir&&(ic(ir),ir=null))),Dl(e,t),Yl(t),null;case 5:Jr(t);var a=$r(Gr.current);if(n=t.type,null!==e&&null!=t.stateNode)Rl(e,t,n,o,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(r(166));return Yl(t),null}if(e=$r(Yr.current),pr(t)){o=t.stateNode,n=t.type;var i=t.memoizedProps;switch(o[fa]=t,o[ma]=i,e=0!==(1&t.mode),n){case"dialog":Bo("cancel",o),Bo("close",o);break;case"iframe":case"object":case"embed":Bo("load",o);break;case"video":case"audio":for(a=0;a<zo.length;a++)Bo(zo[a],o);break;case"source":Bo("error",o);break;case"img":case"image":case"link":Bo("error",o),Bo("load",o);break;case"details":Bo("toggle",o);break;case"input":q(o,i),Bo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},Bo("invalid",o);break;case"textarea":ae(o,i),Bo("invalid",o)}for(var s in ye(n,i),a=null,i)if(i.hasOwnProperty(s)){var c=i[s];"children"===s?"string"===typeof c?o.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jo(o.textContent,c,e),a=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jo(o.textContent,c,e),a=["children",""+c]):l.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Bo("scroll",o)}switch(n){case"input":Y(o),J(o,i,!0);break;case"textarea":Y(o),ie(o);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(o.onclick=ea)}o=a,t.updateQueue=o,null!==o&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=s.createElement(n,{is:o.is}):(e=s.createElement(n),"select"===n&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,n),e[fa]=t,e[ma]=o,_l(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,o),n){case"dialog":Bo("cancel",e),Bo("close",e),a=o;break;case"iframe":case"object":case"embed":Bo("load",e),a=o;break;case"video":case"audio":for(a=0;a<zo.length;a++)Bo(zo[a],e);a=o;break;case"source":Bo("error",e),a=o;break;case"img":case"image":case"link":Bo("error",e),Bo("load",e),a=o;break;case"details":Bo("toggle",e),a=o;break;case"input":q(e,o),a=$(e,o),Bo("invalid",e);break;case"option":default:a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=F({},o,{value:void 0}),Bo("invalid",e);break;case"textarea":ae(e,o),a=oe(e,o),Bo("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Bo("scroll",e):null!=u&&b(e,i,u,s))}switch(n){case"input":Y(e),J(e,o,!1);break;case"textarea":Y(e),ie(e);break;case"option":null!=o.value&&e.setAttribute("value",""+W(o.value));break;case"select":e.multiple=!!o.multiple,null!=(i=o.value)?ne(e,!!o.multiple,i,!1):null!=o.defaultValue&&ne(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=ea)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yl(t),null;case 6:if(e&&null!=t.stateNode)Al(e,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(r(166));if(n=$r(Gr.current),$r(Yr.current),pr(t)){if(o=t.stateNode,n=t.memoizedProps,o[fa]=t,(i=o.nodeValue!==n)&&null!==(e=or))switch(e.tag){case 3:Jo(o.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jo(o.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[fa]=t,t.stateNode=o}return Yl(t),null;case 13:if(Na(ei),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rr&&null!==ar&&0!==(1&t.mode)&&0===(128&t.flags))fr(),mr(),t.flags|=98560,i=!1;else if(i=pr(t),null!==o&&null!==o.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[fa]=t}else mr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yl(t),i=!1}else null!==ir&&(ic(ir),ir=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((o=null!==o)!==(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===As&&(As=3):hc())),null!==t.updateQueue&&(t.flags|=4),Yl(t),null);case 4:return Zr(),Dl(e,t),null===e&&Vo(t.stateNode.containerInfo),Yl(t),null;case 10:return Pr(t.type._context),Yl(t),null;case 19:if(Na(ei),null===(i=t.memoizedState))return Yl(t),null;if(o=0!==(128&t.flags),null===(s=i.rendering))if(o)Xl(i,!1);else{if(0!==As||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ti(e))){for(t.flags|=128,Xl(i,!1),null!==(o=s.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;null!==n;)e=o,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ja(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Ze()>Hs&&(t.flags|=128,o=!0,Xl(i,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=ti(s))){if(t.flags|=128,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!rr)return Yl(t),null}else 2*Ze()-i.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=128,o=!0,Xl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ze(),t.sibling=null,n=ei.current,ja(ei,o?1&n|2:1&n),t):(Yl(t),null);case 22:case 23:return dc(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Yl(t),6&t.subtreeFlags&&(t.flags|=8192)):Yl(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Gl(e,t){switch(nr(t),t.tag){case 1:return Ra(t.type)&&Aa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zr(),Na(Ta),Na(Ma),oi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(Na(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Na(ei),null;case 4:return Zr(),null;case 10:return Pr(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}_l=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Dl=function(){},Rl=function(e,t,n,o){var a=e.memoizedProps;if(a!==o){e=t.stateNode,$r(Yr.current);var r,i=null;switch(n){case"input":a=$(e,a),o=$(e,o),i=[];break;case"select":a=F({},a,{value:void 0}),o=F({},o,{value:void 0}),i=[];break;case"textarea":a=oe(e,a),o=oe(e,o),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof o.onClick&&(e.onclick=ea)}for(u in ye(n,o),n=null,a)if(!o.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var s=a[u];for(r in s)s.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(l.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in o){var c=o[u];if(s=null!=a?a[u]:void 0,o.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(r in s)!s.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&s[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(l.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bo("scroll",e),i||s===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Al=function(e,t,n,o){n!==o&&(t.flags|=4)};var $l=!1,ql=!1,Zl="function"===typeof WeakSet?WeakSet:Set,Ql=null;function Jl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(o){Cc(e,t,o)}else n.current=null}function es(e,t,n){try{n()}catch(o){Cc(e,t,o)}}var ts=!1;function ns(e,t,n){var o=t.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var a=o=o.next;do{if((a.tag&e)===e){var r=a.destroy;a.destroy=void 0,void 0!==r&&es(t,n,r)}a=a.next}while(a!==o)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rs(e){var t=e.alternate;null!==t&&(e.alternate=null,rs(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ma],delete t[ga],delete t[va],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function is(e){return 5===e.tag||3===e.tag||4===e.tag}function ls(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||is(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ea));else if(4!==o&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==o&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var us=null,ds=!1;function ps(e,t,n){for(n=n.child;null!==n;)fs(e,t,n),n=n.sibling}function fs(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(at,n)}catch(l){}switch(n.tag){case 5:ql||Jl(n,t);case 6:var o=us,a=ds;us=null,ps(e,t,n),ds=a,null!==(us=o)&&(ds?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ds?(e=us,n=n.stateNode,8===e.nodeType?ca(e.parentNode,n):1===e.nodeType&&ca(e,n),Ht(e)):ca(us,n.stateNode));break;case 4:o=us,a=ds,us=n.stateNode.containerInfo,ds=!0,ps(e,t,n),us=o,ds=a;break;case 0:case 11:case 14:case 15:if(!ql&&(null!==(o=n.updateQueue)&&null!==(o=o.lastEffect))){a=o=o.next;do{var r=a,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&es(n,t,i),a=a.next}while(a!==o)}ps(e,t,n);break;case 1:if(!ql&&(Jl(n,t),"function"===typeof(o=n.stateNode).componentWillUnmount))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(l){Cc(n,t,l)}ps(e,t,n);break;case 21:ps(e,t,n);break;case 22:1&n.mode?(ql=(o=ql)||null!==n.memoizedState,ps(e,t,n),ql=o):ps(e,t,n);break;default:ps(e,t,n)}}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zl),t.forEach(function(t){var o=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(o,o))})}}function hs(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var a=n[o];try{var i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ds=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ds=!0;break e}s=s.return}if(null===us)throw Error(r(160));fs(i,l,a),us=null,ds=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Cc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gs(t,e),t=t.sibling}function gs(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),vs(e),4&o){try{ns(3,e,e.return),os(3,e)}catch(g){Cc(e,e.return,g)}try{ns(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:hs(t,e),vs(e),512&o&&null!==n&&Jl(n,n.return);break;case 5:if(hs(t,e),vs(e),512&o&&null!==n&&Jl(n,n.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(g){Cc(e,e.return,g)}}if(4&o&&null!=(a=e.stateNode)){var i=e.memoizedProps,l=null!==n?n.memoizedProps:i,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===i.type&&null!=i.name&&Z(a,i),be(s,l);var u=be(s,i);for(l=0;l<c.length;l+=2){var d=c[l],p=c[l+1];"style"===d?ge(a,p):"dangerouslySetInnerHTML"===d?de(a,p):"children"===d?pe(a,p):b(a,d,p,u)}switch(s){case"input":Q(a,i);break;case"textarea":re(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(g){Cc(e,e.return,g)}}break;case 6:if(hs(t,e),vs(e),4&o){if(null===e.stateNode)throw Error(r(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Cc(e,e.return,g)}}break;case 3:if(hs(t,e),vs(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:hs(t,e),vs(e);break;case 13:hs(t,e),vs(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Us=Ze())),4&o&&ms(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(ql=(u=ql)||d,hs(t,e),ql=u):hs(t,e),vs(e),8192&o){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ql=e,d=e.child;null!==d;){for(p=Ql=d;null!==Ql;){switch(m=(f=Ql).child,f.tag){case 0:case 11:case 14:case 15:ns(4,f,f.return);break;case 1:Jl(f,f.return);var h=f.stateNode;if("function"===typeof h.componentWillUnmount){o=f,n=f.return;try{t=o,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){Cc(o,n,g)}}break;case 5:Jl(f,f.return);break;case 22:if(null!==f.memoizedState){ws(p);continue}}null!==m?(m.return=f,Ql=m):ws(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{a=p.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=p.stateNode,l=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=he("display",l))}catch(g){Cc(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:hs(t,e),vs(e),4&o&&ms(e);case 21:}}function vs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(is(n)){var o=n;break e}n=n.return}throw Error(r(160))}switch(o.tag){case 5:var a=o.stateNode;32&o.flags&&(pe(a,""),o.flags&=-33),cs(e,ls(e),a);break;case 3:case 4:var i=o.stateNode.containerInfo;ss(e,ls(e),i);break;default:throw Error(r(161))}}catch(l){Cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ys(e,t,n){Ql=e,bs(e,t,n)}function bs(e,t,n){for(var o=0!==(1&e.mode);null!==Ql;){var a=Ql,r=a.child;if(22===a.tag&&o){var i=null!==a.memoizedState||$l;if(!i){var l=a.alternate,s=null!==l&&null!==l.memoizedState||ql;l=$l;var c=ql;if($l=i,(ql=s)&&!c)for(Ql=a;null!==Ql;)s=(i=Ql).child,22===i.tag&&null!==i.memoizedState?Ss(a):null!==s?(s.return=i,Ql=s):Ss(a);for(;null!==r;)Ql=r,bs(r,t,n),r=r.sibling;Ql=a,$l=l,ql=c}xs(e)}else 0!==(8772&a.subtreeFlags)&&null!==r?(r.return=a,Ql=r):xs(e)}}function xs(e){for(;null!==Ql;){var t=Ql;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ql||os(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!ql)if(null===n)o.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:nl(t.type,n.memoizedProps);o.componentDidUpdate(a,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wr(t,i,o);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wr(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Ht(p)}}}break;default:throw Error(r(163))}ql||512&t.flags&&as(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Ql=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ql=n;break}Ql=t.return}}function ws(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ql=n;break}Ql=t.return}}function Ss(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{os(4,t)}catch(s){Cc(t,n,s)}break;case 1:var o=t.stateNode;if("function"===typeof o.componentDidMount){var a=t.return;try{o.componentDidMount()}catch(s){Cc(t,a,s)}}var r=t.return;try{as(t)}catch(s){Cc(t,r,s)}break;case 5:var i=t.return;try{as(t)}catch(s){Cc(t,i,s)}}}catch(s){Cc(t,t.return,s)}if(t===e){Ql=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Ql=l;break}Ql=t.return}}var ks,Cs=Math.ceil,Es=x.ReactCurrentDispatcher,Ns=x.ReactCurrentOwner,js=x.ReactCurrentBatchConfig,Ps=0,Ms=null,Ts=null,_s=0,Ds=0,Rs=Ea(0),As=0,Os=null,zs=0,Fs=0,Ls=0,Is=null,Bs=null,Us=0,Hs=1/0,Vs=null,Ws=!1,Xs=null,Ys=null,Ks=!1,Gs=null,$s=0,qs=0,Zs=null,Qs=-1,Js=0;function ec(){return 0!==(6&Ps)?Ze():-1!==Qs?Qs:Qs=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ps)&&0!==_s?_s&-_s:null!==gr.transition?(0===Js&&(Js=ht()),Js):0!==(e=bt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function nc(e,t,n,o){if(50<qs)throw qs=0,Zs=null,Error(r(185));vt(e,n,o),0!==(2&Ps)&&e===Ms||(e===Ms&&(0===(2&Ps)&&(Fs|=n),4===As&&lc(e,_s)),oc(e,o),1===n&&0===Ps&&0===(1&t.mode)&&(Hs=Ze()+500,Ba&&Va()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-it(r),l=1<<i,s=a[i];-1===s?0!==(l&n)&&0===(l&o)||(a[i]=ft(l,t)):s<=t&&(e.expiredLanes|=l),r&=~l}}(e,t);var o=pt(e,e===Ms?_s:0);if(0===o)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ba=!0,Ha(e)}(sc.bind(null,e)):Ha(sc.bind(null,e)),la(function(){0===(6&Ps)&&Va()}),n=null;else{switch(xt(o)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=ot}n=Mc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Qs=-1,Js=0,0!==(6&Ps))throw Error(r(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var o=pt(e,e===Ms?_s:0);if(0===o)return null;if(0!==(30&o)||0!==(o&e.expiredLanes)||t)t=gc(e,o);else{t=o;var a=Ps;Ps|=2;var i=mc();for(Ms===e&&_s===t||(Vs=null,Hs=Ze()+500,pc(e,t));;)try{yc();break}catch(s){fc(e,s)}jr(),Es.current=i,Ps=a,null!==Ts?t=0:(Ms=null,_s=0,t=As)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(o=a,t=rc(e,a))),1===t)throw n=Os,pc(e,0),lc(e,o),oc(e,Ze()),n;if(6===t)lc(e,o);else{if(a=e.current.alternate,0===(30&o)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var o=0;o<n.length;o++){var a=n[o],r=a.getSnapshot;a=a.value;try{if(!lo(r(),a))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,o))&&(0!==(i=mt(e))&&(o=i,t=rc(e,i))),1===t))throw n=Os,pc(e,0),lc(e,o),oc(e,Ze()),n;switch(e.finishedWork=a,e.finishedLanes=o,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,Bs,Vs);break;case 3:if(lc(e,o),(130023424&o)===o&&10<(t=Us+500-Ze())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&o)!==o){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=aa(wc.bind(null,e,Bs,Vs),t);break}wc(e,Bs,Vs);break;case 4:if(lc(e,o),(4194240&o)===o)break;for(t=e.eventTimes,a=-1;0<o;){var l=31-it(o);i=1<<l,(l=t[l])>a&&(a=l),o&=~i}if(o=a,10<(o=(120>(o=Ze()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Cs(o/1960))-o)){e.timeoutHandle=aa(wc.bind(null,e,Bs,Vs),o);break}wc(e,Bs,Vs);break;default:throw Error(r(329))}}}return oc(e,Ze()),e.callbackNode===n?ac.bind(null,e):null}function rc(e,t){var n=Is;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bs,Bs=n,null!==t&&ic(t)),e}function ic(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function lc(e,t){for(t&=~Ls,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),o=1<<n;e[n]=-1,t&=~o}}function sc(e){if(0!==(6&Ps))throw Error(r(327));Sc();var t=pt(e,0);if(0===(1&t))return oc(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var o=mt(e);0!==o&&(t=o,n=rc(e,o))}if(1===n)throw n=Os,pc(e,0),lc(e,t),oc(e,Ze()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bs,Vs),oc(e,Ze()),null}function cc(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Hs=Ze()+500,Ba&&Va())}}function uc(e){null!==Gs&&0===Gs.tag&&0===(6&Ps)&&Sc();var t=Ps;Ps|=1;var n=js.transition,o=bt;try{if(js.transition=null,bt=1,e)return e()}finally{bt=o,js.transition=n,0===(6&(Ps=t))&&Va()}}function dc(){Ds=Rs.current,Na(Rs)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ra(n)),null!==Ts)for(n=Ts.return;null!==n;){var o=n;switch(nr(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Aa();break;case 3:Zr(),Na(Ta),Na(Ma),oi();break;case 5:Jr(o);break;case 4:Zr();break;case 13:case 19:Na(ei);break;case 10:Pr(o.type._context);break;case 22:case 23:dc()}n=n.return}if(Ms=e,Ts=e=Rc(e.current,null),_s=Ds=t,As=0,Os=null,Ls=Fs=zs=0,Bs=Is=null,null!==Dr){for(t=0;t<Dr.length;t++)if(null!==(o=(n=Dr[t]).interleaved)){n.interleaved=null;var a=o.next,r=n.pending;if(null!==r){var i=r.next;r.next=a,o.next=i}n.pending=o}Dr=null}return e}function fc(e,t){for(;;){var n=Ts;try{if(jr(),ai.current=Qi,ui){for(var o=li.memoizedState;null!==o;){var a=o.queue;null!==a&&(a.pending=null),o=o.next}ui=!1}if(ii=0,ci=si=li=null,di=!1,pi=0,Ns.current=null,null===n||null===n.return){As=1,Os=t,Ts=null;break}e:{var i=e,l=n.return,s=n,c=t;if(t=_s,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=s,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=gl(l);if(null!==m){m.flags&=-257,vl(m,l,s,0,t),1&m.mode&&hl(i,u,t),c=u;var h=(t=m).updateQueue;if(null===h){var g=new Set;g.add(c),t.updateQueue=g}else h.add(c);break e}if(0===(1&t)){hl(i,u,t),hc();break e}c=Error(r(426))}else if(rr&&1&s.mode){var v=gl(l);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vl(v,l,s,0,t),hr(cl(c,s));break e}}i=c=cl(c,s),4!==As&&(As=2),null===Is?Is=[i]:Is.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Hr(i,fl(0,c,t));break e;case 1:s=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ys||!Ys.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Hr(i,ml(i,s,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function mc(){var e=Es.current;return Es.current=Qi,null===e?Qi:e}function hc(){0!==As&&3!==As&&2!==As||(As=4),null===Ms||0===(268435455&zs)&&0===(268435455&Fs)||lc(Ms,_s)}function gc(e,t){var n=Ps;Ps|=2;var o=mc();for(Ms===e&&_s===t||(Vs=null,pc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(jr(),Ps=n,Es.current=o,null!==Ts)throw Error(r(261));return Ms=null,_s=0,As}function vc(){for(;null!==Ts;)bc(Ts)}function yc(){for(;null!==Ts&&!$e();)bc(Ts)}function bc(e){var t=ks(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?xc(e):Ts=t,Ns.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Kl(n,t,Ds)))return void(Ts=n)}else{if(null!==(n=Gl(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return As=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===As&&(As=5)}function wc(e,t,n){var o=bt,a=js.transition;try{js.transition=null,bt=1,function(e,t,n,o){do{Sc()}while(null!==Gs);if(0!==(6&Ps))throw Error(r(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),r=1<<a;t[a]=0,o[a]=-1,e[a]=-1,n&=~r}}(e,i),e===Ms&&(Ts=Ms=null,_s=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Mc(tt,function(){return Sc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=js.transition,js.transition=null;var l=bt;bt=1;var s=Ps;Ps|=4,Ns.current=null,function(e,t){if(ta=Wt,mo(e=fo())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var a=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var l=0,s=-1,c=-1,u=0,d=0,p=e,f=null;t:for(;;){for(var m;p!==n||0!==a&&3!==p.nodeType||(s=l+a),p!==i||0!==o&&3!==p.nodeType||(c=l+o),3===p.nodeType&&(l+=p.nodeValue.length),null!==(m=p.firstChild);)f=p,p=m;for(;;){if(p===e)break t;if(f===n&&++u===a&&(s=l),f===i&&++d===o&&(c=l),null!==(m=p.nextSibling))break;f=(p=f).parentNode}p=m}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(na={focusedElem:e,selectionRange:n},Wt=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,v=h.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:nl(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(r(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}h=ts,ts=!1}(e,n),gs(n,e),ho(na),Wt=!!ta,na=ta=null,e.current=n,ys(n,e,a),qe(),Ps=s,bt=l,js.transition=i}else e.current=n;if(Ks&&(Ks=!1,Gs=e,$s=a),i=e.pendingLanes,0===i&&(Ys=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Ze()),null!==t)for(o=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],o(a.value,{componentStack:a.stack,digest:a.digest});if(Ws)throw Ws=!1,e=Xs,Xs=null,e;0!==(1&$s)&&0!==e.tag&&Sc(),i=e.pendingLanes,0!==(1&i)?e===Zs?qs++:(qs=0,Zs=e):qs=0,Va()}(e,t,n,o)}finally{js.transition=a,bt=o}return null}function Sc(){if(null!==Gs){var e=xt($s),t=js.transition,n=bt;try{if(js.transition=null,bt=16>e?16:e,null===Gs)var o=!1;else{if(e=Gs,Gs=null,$s=0,0!==(6&Ps))throw Error(r(331));var a=Ps;for(Ps|=4,Ql=e.current;null!==Ql;){var i=Ql,l=i.child;if(0!==(16&Ql.flags)){var s=i.deletions;if(null!==s){for(var c=0;c<s.length;c++){var u=s[c];for(Ql=u;null!==Ql;){var d=Ql;switch(d.tag){case 0:case 11:case 15:ns(8,d,i)}var p=d.child;if(null!==p)p.return=d,Ql=p;else for(;null!==Ql;){var f=(d=Ql).sibling,m=d.return;if(rs(d),d===u){Ql=null;break}if(null!==f){f.return=m,Ql=f;break}Ql=m}}}var h=i.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ql=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Ql=l;else e:for(;null!==Ql;){if(0!==(2048&(i=Ql).flags))switch(i.tag){case 0:case 11:case 15:ns(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Ql=y;break e}Ql=i.return}}var b=e.current;for(Ql=b;null!==Ql;){var x=(l=Ql).child;if(0!==(2064&l.subtreeFlags)&&null!==x)x.return=l,Ql=x;else e:for(l=b;null!==Ql;){if(0!==(2048&(s=Ql).flags))try{switch(s.tag){case 0:case 11:case 15:os(9,s)}}catch(S){Cc(s,s.return,S)}if(s===l){Ql=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ql=w;break e}Ql=s.return}}if(Ps=a,Va(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(at,e)}catch(S){}o=!0}return o}finally{bt=n,js.transition=t}}return!1}function kc(e,t,n){e=Br(e,t=fl(0,t=cl(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),oc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Ys||!Ys.has(o))){t=Br(t,e=ml(t,e=cl(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),oc(t,e));break}}t=t.return}}function Ec(e,t,n){var o=e.pingCache;null!==o&&o.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(_s&n)===n&&(4===As||3===As&&(130023424&_s)===_s&&500>Ze()-Us?pc(e,0):Ls|=n),oc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Or(e,t))&&(vt(e,t,n),oc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(r(314))}null!==o&&o.delete(t),Nc(e,n)}function Mc(e,t){return Ke(e,t)}function Tc(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,o){return new Tc(e,t,n,o)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=_c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,o,a,i){var l=2;if(o=e,"function"===typeof e)Dc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case k:return Oc(n.children,a,i,t);case C:l=8,a|=8;break;case E:return(e=_c(12,n,t,2|a)).elementType=E,e.lanes=i,e;case M:return(e=_c(13,n,t,a)).elementType=M,e.lanes=i,e;case T:return(e=_c(19,n,t,a)).elementType=T,e.lanes=i,e;case R:return zc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:l=10;break e;case j:l=9;break e;case P:l=11;break e;case _:l=14;break e;case D:l=16,o=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=_c(l,n,t,a)).elementType=e,t.type=o,t.lanes=i,t}function Oc(e,t,n,o){return(e=_c(7,e,o,t)).lanes=n,e}function zc(e,t,n,o){return(e=_c(22,e,o,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=_c(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=_c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ic(e,t,n,o,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,o,a,r,i,l,s){return e=new Ic(e,t,n,l,s),1===t?(t=1,!0===r&&(t|=8)):t=0,r=_c(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fr(r),e}function Uc(e){if(!e)return Pa;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ra(n))return za(e,n,t)}return t}function Hc(e,t,n,o,a,r,i,l,s){return(e=Bc(n,o,!0,e,0,r,0,l,s)).context=Uc(null),n=e.current,(r=Ir(o=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Br(n,r,a),e.current.lanes=a,vt(e,a,o),oc(e,o),e}function Vc(e,t,n,o){var a=t.current,r=ec(),i=tc(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ir(r,i)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),null!==(e=Br(a,t,i))&&(nc(e,a,i,r),Ur(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}ks=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)bl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bl=!1,function(e,t,n){switch(t.tag){case 3:Ml(t),mr();break;case 5:Qr(t);break;case 1:Ra(t.type)&&Fa(t);break;case 4:qr(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,a=t.memoizedProps.value;ja(kr,o._currentValue),o._currentValue=a;break;case 13:if(null!==(o=t.memoizedState))return null!==o.dehydrated?(ja(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fl(e,t,n):(ja(ei,1&ei.current),null!==(e=Wl(e,t,n))?e.sibling:null);ja(ei,1&ei.current);break;case 19:if(o=0!==(n&t.childLanes),0!==(128&e.flags)){if(o)return Hl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ja(ei,ei.current),o)break;return null;case 22:case 23:return t.lanes=0,Cl(e,t,n)}return Wl(e,t,n)}(e,t,n);bl=0!==(131072&e.flags)}else bl=!1,rr&&0!==(1048576&t.flags)&&er(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Vl(e,t),e=t.pendingProps;var a=Da(t,Ma.current);Tr(t,n),a=gi(null,t,o,e,a,n);var i=vi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(o)?(i=!0,Fa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Fr(t),a.updater=al,t.stateNode=a,a._reactInternals=t,sl(t,o,e,n),t=Pl(null,t,o,!0,i,n)):(t.tag=0,rr&&i&&tr(t),xl(null,t,a,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Vl(e,t),e=t.pendingProps,o=(a=o._init)(o._payload),t.type=o,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===_)return 14}return 2}(o),e=nl(o,e),a){case 0:t=Nl(null,t,o,e,n);break e;case 1:t=jl(null,t,o,e,n);break e;case 11:t=wl(null,t,o,e,n);break e;case 14:t=Sl(null,t,o,nl(o.type,e),n);break e}throw Error(r(306,o,""))}return t;case 0:return o=t.type,a=t.pendingProps,Nl(e,t,o,a=t.elementType===o?a:nl(o,a),n);case 1:return o=t.type,a=t.pendingProps,jl(e,t,o,a=t.elementType===o?a:nl(o,a),n);case 3:e:{if(Ml(t),null===e)throw Error(r(387));o=t.pendingProps,a=(i=t.memoizedState).element,Lr(e,t),Vr(t,o,null,n);var l=t.memoizedState;if(o=l.element,i.isDehydrated){if(i={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Tl(e,t,o,n,a=cl(Error(r(423)),t));break e}if(o!==a){t=Tl(e,t,o,n,a=cl(Error(r(424)),t));break e}for(ar=ua(t.stateNode.containerInfo.firstChild),or=t,rr=!0,ir=null,n=Sr(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mr(),o===a){t=Wl(e,t,n);break e}xl(e,t,o,n)}t=t.child}return t;case 5:return Qr(t),null===e&&ur(t),o=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,l=a.children,oa(o,a)?l=null:null!==i&&oa(o,i)&&(t.flags|=32),El(e,t),xl(e,t,l,n),t.child;case 6:return null===e&&ur(t),null;case 13:return Fl(e,t,n);case 4:return qr(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=wr(t,null,o,n):xl(e,t,o,n),t.child;case 11:return o=t.type,a=t.pendingProps,wl(e,t,o,a=t.elementType===o?a:nl(o,a),n);case 7:return xl(e,t,t.pendingProps,n),t.child;case 8:case 12:return xl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ja(kr,o._currentValue),o._currentValue=l,null!==i)if(lo(i.value,l)){if(i.children===a.children&&!Ta.current){t=Wl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){l=i.child;for(var c=s.firstContext;null!==c;){if(c.context===o){if(1===i.tag){(c=Ir(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Mr(i.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(r(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Mr(l,n,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}xl(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,o=t.pendingProps.children,Tr(t,n),o=o(a=_r(a)),t.flags|=1,xl(e,t,o,n),t.child;case 14:return a=nl(o=t.type,t.pendingProps),Sl(e,t,o,a=nl(o.type,a),n);case 15:return kl(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:nl(o,a),Vl(e,t),t.tag=1,Ra(o)?(e=!0,Fa(t)):e=!1,Tr(t,n),il(t,o,a),sl(t,o,a,n),Pl(null,t,o,!0,e,n);case 19:return Hl(e,t,n);case 22:return Cl(e,t,n)}throw Error(r(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,o,a){var r=n._reactRootContainer;if(r){var i=r;if("function"===typeof a){var l=a;a=function(){var e=Wc(i);l.call(e)}}Vc(t,i,e,a)}else i=function(e,t,n,o,a){if(a){if("function"===typeof o){var r=o;o=function(){var e=Wc(i);r.call(e)}}var i=Hc(t,o,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[ha]=i.current,Vo(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof o){var l=o;o=function(){var e=Wc(s);l.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=s,e[ha]=s.current,Vo(8===e.nodeType?e.parentNode:e),uc(function(){Vc(t,s,n,o)}),s}(n,t,e,a,o);return Wc(i)}$c.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Vc(e,t,null,null)},$c.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vc(null,e,null,null)}),t[ha]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),oc(t,Ze()),0===(6&Ps)&&(Hs=Ze()+500,Va()))}break;case 13:uc(function(){var t=Or(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Yc(e,1)}},St=function(e){if(13===e.tag){var t=Or(e,134217728);if(null!==t)nc(t,e,134217728,ec());Yc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Or(e,t);if(null!==n)nc(n,e,t,ec());Yc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var a=Sa(o);if(!a)throw Error(r(90));K(o),Q(o,a)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=cc,Me=uc;var eu={usingClientEntryPoint:!1,Events:[xa,wa,Sa,Ne,je,cc]},tu={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{at=ou.inject(nu),rt=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(r(200));return function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==o?null:""+o,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(r(299));var n=!1,o="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,o,a),e[ha]=t.current,Vo(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(r(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(r(405));var o=null!=n&&n.hydratedSources||null,a=!1,i="",l=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,i,l),e[ha]=t.current,Vo(e),o)for(e=0;e<o.length;e++)a=(a=(n=o[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $c(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(r(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(r(40));return!!e._reactRootContainer&&(uc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[ha]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Zc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Jc(e,t,n,!1,o)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,o)=>(n.f[o](e,t),t),[])),n.u=e=>"static/js/"+e+".37011445.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="dynamic-fault-tree-editor:";n.l=(o,a,r,i)=>{if(e[o])e[o].push(a);else{var l,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+r){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+r),l.src=o),e[o]=[a];var p=(t,n)=>{l.onerror=l.onload=null,clearTimeout(f);var a=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach(e=>e(n)),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),n.p="/",(()=>{var e={792:0};n.f.j=(t,o)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((n,o)=>a=e[t]=[n,o]);o.push(a[2]=r);var i=n.p+n.u(t),l=new Error;n.l(i,o=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,a[1](l)}},"chunk-"+t,t)}};var t=(t,o)=>{var a,r,i=o[0],l=o[1],s=o[2],c=0;if(i.some(t=>0!==e[t])){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)s(n)}for(t&&t(o);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},o=self.webpackChunkdynamic_fault_tree_editor=self.webpackChunkdynamic_fault_tree_editor||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n(43),a=n(391);function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],p=["page"],f=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function y(){return E(function(e,t){let{pathname:n,search:o,hash:a}=e.location;return S("",{pathname:n,search:o,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:n,key:t&&t.key||o||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(t+="#"===o.charAt(0)?o:"#"+o),t}function C(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substring(o),e=e.substring(0,o)),e&&(t.pathname=e)}return t}function E(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:r=!1}=o,i=a.history,l="POP",s=null,c=d();function d(){return(i.state||{idx:null}).idx}function p(){l="POP";let e=d(),t=null==e?null:e-c;c=e,s&&s({action:l,location:m.location,delta:t})}function f(e){return N(e)}null==c&&(c=0,i.replaceState(u(u({},i.state),{},{idx:c}),""));let m={get action(){return l},get location(){return e(a,i)},listen(e){if(s)throw new Error("A history only accepts one active listener");return a.addEventListener(v,p),s=e,()=>{a.removeEventListener(v,p),s=null}},createHref:e=>t(a,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let o=S(m.location,e,t);n&&n(o,e),c=d()+1;let u=w(o,c),p=m.createHref(o);try{i.pushState(u,"",p)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(p)}r&&s&&s({action:l,location:m.location,delta:1})},replace:function(e,t){l="REPLACE";let o=S(m.location,e,t);n&&n(o,e),c=d();let a=w(o,c),u=m.createHref(o);i.replaceState(a,"",u),r&&s&&s({action:l,location:m.location,delta:0})},go:e=>i.go(e)};return m}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let o="string"===typeof e?e:k(e);return o=o.replace(/ $/,"%20"),!t&&o.startsWith("//")&&(o=n+o),new URL(o,n)}new WeakMap;function j(e,t){return P(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function P(e,t,n,o){let a=V(("string"===typeof t?C(t):t).pathname||"/",n);if(null==a)return null;let r=M(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=H(a);i=I(r[l],e,o)}return i}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,l=arguments.length>3?arguments[3]:void 0,s={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(s.relativePath.startsWith("/")){if(!s.relativePath.startsWith(o)&&i)return;b(s.relativePath.startsWith(o),'Absolute route path "'.concat(s.relativePath,'" nested under path "').concat(o,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),s.relativePath=s.relativePath.slice(o.length)}let c=G([o,s.relativePath]),u=n.concat(s);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),M(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:L(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let o of T(e.path))r(e,t,!0,o);else r(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...o]=t,a=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===o.length)return a?[r,""]:[r];let i=T(o.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),a&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}var _=/^:[\w-]+$/,D=3,R=2,A=1,O=10,z=-2,F=e=>"*"===e;function L(e,t){let n=e.split("/"),o=n.length;return n.some(F)&&(o+=z),t&&(o+=R),n.filter(e=>!F(e)).reduce((e,t)=>e+(_.test(t)?D:""===t?A:O),o)}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:o}=e,a={},r="/",i=[];for(let l=0;l<o.length;++l){let e=o[l],s=l===o.length-1,c="/"===r?t:t.slice(r.length)||"/",u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},c),d=e.route;if(!u&&s&&n&&!o[o.length-1].route.index&&(u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:G([r,u.pathname]),pathnameBase:$(G([r,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(r=G([r,u.pathnameBase]))}return i}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=U(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let r=a[0],i=r.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:o.reduce((e,t,n)=>{let{paramName:o,isOptional:a}=t;if("*"===o){let e=l[n]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const s=l[n];return e[o]=a&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:i,pattern:e}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let o=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(o.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),o]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&"/"!==o?null:e.slice(n)||"/"}function W(e,t,n,o){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(o),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function X(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Y(e){let t=X(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function K(e,t,n){let o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?o=C(e):(o=u({},e),b(!o.pathname||!o.pathname.includes("?"),W("?","pathname","search",o)),b(!o.pathname||!o.pathname.includes("#"),W("#","pathname","hash",o)),b(!o.search||!o.search.includes("#"),W("#","search","hash",o)));let r,i=""===e||""===o.pathname,l=i?"/":o.pathname;if(null==l)r=n;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}r=e>=0?t[e]:"/"}let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:o="",hash:a=""}="string"===typeof e?C(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:q(o),hash:Z(a)}}(o,r),c=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&n.endsWith("/");return s.pathname.endsWith("/")||!c&&!d||(s.pathname+="/"),s}var G=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var J=["POST","PUT","PATCH","DELETE"],ee=(new Set(J),["GET",...J]);new Set(ee),Symbol("ResetLoaderData");var te=o.createContext(null);te.displayName="DataRouter";var ne=o.createContext(null);ne.displayName="DataRouterState";var oe=o.createContext(!1);var ae=o.createContext({isTransitioning:!1});ae.displayName="ViewTransition";var re=o.createContext(new Map);re.displayName="Fetchers";var ie=o.createContext(null);ie.displayName="Await";var le=o.createContext(null);le.displayName="Navigation";var se=o.createContext(null);se.displayName="Location";var ce=o.createContext({outlet:null,matches:[],isDataRoute:!1});ce.displayName="Route";var ue=o.createContext(null);ue.displayName="RouteError";function de(){return null!=o.useContext(se)}function pe(){return b(de(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(se).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function me(e){o.useContext(le).static||o.useLayoutEffect(e)}function he(){let{isDataRoute:e}=o.useContext(ce);return e?function(){let{router:e}=Ce("useNavigate"),t=Ne("useNavigate"),n=o.useRef(!1);me(()=>{n.current=!0});let a=o.useCallback(async function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,fe),n.current&&("number"===typeof o?e.navigate(o):await e.navigate(o,u({fromRouteId:t},a)))},[e,t]);return a}():function(){b(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(te),{basename:t,navigator:n}=o.useContext(le),{matches:a}=o.useContext(ce),{pathname:r}=pe(),i=JSON.stringify(Y(a)),l=o.useRef(!1);me(()=>{l.current=!0});let s=o.useCallback(function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(l.current,fe),!l.current)return;if("number"===typeof o)return void n.go(o);let s=K(o,JSON.parse(i),r,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:G([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,i,r,e]);return s}()}o.createContext(null);function ge(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=o.useContext(ce),{pathname:a}=pe(),r=JSON.stringify(Y(n));return o.useMemo(()=>K(e,JSON.parse(r),a,"path"===t),[e,r,a,t])}function ve(e,t,n,a,r){b(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=o.useContext(le),{matches:l}=o.useContext(ce),s=l[l.length-1],c=s?s.params:{},d=s?s.pathname:"/",p=s?s.pathnameBase:"/",f=s&&s.route;{let e=f&&f.path||"";Me(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,h=pe();if(t){var g;let e="string"===typeof t?C(t):t;b("/"===p||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(p)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(p,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=h;let v=m.pathname||"/",y=v;if("/"!==p){let e=p.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=j(e,{pathname:y});x(f||null!=w,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),x(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=Se(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:G([p,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:G([p,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,a,r);return t&&S?o.createElement(se.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},S):S}function ye(){let e=je(),t=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:i},"ErrorBoundary")," or"," ",o.createElement("code",{style:i},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:r},n):null,l)}var be=o.createElement(ye,null),xe=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?o.createElement(ce.Provider,{value:this.props.routeContext},o.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function we(e){let{routeContext:t,match:n,children:a}=e,r=o.useContext(te);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(ce.Provider,{value:t},a)}function Se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=r.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let l=!1,s=-1;if(n)for(let o=0;o<r.length;o++){let e=r[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(s=o),e.route.id){let{loaderData:t,errors:o}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!o||void 0===o[e.route.id]);if(e.route.lazy||a){l=!0,r=s>=0?r.slice(0,s+1):[r[0]];break}}}return r.reduceRight((e,c,u)=>{let d,p=!1,f=null,m=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,f=c.route.errorElement||be,l&&(s<0&&0===u?(Me("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):s===u&&(p=!0,m=c.route.hydrateFallbackElement||null)));let h=t.concat(r.slice(0,u+1)),g=()=>{let t;return t=d?f:p?m:c.route.Component?o.createElement(c.route.Component,null):c.route.element?c.route.element:e,o.createElement(we,{match:c,routeContext:{outlet:e,matches:h,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?o.createElement(xe,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:h,isDataRoute:!0},unstable_onError:a}):g()},null)}function ke(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let t=o.useContext(te);return b(t,ke(e)),t}function Ee(e){let t=o.useContext(ne);return b(t,ke(e)),t}function Ne(e){let t=function(e){let t=o.useContext(ce);return b(t,ke(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function je(){var e;let t=o.useContext(ue),n=Ee("useRouteError"),a=Ne("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[a]}var Pe={};function Me(e,t,n){t||Pe[e]||(Pe[e]=!0,x(!1,n))}var Te={};function _e(e,t){e||Te[t]||(Te[t]=!0,console.warn(t))}o.memo(function(e){let{routes:t,future:n,state:o,unstable_onError:a}=e;return ve(t,void 0,o,a,n)});function De(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Re(e){let{basename:t="/",children:n=null,location:a,navigationType:r="POP",navigator:i,static:l=!1}=e;b(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),c=o.useMemo(()=>({basename:s,navigator:i,static:l,future:{}}),[s,i,l]);"string"===typeof a&&(a=C(a));let{pathname:u="/",search:d="",hash:p="",state:f=null,key:m="default"}=a,h=o.useMemo(()=>{let e=V(u,s);return null==e?null:{location:{pathname:e,search:d,hash:p,state:f,key:m},navigationType:r}},[s,u,d,p,f,m,r]);return x(null!=h,'<Router basename="'.concat(s,'"> is not able to match the URL "').concat(u).concat(d).concat(p,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==h?null:o.createElement(le.Provider,{value:c},o.createElement(se.Provider,{children:n,value:h}))}function Ae(e){let{children:t,location:n}=e;return ve(Oe(t),n)}o.Component;function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return o.Children.forEach(e,(e,a)=>{if(!o.isValidElement(e))return;let r=[...t,a];if(e.type===o.Fragment)return void n.push.apply(n,Oe(e.props.children,r));b(e.type===De,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Oe(e.props.children,r)),n.push(i)}),n}var ze="get",Fe="application/x-www-form-urlencoded";function Le(e){return null!=e&&"string"===typeof e.tagName}var Ie=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ue(e){return null==e||Be.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fe,'"')),null)}function He(e,t){let n,o,a,r,i;if(Le(l=e)&&"form"===l.tagName.toLowerCase()){let i=e.getAttribute("action");o=i?V(i,t):null,n=e.getAttribute("method")||ze,a=Ue(e.getAttribute("enctype"))||Fe,r=new FormData(e)}else if(function(e){return Le(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Le(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||i.getAttribute("action");if(o=l?V(l,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||ze,a=Ue(e.getAttribute("formenctype"))||Ue(i.getAttribute("enctype"))||Fe,r=new FormData(i,e),!function(){if(null===Ie)try{new FormData(document.createElement("form"),0),Ie=!1}catch(e){Ie=!0}return Ie}()){let{name:t,type:n,value:o}=e;if("image"===n){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,o)}}else{if(Le(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ze,o=null,a=Fe,i=e}var l;return r&&"text/plain"===a&&(i=r,r=void 0),{action:o,method:n.toLowerCase(),encType:a,formData:r,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ve(e){return{__html:e}}function We(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Xe(e,t,n){let o="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===o.pathname?o.pathname="_root.".concat(n):t&&"/"===V(o.pathname,t)?o.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):o.pathname="".concat(o.pathname.replace(/\/$/,""),".").concat(n),o}async function Ye(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ke(e){return null!=e&&"string"===typeof e.page}function Ge(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function $e(e,t,n,o,a,r){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,l=(e,t)=>{var o;return n[t].pathname!==e.pathname||(null===(o=n[t].route.path)||void 0===o?void 0:o.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter((e,t)=>i(e,t)||l(e,t)):"data"===r?t.filter((t,r)=>{let s=o.routes[t.route.id];if(!s||!s.hasLoader)return!1;if(i(t,r)||l(t,r))return!0;if(t.route.shouldRevalidate){var c;let o=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof o)return o}return!0}):[]}function qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=e.map(e=>{let o=t.routes[e.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1),[...new Set(o)];var o}function Ze(e,t){let n=new Set,o=new Set(t);return e.reduce((e,a)=>{if(t&&!Ke(a)&&"script"===a.as&&a.href&&o.has(a.href))return e;let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let o of n)t[o]=e[o];return t}(a));return n.has(r)||(n.add(r),e.push({key:r,link:a})),e},[])}function Qe(e,t){return"lazy"===e.mode&&!0===t}function Je(){let e=o.useContext(te);return We(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function et(){let e=o.useContext(ne);return We(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tt=o.createContext(void 0);function nt(){let e=o.useContext(tt);return We(e,"You must render this element inside a <HydratedRouter> element"),e}function ot(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!st)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}tt.displayName="FrameworkContext";function rt(e){let{page:t}=e,n=r(e,p),{router:a}=Je(),i=o.useMemo(()=>j(a.routes,t,a.basename),[a.routes,t,a.basename]);return i?o.createElement(lt,u({page:t,matches:i},n)):null}function it(e){let{manifest:t,routeModules:n}=nt(),[a,r]=o.useState([]);return o.useEffect(()=>{let o=!1;return async function(e,t,n){return Ze((await Promise.all(e.map(async e=>{let o=t.routes[e.route.id];if(o){let e=await Ye(o,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ge).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{o||r(e)}),()=>{o=!0}},[e,t,n]),a}function lt(e){let{page:t,matches:n}=e,a=r(e,f),i=pe(),{manifest:l,routeModules:s}=nt(),{basename:c}=Je(),{loaderData:d,matches:p}=et(),m=o.useMemo(()=>$e(t,n,p,l,i,"data"),[t,n,p,l,i]),h=o.useMemo(()=>$e(t,n,p,l,i,"assets"),[t,n,p,l,i]),g=o.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,o=!1;if(n.forEach(t=>{var n;let a=l.routes[t.route.id];a&&a.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=s[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?o=!0:e.add(t.route.id))}),0===e.size)return[];let a=Xe(t,c,"data");return o&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[c,d,i,l,m,n,t,s]),v=o.useMemo(()=>qe(h,l),[h,l]),y=it(h);return o.createElement(o.Fragment,null,g.map(e=>o.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},a))),v.map(e=>o.createElement("link",u({key:e,rel:"modulepreload",href:e},a))),y.map(e=>{let{key:t,link:n}=e;return o.createElement("link",u({key:t,nonce:a.nonce},n))}))}var st=!1;function ct(e){let{manifest:t,serverHandoffString:n,isSpaMode:a,renderMeta:i,routeDiscovery:l,ssr:s}=nt(),{router:c,static:p,staticContext:f}=Je(),{matches:m}=et(),h=o.useContext(oe),g=Qe(l,s);i&&(i.didRenderScripts=!0);let v=at(m,null,a);o.useEffect(()=>{st=!0},[]);let y=o.useMemo(()=>{var a;if(h)return null;let i=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",l=p?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,n)=>{let o="route".concat(n),a=t.routes[e.route.id];We(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:i,clientMiddlewareModule:l,hydrateFallbackModule:s,module:c}=a,u=[...r?[{module:r,varName:"".concat(o,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(o,"_clientLoader")}]:[],...l?[{module:l,varName:"".concat(o,"_clientMiddleware")}]:[],...s?[{module:s,varName:"".concat(o,"_HydrateFallback")}]:[],{module:c,varName:"".concat(o,"_main")}];return 1===u.length?"import * as ".concat(o," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(o," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,o=r(e,d),a=new Set(t.state.matches.map(e=>e.route.id)),i=t.state.location.pathname.split("/").filter(Boolean),l=["/"];for(i.pop();i.length>0;)l.push("/".concat(i.join("/"))),i.pop();l.forEach(e=>{let n=j(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let s=[...a].reduce((e,t)=>Object.assign(e,{[t]:o.routes[t]}),{});return u(u({},o),{},{routes:s,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return o.createElement(o.Fragment,null,o.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ve(i),type:void 0})),o.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ve(l),type:"module",async:!0})))},[]),b=st||h?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(qe(v,t,{includeHydrateFallback:!0}))),x="object"===typeof t.sri?t.sri:{};return _e(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),st||h?null:o.createElement(o.Fragment,null,"object"===typeof t.sri?o.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:x[t.url],suppressHydrationWarning:!0}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:x[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:x[t],suppressHydrationWarning:!0})),y)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}o.Component;function dt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let a,r=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(t))return o.createElement(pt,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return o.createElement(pt,{title:"Application Error!",isOutsideRemixApp:n},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),r)}function pt(e){var t;let{title:n,renderScripts:a,isOutsideRemixApp:r,children:i}=e,{routeModules:l}=nt();return null!==(t=l.root)&&void 0!==t&&t.Layout&&!r?i:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,n)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,a?o.createElement(ct,null):null)))}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ft&&(window.__reactRouterVersion="7.8.2")}catch(Uu){}function mt(e){let{basename:t,children:n,window:a}=e,r=o.useRef();null==r.current&&(r.current=y({window:a,v5Compat:!0}));let i=r.current,[l,s]=o.useState({action:i.action,location:i.location}),c=o.useCallback(e=>{o.startTransition(()=>s(e))},[s]);return o.useLayoutEffect(()=>i.listen(c),[i,c]),o.createElement(Re,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i})}var ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=o.forwardRef(function(e,t){let n,{onClick:a,discover:i="render",prefetch:l="none",relative:s,reloadDocument:c,replace:d,state:p,target:f,to:h,preventScrollReset:g,viewTransition:v}=e,y=r(e,m),{basename:w}=o.useContext(le),S="string"===typeof h&&ht.test(h),C=!1;if("string"===typeof h&&S&&(n=h,ft))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=V(t.pathname,w);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:C=!0}catch(Uu){x(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=o.useContext(le),{hash:r,pathname:i,search:l}=ge(e,{relative:t}),s=i;return"/"!==n&&(s="/"===i?n:G([n,i])),a.createHref({pathname:s,search:l,hash:r})}(h,{relative:s}),[N,j,P]=function(e,t){let n=o.useContext(tt),[a,r]=o.useState(!1),[i,l]=o.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:p}=t,f=o.useRef(null);o.useEffect(()=>{if("render"===e&&l(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{l(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(a){let e=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(e)}}},[a]);let m=()=>{r(!0)},h=()=>{r(!1),l(!1)};return n?"intent"!==e?[i,f,{}]:[i,f,{onFocus:ot(s,m),onBlur:ot(c,h),onMouseEnter:ot(u,m),onMouseLeave:ot(d,h),onTouchStart:ot(p,m)}]:[!1,f,{}]}(l,y),M=function(e){let{target:t,replace:n,state:a,preventScrollReset:r,relative:i,viewTransition:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=he(),c=pe(),u=ge(e,{relative:i});return o.useCallback(o=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(o,t)){o.preventDefault();let t=void 0!==n?n:k(c)===k(u);s(e,{replace:t,state:a,preventScrollReset:r,relative:i,viewTransition:l})}},[c,s,u,n,a,t,e,r,i,l])}(h,{replace:d,state:p,target:f,preventScrollReset:g,relative:s,viewTransition:v});let T=o.createElement("a",u(u(u({},y),P),{},{href:n||E,onClick:C||c?a:function(e){a&&a(e),e.defaultPrevented||M(e)},ref:ut(t,j),target:f,"data-discover":S||"render"!==i?void 0:"true"}));return N&&!S?o.createElement(o.Fragment,null,T,o.createElement(rt,{page:E})):T});gt.displayName="Link";var vt=o.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:l=!1,style:s,to:c,viewTransition:d,children:p}=e,f=r(e,h),m=ge(c,{relative:f.relative}),g=pe(),v=o.useContext(ne),{navigator:y,basename:x}=o.useContext(le),w=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.useContext(ae);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=xt("useViewTransitionState"),r=ge(e,{relative:t});if(!n.isTransitioning)return!1;let i=V(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=V(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=B(r.pathname,l)||null!=B(r.pathname,i)}(m)&&!0===d,S=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,k=g.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(k=k.toLowerCase(),C=C?C.toLowerCase():null,S=S.toLowerCase()),C&&x&&(C=V(C,x)||C);const E="/"!==S&&S.endsWith("/")?S.length-1:S.length;let N,j=k===S||!l&&k.startsWith(S)&&"/"===k.charAt(E),P=null!=C&&(C===S||!l&&C.startsWith(S)&&"/"===C.charAt(S.length)),M={isActive:j,isPending:P,isTransitioning:w},T=j?n:void 0;N="function"===typeof i?i(M):[i,j?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof s?s(M):s;return o.createElement(gt,u(u({},f),{},{"aria-current":T,className:N,ref:t,style:_,to:c,viewTransition:d}),"function"===typeof p?p(M):p)});vt.displayName="NavLink";var yt=o.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:a,navigate:i,reloadDocument:l,replace:s,state:c,method:d=ze,action:p,onSubmit:f,relative:m,preventScrollReset:h,viewTransition:v}=e,y=r(e,g),x=kt(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=o.useContext(le),a=o.useContext(ce);b(a,"useFormAction must be used inside a RouteContext");let[r]=a.matches.slice(-1),i=u({},ge(e||".",{relative:t})),l=pe();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?"?".concat(n):""}}e&&"."!==e||!r.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:G([n,i.pathname]));return k(i)}(p,{relative:m}),S="get"===d.toLowerCase()?"get":"post",C="string"===typeof p&&ht.test(p);return o.createElement("form",u(u({ref:t,method:S,action:w,onSubmit:l?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;x(t||e.currentTarget,{fetcherKey:a,method:n,navigate:i,replace:s,state:c,relative:m,preventScrollReset:h,viewTransition:v})}},y),{},{"data-discover":C||"render"!==n?void 0:"true"}))});function bt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xt(e){let t=o.useContext(te);return b(t,bt(e)),t}yt.displayName="Form";var wt=0,St=()=>"__".concat(String(++wt),"__");function kt(){let{router:e}=xt("useSubmit"),{basename:t}=o.useContext(le),n=Ne("useRouteId");return o.useCallback(async function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:r,method:i,encType:l,formData:s,body:c}=He(o,t);if(!1===a.navigate){let t=a.fetcherKey||St();await e.fetch(t,n,a.action||r,{preventScrollReset:a.preventScrollReset,formData:s,body:c,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||r,{preventScrollReset:a.preventScrollReset,formData:s,body:c,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}const Ct={openai:{provider:"openai",apiKey:"",model:"gpt-4o-mini",baseUrl:"https://api.openai.com/v1",temperature:.7,maxTokens:1e3,enabled:!1},anthropic:{provider:"anthropic",apiKey:"",model:"claude-3-haiku-20240307",baseUrl:"https://api.anthropic.com",temperature:.7,maxTokens:1e3,enabled:!1},gemini:{provider:"gemini",apiKey:"AIzaSyBAepcPPBOSXVSgf7gVG1J0CADoUYVn1e0",model:"gemini-1.5-flash",baseUrl:"https://generativelanguage.googleapis.com",temperature:.7,maxTokens:1e3,enabled:!1},grok:{provider:"grok",apiKey:"",model:"grok-beta",baseUrl:"https://api.x.ai/v1",temperature:.7,maxTokens:1e3,enabled:!1},local:{provider:"local",apiKey:"",model:"local-model",baseUrl:"http://localhost:11434",temperature:.7,maxTokens:1e3,enabled:!0}},Et=()=>{try{const e=localStorage.getItem("llm-config");if(e){const t=JSON.parse(e);return u(u({},Ct),t)}}catch(e){console.warn("Errore nel caricamento configurazione LLM:",e)}return Ct},Nt=e=>{try{localStorage.setItem("llm-config",JSON.stringify(e))}catch(t){console.error("Errore nel salvataggio configurazione LLM:",t)}},jt=e=>{const t=[];return e.apiKey||"local"===e.provider||t.push("API Key richiesta per ".concat(e.provider)),e.model||t.push("Modello richiesto per ".concat(e.provider)),e.temperature&&(e.temperature<0||e.temperature>2)&&t.push("Temperatura deve essere tra 0 e 2 per ".concat(e.provider)),e.maxTokens&&e.maxTokens<1&&t.push("Max tokens deve essere maggiore di 0 per ".concat(e.provider)),t};var Pt=n(579);const Mt=(0,o.createContext)(void 0),Tt=()=>{const e=(0,o.useContext)(Mt);if(void 0===e)throw new Error("useLLMConfig must be used within a LLMProvider");return e},_t=e=>{let{children:t}=e;const[n,a]=(0,o.useState)(Et()),[r,i]=(0,o.useState)(!1),l={llmConfig:n,updateLLMConfig:(0,o.useCallback)(e=>{a(e),Nt(e)},[]),showLLMConfigModal:r,setShowLLMConfigModal:i};return(0,Pt.jsx)(Mt.Provider,{value:l,children:t})},Dt=()=>{const e=he(),[t,n]=(0,o.useState)(""),[a,r]=(0,o.useState)("");return(0,Pt.jsx)("div",{className:"main-page",children:(0,Pt.jsx)("div",{className:"login-container",children:(0,Pt.jsxs)("div",{className:"login-form",children:[(0,Pt.jsx)("h1",{children:"SHIFTAI"}),(0,Pt.jsx)("h2",{children:"Dynamic Fault Tree & Markov Chain Editor"}),(0,Pt.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e("/fault-tree-editor")},children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,Pt.jsx)("input",{type:"text",id:"username",value:t,onChange:e=>n(e.target.value),placeholder:"Enter your username",required:!0})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,Pt.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>r(e.target.value),placeholder:"Enter your password",required:!0})]}),(0,Pt.jsx)("button",{type:"submit",className:"login-button",children:"Login"})]}),(0,Pt.jsxs)("div",{className:"modeling-options",children:[(0,Pt.jsx)("h3",{children:"Available Modeling Tools:"}),(0,Pt.jsxs)("div",{className:"tool-cards",children:[(0,Pt.jsxs)("div",{className:"tool-card",children:[(0,Pt.jsx)("h4",{children:"Fault Tree Editor"}),(0,Pt.jsx)("p",{children:"Create and analyze dynamic fault trees with static and dynamic gates"})]}),(0,Pt.jsxs)("div",{className:"tool-card",children:[(0,Pt.jsx)("h4",{children:"Markov Chain Editor"}),(0,Pt.jsx)("p",{children:"Model and analyze Markov chains with states and transitions"})]})]})]})]})})})},Rt=e=>{let{onSave:t,onOpenWithFileSystem:n,onExportCode:a,onShowSaveModal:r,onExportXML:i,onExportCSV:l,onExportMatlab:s,onShowLLMConfig:c,onShowSHyFTA:u,onShowMSolver:d,isDarkMode:p,onToggleDarkMode:f,onNewModel:m,openedFile:h,currentEditor:g,onNavigateToFaultTree:v,onNavigateToMarkov:y,onLogout:b}=e;const[x,w]=(0,o.useState)(!1);return(0,Pt.jsxs)("div",{className:"menu-bar ".concat(p?"dark-mode":""),children:[(0,Pt.jsxs)("div",{className:"menu-section",children:[(0,Pt.jsxs)("div",{className:"editor-navigation",children:[(0,Pt.jsx)("button",{className:"editor-nav-button ".concat("fault-tree"===g?"active":""),onClick:v,children:"\ud83c\udf33 Fault Tree Editor"}),(0,Pt.jsx)("button",{className:"editor-nav-button ".concat("markov-chain"===g?"active":""),onClick:y,children:"\ud83d\udd17 Markov Chain Editor"})]}),h&&(0,Pt.jsx)("div",{className:"file-info",children:(0,Pt.jsxs)("span",{children:["\ud83d\udcc1 File aperto: ",h.filename]})})]}),(0,Pt.jsxs)("div",{className:"menu-section",children:[(0,Pt.jsxs)("div",{className:"menu-dropdown",children:[(0,Pt.jsxs)("button",{className:"menu-button dropdown-toggle",onClick:()=>w(!x),children:["\ud83d\udcc1 File ",x?"\u25bc":"\u25b6"]}),x&&(0,Pt.jsxs)("div",{className:"dropdown-menu",children:[(0,Pt.jsx)("button",{className:"dropdown-item",onClick:m,children:"\ud83c\udd95 Nuovo"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:n,children:"\ud83d\udcc2 Apri File (.json)"}),(0,Pt.jsx)("div",{className:"dropdown-divider"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:()=>{t(),w(!1)},children:"\ud83d\udcbe Salvataggio Rapido (JSON)"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:()=>{r(),w(!1)},children:"\ud83d\udcbe Salva Come... (Nuovo File)"}),(0,Pt.jsx)("div",{className:"dropdown-divider"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:i,children:"\ud83d\udcc4 Esporta XML"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:l,children:"\ud83d\udcca Esporta CSV"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:s,children:"\ud83e\uddee Esporta MATLAB"}),(0,Pt.jsx)("div",{className:"dropdown-divider"}),(0,Pt.jsx)("button",{className:"dropdown-item",onClick:a,children:"\ud83d\udd27 Esporta Codice"})]})]}),(0,Pt.jsx)("button",{className:"menu-button",onClick:n,children:"\ud83d\udd13 Apri"}),(0,Pt.jsxs)("button",{className:"menu-button primary",onClick:t,children:["\ud83d\udcbe Salva ",null!==h&&void 0!==h&&h.fileHandle?"(Sovrascrivi)":"(Nuovo File)"]}),(0,Pt.jsx)("button",{className:"menu-button config",onClick:c,children:"\u2699\ufe0f LLM"}),(0,Pt.jsxs)("button",{className:"menu-button dark-toggle",onClick:f,children:[p?"\u2600\ufe0f":"\ud83c\udf19"," ",p?"Light":"Dark"]}),(0,Pt.jsx)("button",{className:"menu-button shyfta ".concat("fault-tree"!==g?"disabled":""),onClick:"fault-tree"===g?u:void 0,disabled:"fault-tree"!==g,children:"\ud83d\udd2c SHyFTA"}),(0,Pt.jsx)("button",{className:"menu-button msolver ".concat("markov-chain"!==g?"disabled":""),onClick:"markov-chain"===g?d:void 0,disabled:"markov-chain"!==g,children:"\ud83d\udcca MSolver"}),(0,Pt.jsx)("button",{className:"menu-button logout",onClick:b,children:"\ud83d\udeaa Logout"})]})]})},At=e=>{let{onAddBaseEvent:t,onAddGate:n,clickToPlaceMode:o,onToggleClickToPlace:a,componentToPlace:r,missionTime:i,onMissionTimeChange:l,isDarkMode:s,isCollapsed:c,onToggleCollapse:u}=e;return(0,Pt.jsxs)("div",{className:"left-panel ".concat(s?"dark-mode":""," ").concat(c?"collapsed":""),children:[(0,Pt.jsx)("div",{className:"panel-header",children:(0,Pt.jsxs)("div",{className:"header-content",children:[(0,Pt.jsx)("h3",{children:"\ud83d\udd27 Componenti"}),(0,Pt.jsx)("button",{className:"collapse-toggle",onClick:u,title:c?"Mostra pannello":"Nascondi pannello",children:c?"\u25b6":"\u25c0"})]})}),!c&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"component-section",children:[(0,Pt.jsx)("h4",{children:"\u23f1\ufe0f Parametri Analisi"}),(0,Pt.jsxs)("div",{className:"mission-time-group",children:[(0,Pt.jsx)("label",{htmlFor:"mission-time",children:"Tempo di Missione (Tm) [h]:"}),(0,Pt.jsx)("input",{id:"mission-time",type:"number",value:i,onChange:e=>l(Number(e.target.value)||0),placeholder:"500",min:"0",step:"0.1",className:"mission-time-input"})]}),(0,Pt.jsxs)("div",{className:"placement-mode-toggle",children:[(0,Pt.jsxs)("label",{className:"toggle-container",children:[(0,Pt.jsx)("span",{className:"toggle-label",children:o?"\ud83d\udccd Click to Place":"\ud83c\udfaf Instant Add"}),(0,Pt.jsxs)("div",{className:"toggle-switch",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:o,onChange:a}),(0,Pt.jsx)("span",{className:"toggle-slider"})]})]}),r&&(0,Pt.jsxs)("div",{className:"component-selected",children:[(0,Pt.jsx)("span",{children:"\ud83c\udfaf Selezionato: "}),(0,Pt.jsx)("strong",{children:"event"===r.type?"Evento Base":"Porta ".concat(r.gateType)}),(0,Pt.jsx)("br",{}),(0,Pt.jsx)("small",{children:"Clicca sul diagramma per posizionare (rimane selezionato)"})]})]})]}),(0,Pt.jsxs)("div",{className:"component-section",children:[(0,Pt.jsx)("h4",{children:"Eventi Base"}),(0,Pt.jsxs)("button",{className:"component-button event-button ".concat("event"===(null===r||void 0===r?void 0:r.type)?"selected":""),onClick:t,title:o?"Seleziona per posizionamento":"Aggiungi Evento Base",children:[(0,Pt.jsx)("div",{className:"component-icon",children:"\u2b1c"}),(0,Pt.jsx)("div",{className:"component-label",children:"Evento Base"}),"event"===(null===r||void 0===r?void 0:r.type)&&(0,Pt.jsx)("div",{className:"selection-indicator",children:"\u2713"})]})]}),(0,Pt.jsxs)("div",{className:"component-section",children:[(0,Pt.jsx)("h4",{children:"Porte Logiche"}),(0,Pt.jsx)("div",{className:"gates-grid",children:[{type:"AND",label:"AND",description:"Porta AND - Tutti gli input devono verificarsi",icon:"\u2227"},{type:"OR",label:"OR",description:"Porta OR - Almeno un input deve verificarsi",icon:"\u2228"},{type:"PAND",label:"PAND",description:"Porta AND Prioritaria - Input in sequenza specifica",icon:"\u2295"},{type:"SPARE",label:"SPARE",description:"Porta SPARE - Ridondanza con spare",icon:"\u27f2"},{type:"SEQ",label:"SEQ",description:"Porta Sequenziale - Input in ordine temporale",icon:"\u2192"},{type:"FDEP",label:"FDEP",description:"Dipendenza Funzionale",icon:"\u27f9"}].map(e=>(0,Pt.jsxs)("button",{className:"component-button gate-button ".concat("gate"===(null===r||void 0===r?void 0:r.type)&&(null===r||void 0===r?void 0:r.gateType)===e.type?"selected":""),onClick:()=>n(e.type),title:o?"Seleziona ".concat(e.label," per posizionamento"):e.description,children:[(0,Pt.jsx)("div",{className:"component-icon",children:e.icon}),(0,Pt.jsx)("div",{className:"component-label",children:e.label}),"gate"===(null===r||void 0===r?void 0:r.type)&&(null===r||void 0===r?void 0:r.gateType)===e.type&&(0,Pt.jsx)("div",{className:"selection-indicator",children:"\u2713"})]},e.type))})]}),(0,Pt.jsxs)("div",{className:"component-section",children:[(0,Pt.jsx)("h4",{children:"Istruzioni"}),(0,Pt.jsxs)("div",{className:"instructions",children:[o?(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("p",{children:["\ud83d\udccd ",(0,Pt.jsx)("strong",{children:"Modalit\xe0 Click-to-Place:"})]}),(0,Pt.jsx)("p",{children:"\u2022 Clicca un componente per selezionarlo"}),(0,Pt.jsx)("p",{children:"\u2022 Clicca sul diagramma per posizionarlo (centrato)"}),(0,Pt.jsx)("p",{children:"\u2022 Il componente rimane selezionato per pi\xf9 posizionamenti"}),(0,Pt.jsx)("p",{children:"\u2022 Disattiva la modalit\xe0 per deselezionare"})]}):(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("p",{children:["\ud83c\udfaf ",(0,Pt.jsx)("strong",{children:"Modalit\xe0 Instant Add:"})]}),(0,Pt.jsx)("p",{children:"\u2022 Clicca sui componenti per aggiungerli subito"}),(0,Pt.jsx)("p",{children:"\u2022 Posizione casuale automatica"}),(0,Pt.jsx)("p",{children:"\u2022 Trascina per riposizionare"})]}),(0,Pt.jsx)("p",{children:"\u2022 Clicca su un componente per modificarne i parametri"}),(0,Pt.jsx)("p",{children:"\u2022 Collega gli elementi alle porte trascinando"})]})]})]})]})};function Ot(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=Ot(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var zt=n(443);const Ft=e=>{let t;const n=new Set,o=(e,o)=>{const a="function"===typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=o?o:"object"!==typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,r={setState:o,getState:a,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(o,a,r);return r},Lt=e=>e?Ft(e):Ft;const{useDebugValue:It}=o,{useSyncExternalStoreWithSelector:Bt}=zt,Ut=e=>e;function Ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut,n=arguments.length>2?arguments[2]:void 0;const o=Bt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return It(o),o}const Vt=(e,t)=>{const n=Lt(e),o=function(e){return Ht(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(o,n),o};function Wt(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Xt={value:()=>{}};function Yt(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new Kt(o)}function Kt(e){this._=e}function Gt(e,t){for(var n,o=0,a=e.length;o<a;++o)if((n=e[o]).name===t)return n.value}function $t(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=Xt,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}Kt.prototype=Yt.prototype={constructor:Kt,on:function(e,t){var n,o,a=this._,r=(o=a,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),i=-1,l=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<l;)if(n=(e=r[i]).type)a[n]=$t(a[n],e.name,t);else if(null==t)for(n in a)a[n]=$t(a[n],e.name,null);return this}for(;++i<l;)if((n=(e=r[i]).type)&&(n=Gt(a[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kt(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,a=new Array(n),r=0;r<n;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,n=(o=this._[e]).length;r<n;++r)o[r].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,r=o.length;a<r;++a)o[a].value.apply(t,n)}};const qt=Yt;function Zt(){}function Qt(e){return null==e?Zt:function(){return this.querySelector(e)}}function Jt(){return[]}function en(e){return null==e?Jt:function(){return this.querySelectorAll(e)}}function tn(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function nn(e){return function(){return this.matches(e)}}function on(e){return function(t){return t.matches(e)}}var an=Array.prototype.find;function rn(){return this.firstElementChild}var ln=Array.prototype.filter;function sn(){return Array.from(this.children)}function cn(e){return new Array(e.length)}function un(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function dn(e,t,n,o,a,r){for(var i,l=0,s=t.length,c=r.length;l<c;++l)(i=t[l])?(i.__data__=r[l],o[l]=i):n[l]=new un(e,r[l]);for(;l<s;++l)(i=t[l])&&(a[l]=i)}function pn(e,t,n,o,a,r,i){var l,s,c,u=new Map,d=t.length,p=r.length,f=new Array(d);for(l=0;l<d;++l)(s=t[l])&&(f[l]=c=i.call(s,s.__data__,l,t)+"",u.has(c)?a[l]=s:u.set(c,s));for(l=0;l<p;++l)c=i.call(e,r[l],l,r)+"",(s=u.get(c))?(o[l]=s,s.__data__=r[l],u.delete(c)):n[l]=new un(e,r[l]);for(l=0;l<d;++l)(s=t[l])&&u.get(f[l])===s&&(a[l]=s)}function fn(e){return e.__data__}function mn(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function hn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}un.prototype={constructor:un,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var gn="http://www.w3.org/1999/xhtml";const vn={svg:"http://www.w3.org/2000/svg",xhtml:gn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yn(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),vn.hasOwnProperty(t)?{space:vn[t],local:e}:e}function bn(e){return function(){this.removeAttribute(e)}}function xn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wn(e,t){return function(){this.setAttribute(e,t)}}function Sn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Cn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function En(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nn(e){return function(){this.style.removeProperty(e)}}function jn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pn(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Mn(e,t){return e.style.getPropertyValue(t)||En(e).getComputedStyle(e,null).getPropertyValue(t)}function Tn(e){return function(){delete this[e]}}function _n(e,t){return function(){this[e]=t}}function Dn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Rn(e){return e.trim().split(/^|\s+/)}function An(e){return e.classList||new On(e)}function On(e){this._node=e,this._names=Rn(e.getAttribute("class")||"")}function zn(e,t){for(var n=An(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Fn(e,t){for(var n=An(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function Ln(e){return function(){zn(this,e)}}function In(e){return function(){Fn(this,e)}}function Bn(e,t){return function(){(t.apply(this,arguments)?zn:Fn)(this,e)}}function Un(){this.textContent=""}function Hn(e){return function(){this.textContent=e}}function Vn(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Wn(){this.innerHTML=""}function Xn(e){return function(){this.innerHTML=e}}function Yn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Kn(){this.nextSibling&&this.parentNode.appendChild(this)}function Gn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $n(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gn&&t.documentElement.namespaceURI===gn?t.createElement(e):t.createElementNS(n,e)}}function qn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zn(e){var t=yn(e);return(t.local?qn:$n)(t)}function Qn(){return null}function Jn(){var e=this.parentNode;e&&e.removeChild(this)}function eo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function to(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function no(e){return function(){var t=this.__on;if(t){for(var n,o=0,a=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function oo(e,t,n){return function(){var o,a=this.__on,r=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var i=0,l=a.length;i<l;++i)if((o=a[i]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},a?a.push(o):this.__on=[o]}}function ao(e,t,n){var o=En(e),a=o.CustomEvent;"function"===typeof a?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function ro(e,t){return function(){return ao(this,e,t)}}function io(e,t){return function(){return ao(this,e,t.apply(this,arguments))}}On.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var lo=[null];function so(e,t){this._groups=e,this._parents=t}function co(){return new so([[document.documentElement]],lo)}so.prototype=co.prototype={constructor:so,select:function(e){"function"!==typeof e&&(e=Qt(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var r,i,l=t[a],s=l.length,c=o[a]=new Array(s),u=0;u<s;++u)(r=l[u])&&(i=e.call(r,r.__data__,u,l))&&("__data__"in r&&(i.__data__=r.__data__),c[u]=i);return new so(o,this._parents)},selectAll:function(e){e="function"===typeof e?tn(e):en(e);for(var t=this._groups,n=t.length,o=[],a=[],r=0;r<n;++r)for(var i,l=t[r],s=l.length,c=0;c<s;++c)(i=l[c])&&(o.push(e.call(i,i.__data__,c,l)),a.push(i));return new so(o,a)},selectChild:function(e){return this.select(null==e?rn:function(e){return function(){return an.call(this.children,e)}}("function"===typeof e?e:on(e)))},selectChildren:function(e){return this.selectAll(null==e?sn:function(e){return function(){return ln.call(this.children,e)}}("function"===typeof e?e:on(e)))},filter:function(e){"function"!==typeof e&&(e=nn(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var r,i=t[a],l=i.length,s=o[a]=[],c=0;c<l;++c)(r=i[c])&&e.call(r,r.__data__,c,i)&&s.push(r);return new so(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,fn);var n,o=t?pn:dn,a=this._parents,r=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var i=r.length,l=new Array(i),s=new Array(i),c=new Array(i),u=0;u<i;++u){var d=a[u],p=r[u],f=p.length,m=mn(e.call(d,d&&d.__data__,u,a)),h=m.length,g=s[u]=new Array(h),v=l[u]=new Array(h);o(d,p,g,v,c[u]=new Array(f),m,t);for(var y,b,x=0,w=0;x<h;++x)if(y=g[x]){for(x>=w&&(w=x+1);!(b=v[w])&&++w<h;);y._next=b||null}}return(l=new so(l,a))._enter=s,l._exit=c,l},enter:function(){return new so(this._enter||this._groups.map(cn),this._parents)},exit:function(){return new so(this._exit||this._groups.map(cn),this._parents)},join:function(e,t,n){var o=this.enter(),a=this,r=this.exit();return"function"===typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?r.remove():n(r),o&&a?o.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,r=o.length,i=Math.min(a,r),l=new Array(a),s=0;s<i;++s)for(var c,u=n[s],d=o[s],p=u.length,f=l[s]=new Array(p),m=0;m<p;++m)(c=u[m]||d[m])&&(f[m]=c);for(;s<a;++s)l[s]=n[s];return new so(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,a=e[t],r=a.length-1,i=a[r];--r>=0;)(o=a[r])&&(i&&4^o.compareDocumentPosition(i)&&i.parentNode.insertBefore(o,i),i=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=hn);for(var n=this._groups,o=n.length,a=new Array(o),r=0;r<o;++r){for(var i,l=n[r],s=l.length,c=a[r]=new Array(s),u=0;u<s;++u)(i=l[u])&&(c[u]=i);c.sort(t)}return new so(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,r=o.length;a<r;++a){var i=o[a];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a,r=t[n],i=0,l=r.length;i<l;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this},attr:function(e,t){var n=yn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?xn:bn:"function"===typeof t?n.local?Cn:kn:n.local?Sn:wn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Nn:"function"===typeof t?Pn:jn)(e,t,null==n?"":n)):Mn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Tn:"function"===typeof t?Dn:_n)(e,t)):this.node()[e]},classed:function(e,t){var n=Rn(e+"");if(arguments.length<2){for(var o=An(this.node()),a=-1,r=n.length;++a<r;)if(!o.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?Bn:t?Ln:In)(n,t))},text:function(e){return arguments.length?this.each(null==e?Un:("function"===typeof e?Vn:Hn)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Wn:("function"===typeof e?Yn:Xn)(e)):this.node().innerHTML},raise:function(){return this.each(Kn)},lower:function(){return this.each(Gn)},append:function(e){var t="function"===typeof e?e:Zn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"===typeof e?e:Zn(e),o=null==t?Qn:"function"===typeof t?t:Qt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function(){return this.each(Jn)},clone:function(e){return this.select(e?to:eo)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,a,r=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),i=r.length;if(!(arguments.length<2)){for(l=t?oo:no,o=0;o<i;++o)this.each(l(r[o],t,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(o=0,s=l[c];o<i;++o)if((a=r[o]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?io:ro)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,a=e[t],r=0,i=a.length;r<i;++r)(o=a[r])&&(yield o)}};const uo=co;function po(e){return"string"===typeof e?new so([[document.querySelector(e)]],[document.documentElement]):new so([[e]],lo)}const fo={passive:!1},mo={capture:!0,passive:!1};function ho(e){e.stopImmediatePropagation()}function go(e){e.preventDefault(),e.stopImmediatePropagation()}function vo(e){var t=e.document.documentElement,n=po(e).on("dragstart.drag",go,mo);"onselectstart"in t?n.on("selectstart.drag",go,mo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yo(e,t){var n=e.document.documentElement,o=po(e).on("dragstart.drag",null);t&&(o.on("click.drag",go,mo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function bo(e){return((e=Math.exp(e))+1/e)/2}const xo=function e(t,n,o){function a(e,a){var r,i,l=e[0],s=e[1],c=e[2],u=a[0],d=a[1],p=a[2],f=u-l,m=d-s,h=f*f+m*m;if(h<1e-12)i=Math.log(p/c)/t,r=function(e){return[l+e*f,s+e*m,c*Math.exp(t*e*i)]};else{var g=Math.sqrt(h),v=(p*p-c*c+o*h)/(2*c*n*g),y=(p*p-c*c-o*h)/(2*p*n*g),b=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(y*y+1)-y);i=(x-b)/t,r=function(e){var o,a=e*i,r=bo(b),u=c/(n*g)*(r*(o=t*a+b,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[l+u*f,s+u*m,c*r/bo(t*a+b)]}}return r.duration=1e3*i*t/Math.SQRT2,r}return a.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},a}(Math.SQRT2,2,4);function wo(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}var So,ko,Co=0,Eo=0,No=0,jo=0,Po=0,Mo=0,To="object"===typeof performance&&performance.now?performance:Date,_o="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Do(){return Po||(_o(Ro),Po=To.now()+Mo)}function Ro(){Po=0}function Ao(){this._call=this._time=this._next=null}function Oo(e,t,n){var o=new Ao;return o.restart(e,t,n),o}function zo(){Po=(jo=To.now())+Mo,Co=Eo=0;try{!function(){Do(),++Co;for(var e,t=So;t;)(e=Po-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Co}()}finally{Co=0,function(){var e,t,n=So,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:So=t);ko=e,Lo(o)}(),Po=0}}function Fo(){var e=To.now(),t=e-jo;t>1e3&&(Mo-=t,jo=e)}function Lo(e){Co||(Eo&&(Eo=clearTimeout(Eo)),e-Po>24?(e<1/0&&(Eo=setTimeout(zo,e-To.now()-Mo)),No&&(No=clearInterval(No))):(No||(jo=To.now(),No=setInterval(Fo,1e3)),Co=1,_o(zo)))}function Io(e,t,n){var o=new Ao;return t=null==t?0:+t,o.restart(n=>{o.stop(),e(n+t)},t,n),o}Ao.prototype=Oo.prototype={constructor:Ao,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Do():+n)+(null==t?0:+t),this._next||ko===this||(ko?ko._next=this:So=this,ko=this),this._call=e,this._time=n,Lo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lo())}};var Bo=qt("start","end","cancel","interrupt"),Uo=[];function Ho(e,t,n,o,a,r){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var o,a=e.__transition;function r(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(r){var c,u,d,p;if(1!==n.state)return s();for(c in a)if((p=a[c]).name===n.name){if(3===p.state)return Io(i);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete a[c]):+c<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete a[c])}if(Io(function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(r))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=p);o.length=u+1}}function l(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),r=-1,i=o.length;++r<i;)o[r].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var o in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Oo(r,0,n.time)}(e,n,{name:t,index:o,group:a,on:Bo,tween:Uo,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function Vo(e,t){var n=Xo(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Wo(e,t){var n=Xo(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Xo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yo(e,t){var n,o,a,r=e.__transition,i=!0;if(r){for(a in t=null==t?null:t+"",r)(n=r[a]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]):i=!1;i&&delete e.__transition}}function Ko(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Go,$o=180/Math.PI,qo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zo(e,t,n,o,a,r){var i,l,s;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,i=-i),{translateX:a,translateY:r,rotate:Math.atan2(t,e)*$o,skewX:Math.atan(s)*$o,scaleX:i,scaleY:l}}function Qo(e,t,n,o){function a(e){return e.length?e.pop()+" ":""}return function(r,i){var l=[],s=[];return r=e(r),i=e(i),function(e,o,a,r,i,l){if(e!==a||o!==r){var s=i.push("translate(",null,t,null,n);l.push({i:s-4,x:Ko(e,a)},{i:s-2,x:Ko(o,r)})}else(a||r)&&i.push("translate("+a+t+r+n)}(r.translateX,r.translateY,i.translateX,i.translateY,l,s),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(a(n)+"rotate(",null,o)-2,x:Ko(e,t)})):t&&n.push(a(n)+"rotate("+t+o)}(r.rotate,i.rotate,l,s),function(e,t,n,r){e!==t?r.push({i:n.push(a(n)+"skewX(",null,o)-2,x:Ko(e,t)}):t&&n.push(a(n)+"skewX("+t+o)}(r.skewX,i.skewX,l,s),function(e,t,n,o,r,i){if(e!==n||t!==o){var l=r.push(a(r)+"scale(",null,",",null,")");i.push({i:l-4,x:Ko(e,n)},{i:l-2,x:Ko(t,o)})}else 1===n&&1===o||r.push(a(r)+"scale("+n+","+o+")")}(r.scaleX,r.scaleY,i.scaleX,i.scaleY,l,s),r=i=null,function(e){for(var t,n=-1,o=s.length;++n<o;)l[(t=s[n]).i]=t.x(e);return l.join("")}}}var Jo=Qo(function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qo:Zo(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),ea=Qo(function(e){return null==e?qo:(Go||(Go=document.createElementNS("http://www.w3.org/2000/svg","g")),Go.setAttribute("transform",e),(e=Go.transform.baseVal.consolidate())?Zo((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):qo)},", ",")",")");function ta(e,t){var n,o;return function(){var a=Wo(this,e),r=a.tween;if(r!==n)for(var i=0,l=(o=n=r).length;i<l;++i)if(o[i].name===t){(o=o.slice()).splice(i,1);break}a.tween=o}}function na(e,t,n){var o,a;if("function"!==typeof n)throw new Error;return function(){var r=Wo(this,e),i=r.tween;if(i!==o){a=(o=i).slice();for(var l={name:t,value:n},s=0,c=a.length;s<c;++s)if(a[s].name===t){a[s]=l;break}s===c&&a.push(l)}r.tween=a}}function oa(e,t,n){var o=e._id;return e.each(function(){var e=Wo(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Xo(e,o).value[t]}}function aa(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ra(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ia(){}var la=.7,sa=1/la,ca="\\s*([+-]?\\d+)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pa=/^#([0-9a-f]{3,8})$/,fa=new RegExp("^rgb\\(".concat(ca,",").concat(ca,",").concat(ca,"\\)$")),ma=new RegExp("^rgb\\(".concat(da,",").concat(da,",").concat(da,"\\)$")),ha=new RegExp("^rgba\\(".concat(ca,",").concat(ca,",").concat(ca,",").concat(ua,"\\)$")),ga=new RegExp("^rgba\\(".concat(da,",").concat(da,",").concat(da,",").concat(ua,"\\)$")),va=new RegExp("^hsl\\(".concat(ua,",").concat(da,",").concat(da,"\\)$")),ya=new RegExp("^hsla\\(".concat(ua,",").concat(da,",").concat(da,",").concat(ua,"\\)$")),ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xa(){return this.rgb().formatHex()}function wa(){return this.rgb().formatRgb()}function Sa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ka(t):3===n?new Na(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ca(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ca(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=fa.exec(e))?new Na(t[1],t[2],t[3],1):(t=ma.exec(e))?new Na(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ha.exec(e))?Ca(t[1],t[2],t[3],t[4]):(t=ga.exec(e))?Ca(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=va.exec(e))?Da(t[1],t[2]/100,t[3]/100,1):(t=ya.exec(e))?Da(t[1],t[2]/100,t[3]/100,t[4]):ba.hasOwnProperty(e)?ka(ba[e]):"transparent"===e?new Na(NaN,NaN,NaN,0):null}function ka(e){return new Na(e>>16&255,e>>8&255,255&e,1)}function Ca(e,t,n,o){return o<=0&&(e=t=n=NaN),new Na(e,t,n,o)}function Ea(e,t,n,o){return 1===arguments.length?((a=e)instanceof ia||(a=Sa(a)),a?new Na((a=a.rgb()).r,a.g,a.b,a.opacity):new Na):new Na(e,t,n,null==o?1:o);var a}function Na(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function ja(){return"#".concat(_a(this.r)).concat(_a(this.g)).concat(_a(this.b))}function Pa(){const e=Ma(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Ta(this.r),", ").concat(Ta(this.g),", ").concat(Ta(this.b)).concat(1===e?")":", ".concat(e,")"))}function Ma(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ta(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _a(e){return((e=Ta(e))<16?"0":"")+e.toString(16)}function Da(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Aa(e,t,n,o)}function Ra(e){if(e instanceof Aa)return new Aa(e.h,e.s,e.l,e.opacity);if(e instanceof ia||(e=Sa(e)),!e)return new Aa;if(e instanceof Aa)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),r=Math.max(t,n,o),i=NaN,l=r-a,s=(r+a)/2;return l?(i=t===r?(n-o)/l+6*(n<o):n===r?(o-t)/l+2:(t-n)/l+4,l/=s<.5?r+a:2-r-a,i*=60):l=s>0&&s<1?0:i,new Aa(i,l,s,e.opacity)}function Aa(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Oa(e){return(e=(e||0)%360)<0?e+360:e}function za(e){return Math.max(0,Math.min(1,e||0))}function Fa(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function La(e,t,n,o,a){var r=e*e,i=r*e;return((1-3*e+3*r-i)*t+(4-6*r+3*i)*n+(1+3*e+3*r-3*i)*o+i*a)/6}aa(ia,Sa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xa,formatHex:xa,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ra(this).formatHsl()},formatRgb:wa,toString:wa}),aa(Na,Ea,ra(ia,{brighter(e){return e=null==e?sa:Math.pow(sa,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?la:Math.pow(la,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Na(Ta(this.r),Ta(this.g),Ta(this.b),Ma(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ja,formatHex:ja,formatHex8:function(){return"#".concat(_a(this.r)).concat(_a(this.g)).concat(_a(this.b)).concat(_a(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Pa,toString:Pa})),aa(Aa,function(e,t,n,o){return 1===arguments.length?Ra(e):new Aa(e,t,n,null==o?1:o)},ra(ia,{brighter(e){return e=null==e?sa:Math.pow(sa,e),new Aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?la:Math.pow(la,e),new Aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new Na(Fa(e>=240?e-240:e+120,a,o),Fa(e,a,o),Fa(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Aa(Oa(this.h),za(this.s),za(this.l),Ma(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ma(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Oa(this.h),", ").concat(100*za(this.s),"%, ").concat(100*za(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Ia=e=>()=>e;function Ba(e,t){return function(n){return e+n*t}}function Ua(e){return 1===(e=+e)?Ha:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Ia(isNaN(t)?n:t)}}function Ha(e,t){var n=t-e;return n?Ba(e,n):Ia(isNaN(e)?t:e)}const Va=function e(t){var n=Ua(t);function o(e,t){var o=n((e=Ea(e)).r,(t=Ea(t)).r),a=n(e.g,t.g),r=n(e.b,t.b),i=Ha(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=a(t),e.b=r(t),e.opacity=i(t),e+""}}return o.gamma=e,o}(1);function Wa(e){return function(t){var n,o,a=t.length,r=new Array(a),i=new Array(a),l=new Array(a);for(n=0;n<a;++n)o=Ea(t[n]),r[n]=o.r||0,i[n]=o.g||0,l[n]=o.b||0;return r=e(r),i=e(i),l=e(l),o.opacity=1,function(e){return o.r=r(e),o.g=i(e),o.b=l(e),o+""}}}Wa(function(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[o],r=e[o+1],i=o>0?e[o-1]:2*a-r,l=o<t-1?e[o+2]:2*r-a;return La((n-o/t)*t,i,a,r,l)}}),Wa(function(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),a=e[(o+t-1)%t],r=e[o%t],i=e[(o+1)%t],l=e[(o+2)%t];return La((n-o/t)*t,a,r,i,l)}});var Xa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ya=new RegExp(Xa.source,"g");function Ka(e,t){var n,o,a,r=Xa.lastIndex=Ya.lastIndex=0,i=-1,l=[],s=[];for(e+="",t+="";(n=Xa.exec(e))&&(o=Ya.exec(t));)(a=o.index)>r&&(a=t.slice(r,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,s.push({i:i,x:Ko(n,o)})),r=Ya.lastIndex;return r<t.length&&(a=t.slice(r),l[i]?l[i]+=a:l[++i]=a),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,o=0;o<t;++o)l[(n=s[o]).i]=n.x(e);return l.join("")})}function Ga(e,t){var n;return("number"===typeof t?Ko:t instanceof Sa?Va:(n=Sa(t))?(t=n,Va):Ka)(e,t)}function $a(e){return function(){this.removeAttribute(e)}}function qa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Za(e,t,n){var o,a,r=n+"";return function(){var i=this.getAttribute(e);return i===r?null:i===o?a:a=t(o=i,n)}}function Qa(e,t,n){var o,a,r=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?a:a=t(o=i,n)}}function Ja(e,t,n){var o,a,r;return function(){var i,l,s=n(this);if(null!=s)return(i=this.getAttribute(e))===(l=s+"")?null:i===o&&l===a?r:(a=l,r=t(o=i,s));this.removeAttribute(e)}}function er(e,t,n){var o,a,r;return function(){var i,l,s=n(this);if(null!=s)return(i=this.getAttributeNS(e.space,e.local))===(l=s+"")?null:i===o&&l===a?r:(a=l,r=t(o=i,s));this.removeAttributeNS(e.space,e.local)}}function tr(e,t){var n,o;function a(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,a)),n}return a._value=t,a}function nr(e,t){var n,o;function a(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,a)),n}return a._value=t,a}function or(e,t){return function(){Vo(this,e).delay=+t.apply(this,arguments)}}function ar(e,t){return t=+t,function(){Vo(this,e).delay=t}}function rr(e,t){return function(){Wo(this,e).duration=+t.apply(this,arguments)}}function ir(e,t){return t=+t,function(){Wo(this,e).duration=t}}var lr=uo.prototype.constructor;function sr(e){return function(){this.style.removeProperty(e)}}var cr=0;function ur(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function dr(){return++cr}var pr=uo.prototype;ur.prototype=function(e){return uo().transition(e)}.prototype={constructor:ur,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Qt(e));for(var o=this._groups,a=o.length,r=new Array(a),i=0;i<a;++i)for(var l,s,c=o[i],u=c.length,d=r[i]=new Array(u),p=0;p<u;++p)(l=c[p])&&(s=e.call(l,l.__data__,p,c))&&("__data__"in l&&(s.__data__=l.__data__),d[p]=s,Ho(d[p],t,n,p,d,Xo(l,n)));return new ur(r,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=en(e));for(var o=this._groups,a=o.length,r=[],i=[],l=0;l<a;++l)for(var s,c=o[l],u=c.length,d=0;d<u;++d)if(s=c[d]){for(var p,f=e.call(s,s.__data__,d,c),m=Xo(s,n),h=0,g=f.length;h<g;++h)(p=f[h])&&Ho(p,t,n,h,f,m);r.push(f),i.push(s)}return new ur(r,i,t,n)},selectChild:pr.selectChild,selectChildren:pr.selectChildren,filter:function(e){"function"!==typeof e&&(e=nn(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var r,i=t[a],l=i.length,s=o[a]=[],c=0;c<l;++c)(r=i[c])&&e.call(r,r.__data__,c,i)&&s.push(r);return new ur(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,r=Math.min(o,a),i=new Array(o),l=0;l<r;++l)for(var s,c=t[l],u=n[l],d=c.length,p=i[l]=new Array(d),f=0;f<d;++f)(s=c[f]||u[f])&&(p[f]=s);for(;l<o;++l)i[l]=t[l];return new ur(i,this._parents,this._name,this._id)},selection:function(){return new lr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=dr(),o=this._groups,a=o.length,r=0;r<a;++r)for(var i,l=o[r],s=l.length,c=0;c<s;++c)if(i=l[c]){var u=Xo(i,t);Ho(i,e,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ur(o,this._parents,e,n)},call:pr.call,nodes:pr.nodes,node:pr.node,size:pr.size,empty:pr.empty,each:pr.each,on:function(e,t){var n=this._id;return arguments.length<2?Xo(this.node(),n).on.on(e):this.each(function(e,t,n){var o,a,r=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Vo:Wo;return function(){var i=r(this,e),l=i.on;l!==o&&(a=(o=l).copy()).on(t,n),i.on=a}}(n,e,t))},attr:function(e,t){var n=yn(e),o="transform"===n?ea:Ga;return this.attrTween(e,"function"===typeof t?(n.local?er:Ja)(n,o,oa(this,"attr."+e,t)):null==t?(n.local?qa:$a)(n):(n.local?Qa:Za)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var o=yn(e);return this.tween(n,(o.local?tr:nr)(o,t))},style:function(e,t,n){var o="transform"===(e+="")?Jo:Ga;return null==t?this.styleTween(e,function(e,t){var n,o,a;return function(){var r=Mn(this,e),i=(this.style.removeProperty(e),Mn(this,e));return r===i?null:r===n&&i===o?a:a=t(n=r,o=i)}}(e,o)).on("end.style."+e,sr(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var o,a,r;return function(){var i=Mn(this,e),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(e),s=l=Mn(this,e)),i===s?null:i===o&&s===a?r:(a=s,r=t(o=i,l))}}(e,o,oa(this,"style."+e,t))).each(function(e,t){var n,o,a,r,i="style."+t,l="end."+i;return function(){var s=Wo(this,e),c=s.on,u=null==s.value[i]?r||(r=sr(t)):void 0;c===n&&a===u||(o=(n=c).copy()).on(l,a=u),s.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,a,r=n+"";return function(){var i=Mn(this,e);return i===r?null:i===o?a:a=t(o=i,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!==typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,a;function r(){var r=t.apply(this,arguments);return r!==a&&(o=(a=r)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,r,n)),o}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(oa(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,a=Xo(this.node(),n).tween,r=0,i=a.length;r<i;++r)if((o=a[r]).name===e)return o.value;return null}return this.each((null==t?ta:na)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?or:ar)(t,e)):Xo(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?rr:ir)(t,e)):Xo(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){Wo(this,e).ease=t}}(t,e)):Xo(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Wo(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(r,i){var l={value:i},s={value:function(){0===--a&&r()}};n.each(function(){var n=Wo(this,o),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),n.on=t}),0===a&&r()})},[Symbol.iterator]:pr[Symbol.iterator]};var fr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function mr(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}uo.prototype.interrupt=function(e){return this.each(function(){Yo(this,e)})},uo.prototype.transition=function(e){var t,n;e instanceof ur?(t=e._id,e=e._name):(t=dr(),(n=fr).time=Do(),e=null==e?null:e+"");for(var o=this._groups,a=o.length,r=0;r<a;++r)for(var i,l=o[r],s=l.length,c=0;c<s;++c)(i=l[c])&&Ho(i,e,t,c,l,n||mr(i,t));return new ur(o,this._parents,e,t)};const hr=e=>()=>e;function gr(e,t){let{sourceEvent:n,target:o,transform:a,dispatch:r}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:r}})}function vr(e,t,n){this.k=e,this.x=t,this.y=n}vr.prototype={constructor:vr,scale:function(e){return 1===e?this:new vr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new vr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yr=new vr(1,0,0);function br(e){e.stopImmediatePropagation()}function xr(e){e.preventDefault(),e.stopImmediatePropagation()}function wr(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Sr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function kr(){return this.__zoom||yr}function Cr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Er(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nr(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i))}function jr(){var e,t,n,o=wr,a=Sr,r=Nr,i=Cr,l=Er,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=xo,p=qt("start","zoom","end"),f=0,m=10;function h(e){e.property("__zoom",kr).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",C).filter(l).on("touchstart.zoom",E).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new vr(t,e.x,e.y)}function v(e,t,n){var o=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return o===e.x&&a===e.y?e:new vr(e.k,o,a)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,o){e.on("start.zoom",function(){x(this,arguments).event(o).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(o).end()}).tween("zoom",function(){var e=this,r=arguments,i=x(e,r).event(o),l=a.apply(e,r),s=null==n?y(l):"function"===typeof n?n.apply(e,r):n,c=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),u=e.__zoom,p="function"===typeof t?t.apply(e,r):t,f=d(u.invert(s).concat(c/u.k),p.invert(s).concat(c/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=c/t[2];e=new vr(n,s[0]-t[0]*n,s[1]-t[1]*n)}i.zoom(null,e)}})}function x(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=a.apply(e,t),this.taps=0}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(o.apply(this,arguments)){var l=x(this,n).event(e),u=this.__zoom,d=Math.max(s[0],Math.min(s[1],u.k*Math.pow(2,i.apply(this,arguments)))),p=wo(e);if(l.wheel)l.mouse[0][0]===p[0]&&l.mouse[0][1]===p[1]||(l.mouse[1]=u.invert(l.mouse[0]=p)),clearTimeout(l.wheel);else{if(u.k===d)return;l.mouse=[p,u.invert(p)],Yo(this),l.start()}xr(e),l.wheel=setTimeout(function(){l.wheel=null,l.end()},150),l.zoom("mouse",r(v(g(u,d),l.mouse[0],l.mouse[1]),l.extent,c))}}function k(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];if(!n&&o.apply(this,arguments)){var l=e.currentTarget,s=x(this,a,!0).event(e),u=po(e.view).on("mousemove.zoom",function(e){if(xr(e),!s.moved){var t=e.clientX-p,n=e.clientY-m;s.moved=t*t+n*n>f}s.event(e).zoom("mouse",r(v(s.that.__zoom,s.mouse[0]=wo(e,l),s.mouse[1]),s.extent,c))},!0).on("mouseup.zoom",function(e){u.on("mousemove.zoom mouseup.zoom",null),yo(e.view,s.moved),xr(e),s.event(e).end()},!0),d=wo(e,l),p=e.clientX,m=e.clientY;vo(e.view),br(e),s.mouse=[d,this.__zoom.invert(d)],Yo(this),s.start()}}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(o.apply(this,arguments)){var l=this.__zoom,s=wo(e.changedTouches?e.changedTouches[0]:e,this),d=l.invert(s),p=l.k*(e.shiftKey?.5:2),f=r(v(g(l,p),s,d),a.apply(this,n),c);xr(e),u>0?po(this).transition().duration(u).call(b,f,s,e):po(this).call(h.transform,f,s,e)}}function E(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];if(o.apply(this,arguments)){var l,s,c,u,d=n.touches,p=d.length,f=x(this,r,n.changedTouches.length===p).event(n);for(br(n),s=0;s<p;++s)u=[u=wo(c=d[s],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,l=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),l&&(f.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),Yo(this),f.start())}}function N(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a,i,l,s,u=x(this,n).event(e),d=e.changedTouches,p=d.length;for(xr(e),a=0;a<p;++a)l=wo(i=d[a],this),u.touch0&&u.touch0[2]===i.identifier?u.touch0[0]=l:u.touch1&&u.touch1[2]===i.identifier&&(u.touch1[0]=l);if(i=u.that.__zoom,u.touch1){var f=u.touch0[0],m=u.touch0[1],h=u.touch1[0],y=u.touch1[1],b=(b=h[0]-f[0])*b+(b=h[1]-f[1])*b,w=(w=y[0]-m[0])*w+(w=y[1]-m[1])*w;i=g(i,Math.sqrt(b/w)),l=[(f[0]+h[0])/2,(f[1]+h[1])/2],s=[(m[0]+y[0])/2,(m[1]+y[1])/2]}else{if(!u.touch0)return;l=u.touch0[0],s=u.touch0[1]}u.zoom("touch",r(v(i,l,s),u.extent,c))}}function j(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];if(this.__zooming){var i,l,s=x(this,a).event(e),c=e.changedTouches,u=c.length;for(br(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<u;++i)l=c[i],s.touch0&&s.touch0[2]===l.identifier?delete s.touch0:s.touch1&&s.touch1[2]===l.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(l=wo(l,this),Math.hypot(t[0]-l[0],t[1]-l[1])<m)){var d=po(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return h.transform=function(e,t,n,o){var a=e.selection?e.selection():e;a.property("__zoom",kr),e!==a?b(e,t,n,o):a.interrupt().each(function(){x(this,arguments).event(o).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},h.scaleBy=function(e,t,n,o){h.scaleTo(e,function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)},n,o)},h.scaleTo=function(e,t,n,o){h.transform(e,function(){var e=a.apply(this,arguments),o=this.__zoom,i=null==n?y(e):"function"===typeof n?n.apply(this,arguments):n,l=o.invert(i),s="function"===typeof t?t.apply(this,arguments):t;return r(v(g(o,s),i,l),e,c)},n,o)},h.translateBy=function(e,t,n,o){h.transform(e,function(){return r(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),a.apply(this,arguments),c)},null,o)},h.translateTo=function(e,t,n,o,i){h.transform(e,function(){var e=a.apply(this,arguments),i=this.__zoom,l=null==o?y(e):"function"===typeof o?o.apply(this,arguments):o;return r(yr.translate(l[0],l[1]).scale(i.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)},o,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=po(this.that).datum();p.call(e,this.that,new gr(e,{sourceEvent:this.sourceEvent,target:h,type:e,transform:this.that.__zoom,dispatch:p}),t)}},h.wheelDelta=function(e){return arguments.length?(i="function"===typeof e?e:hr(+e),h):i},h.filter=function(e){return arguments.length?(o="function"===typeof e?e:hr(!!e),h):o},h.touchable=function(e){return arguments.length?(l="function"===typeof e?e:hr(!!e),h):l},h.extent=function(e){return arguments.length?(a="function"===typeof e?e:hr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),h):a},h.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],h):[s[0],s[1]]},h.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],h):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},h.constrain=function(e){return arguments.length?(r=e,h):r},h.duration=function(e){return arguments.length?(u=+e,h):u},h.interpolate=function(e){return arguments.length?(d=e,h):d},h.on=function(){var e=p.on.apply(p,arguments);return e===p?h:e},h.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,h):Math.sqrt(f)},h.tapDistance=function(e){return arguments.length?(m=+e,h):m},h}vr.prototype;const Pr=e=>()=>e;function Mr(e,t){let{sourceEvent:n,subject:o,target:a,identifier:r,active:i,x:l,y:s,dx:c,dy:u,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function Tr(e){return!e.ctrlKey&&!e.button}function _r(){return this.parentNode}function Dr(e,t){return null==t?{x:e.x,y:e.y}:t}function Rr(){return navigator.maxTouchPoints||"ontouchstart"in this}Mr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ar=n(950);const Or=["position","children","className","style"],zr=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],Fr=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Lr=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdate","onEdgeUpdateStart","onEdgeUpdateEnd","onReconnect","onReconnectStart","onReconnectEnd","reconnectRadius","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold"],Ir=(0,o.createContext)(null),Br=Ir.Provider,Ur=e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),Hr=()=>"The React Flow parent container needs a width and a height to render the graph.",Vr=()=>"Only child nodes can use a parent extent.",Wr=()=>"Can't create edge. An edge needs a source and a target.",Xr=e=>'Marker type "'.concat(e,"\" doesn't exist."),Yr=(e,t)=>"Couldn't create edge for ".concat(e?"target":"source",' handle id: "').concat(e?t.targetHandle:t.sourceHandle,'", edge id: ').concat(t.id,"."),Kr=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",Gr=e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),$r=e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),qr=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function Zr(e,t){const n=(0,o.useContext)(Ir);if(null===n)throw new Error(qr);return Ht(n,e,t)}const Qr=()=>{const e=(0,o.useContext)(Ir);if(null===e)throw new Error(qr);return(0,o.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Jr=e=>e.userSelectionActive?"none":"all";function ei(e){let{position:t,children:n,className:a,style:i}=e,l=r(e,Or);const s=Zr(Jr),c="".concat(t).split("-");return o.createElement("div",u({className:Ot(["react-flow__panel",a,...c]),style:u(u({},i),{},{pointerEvents:s})},l),n)}function ti(e){let{proOptions:t,position:n="bottom-right"}=e;return null!==t&&void 0!==t&&t.hideAttribution?null:o.createElement(ei,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},o.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var ni=(0,o.memo)(e=>{let{x:t,y:n,label:a,labelStyle:i={},labelShowBg:l=!0,labelBgStyle:s={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:p,className:f}=e,m=r(e,zr);const h=(0,o.useRef)(null),[g,v]=(0,o.useState)({x:0,y:0,width:0,height:0}),y=Ot(["react-flow__edge-textwrapper",f]);return(0,o.useEffect)(()=>{if(h.current){const e=h.current.getBBox();v({x:e.x,y:e.y,width:e.width,height:e.height})}},[a]),"undefined"!==typeof a&&a?o.createElement("g",u({transform:"translate(".concat(t-g.width/2," ").concat(n-g.height/2,")"),className:y,visibility:g.width?"visible":"hidden"},m),l&&o.createElement("rect",{width:g.width+2*c[0],x:-c[0],y:-c[1],height:g.height+2*c[1],className:"react-flow__edge-textbg",style:s,rx:d,ry:d}),o.createElement("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:h,style:i},a),p):null});const oi=e=>({width:e.offsetWidth,height:e.offsetHeight}),ai=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},ri=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:ai(e.x,t[0][0],t[1][0]),y:ai(e.y,t[0][1],t[1][1])}},ii=(e,t,n)=>e<t?ai(Math.abs(e-t),1,50)/50:e>n?-ai(Math.abs(e-n),1,50)/50:0,li=(e,t)=>[20*ii(e.x,35,t.width-35),20*ii(e.y,35,t.height-35)],si=e=>{var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},ci=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ui=e=>{let{x:t,y:n,width:o,height:a}=e;return{x:t,y:n,x2:t+o,y2:n+a}},di=e=>{let{x:t,y:n,x2:o,y2:a}=e;return{x:t,y:n,width:o-t,height:a-n}},pi=e=>u(u({},e.positionAbsolute||{x:0,y:0}),{},{width:e.width||0,height:e.height||0}),fi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},mi=e=>!isNaN(e)&&isFinite(e),hi=Symbol.for("internals"),gi=["Enter"," ","Escape"],vi=(e,t)=>{0};function yi(e){var t;const n=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,o=(null===(t=n.composedPath)||void 0===t||null===(t=t.call(n))||void 0===t?void 0:t[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null===o||void 0===o?void 0:o.nodeName)||(null===o||void 0===o?void 0:o.hasAttribute("contenteditable"))||!(null===o||void 0===o||!o.closest(".nokey"))}const bi=e=>"clientX"in e,xi=(e,t)=>{var n,o,a,r;const i=bi(e),l=i?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,s=i?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:l-(null!==(a=null===t||void 0===t?void 0:t.left)&&void 0!==a?a:0),y:s-(null!==(r=null===t||void 0===t?void 0:t.top)&&void 0!==r?r:0)}},wi=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0},Si=e=>{let{id:t,path:n,labelX:a,labelY:r,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:m,interactionWidth:h=20}=e;return o.createElement(o.Fragment,null,o.createElement("path",{id:t,style:p,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),h&&o.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&mi(a)&&mi(r)?o.createElement(ni,{x:a,y:r,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d}):null)};Si.displayName="BaseEdge";function ki(e,t,n){return void 0===n?n:o=>{const a=t().edges.find(t=>t.id===e);a&&n(o,u({},a))}}function Ci(e){let{sourceX:t,sourceY:n,targetX:o,targetY:a}=e;const r=Math.abs(o-t)/2,i=o<t?o+r:o-r,l=Math.abs(a-n)/2;return[i,a<n?a+l:a-l,r,l]}function Ei(e){let{sourceX:t,sourceY:n,targetX:o,targetY:a,sourceControlX:r,sourceControlY:i,targetControlX:l,targetControlY:s}=e;const c=.125*t+.375*r+.375*l+.125*o,u=.125*n+.375*i+.375*s+.125*a;return[c,u,Math.abs(c-t),Math.abs(u-n)]}var Ni,ji,Pi,Mi,Ti,_i;function Di(e){let{pos:t,x1:n,y1:o,x2:a,y2:r}=e;return t===_i.Left||t===_i.Right?[.5*(n+a),o]:[n,.5*(o+r)]}function Ri(e){let{sourceX:t,sourceY:n,sourcePosition:o=_i.Bottom,targetX:a,targetY:r,targetPosition:i=_i.Top}=e;const[l,s]=Di({pos:o,x1:t,y1:n,x2:a,y2:r}),[c,u]=Di({pos:i,x1:a,y1:r,x2:t,y2:n}),[d,p,f,m]=Ei({sourceX:t,sourceY:n,targetX:a,targetY:r,sourceControlX:l,sourceControlY:s,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(l,",").concat(s," ").concat(c,",").concat(u," ").concat(a,",").concat(r),d,p,f,m]}!function(e){e.Strict="strict",e.Loose="loose"}(Ni||(Ni={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(ji||(ji={})),function(e){e.Partial="partial",e.Full="full"}(Pi||(Pi={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Mi||(Mi={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Ti||(Ti={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(_i||(_i={}));const Ai=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:a,targetY:r,sourcePosition:i=_i.Bottom,targetPosition:l=_i.Top,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:g,interactionWidth:v}=e;const[y,b,x]=Ri({sourceX:t,sourceY:n,sourcePosition:i,targetX:a,targetY:r,targetPosition:l});return o.createElement(Si,{path:y,labelX:b,labelY:x,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:g,interactionWidth:v})});Ai.displayName="SimpleBezierEdge";const Oi={[_i.Left]:{x:-1,y:0},[_i.Right]:{x:1,y:0},[_i.Top]:{x:0,y:-1},[_i.Bottom]:{x:0,y:1}},zi=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Fi(e){let{source:t,sourcePosition:n=_i.Bottom,target:o,targetPosition:a=_i.Top,center:r,offset:i}=e;const l=Oi[n],s=Oi[a],c={x:t.x+l.x*i,y:t.y+l.y*i},u={x:o.x+s.x*i,y:o.y+s.y*i},d=(e=>{let{source:t,sourcePosition:n=_i.Bottom,target:o}=e;return n===_i.Left||n===_i.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1}})({source:c,sourcePosition:n,target:u}),p=0!==d.x?"x":"y",f=d[p];let m,h,g=[];const v={x:0,y:0},y={x:0,y:0},[b,x,w,S]=Ci({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(l[p]*s[p]===-1){var k,C;m=null!==(k=r.x)&&void 0!==k?k:b,h=null!==(C=r.y)&&void 0!==C?C:x;const e=[{x:m,y:c.y},{x:m,y:u.y}],t=[{x:c.x,y:h},{x:u.x,y:h}];g=l[p]===f?"x"===p?e:t:"x"===p?t:e}else{const e=[{x:c.x,y:u.y}],r=[{x:u.x,y:c.y}];if(g="x"===p?l.x===f?r:e:l.y===f?e:r,n===a){const e=Math.abs(t[p]-o[p]);if(e<=i){const n=Math.min(i-1,i-e);l[p]===f?v[p]=(c[p]>t[p]?-1:1)*n:y[p]=(u[p]>o[p]?-1:1)*n}}if(n!==a){const t="x"===p?"y":"x",n=l[p]===s[t],o=c[t]>u[t],a=c[t]<u[t];(1===l[p]&&(!n&&o||n&&a)||1!==l[p]&&(!n&&a||n&&o))&&(g="x"===p?e:r)}const d={x:c.x+v.x,y:c.y+v.y},b={x:u.x+y.x,y:u.y+y.y};Math.max(Math.abs(d.x-g[0].x),Math.abs(b.x-g[0].x))>=Math.max(Math.abs(d.y-g[0].y),Math.abs(b.y-g[0].y))?(m=(d.x+b.x)/2,h=g[0].y):(m=g[0].x,h=(d.y+b.y)/2)}return[[t,{x:c.x+v.x,y:c.y+v.y},...g,{x:u.x+y.x,y:u.y+y.y},o],m,h,w,S]}function Li(e){let{sourceX:t,sourceY:n,sourcePosition:o=_i.Bottom,targetX:a,targetY:r,targetPosition:i=_i.Top,borderRadius:l=5,centerX:s,centerY:c,offset:u=20}=e;const[d,p,f,m,h]=Fi({source:{x:t,y:n},sourcePosition:o,target:{x:a,y:r},targetPosition:i,center:{x:s,y:c},offset:u}),g=d.reduce((e,t,n)=>{let o="";return o=n>0&&n<d.length-1?function(e,t,n,o){const a=Math.min(zi(e,t)/2,zi(t,n)/2,o),{x:r,y:i}=t;if(e.x===r&&r===n.x||e.y===i&&i===n.y)return"L".concat(r," ").concat(i);if(e.y===i){const t=e.x<n.x?-1:1,o=e.y<n.y?1:-1;return"L ".concat(r+a*t,",").concat(i,"Q ").concat(r,",").concat(i," ").concat(r,",").concat(i+a*o)}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return"L ".concat(r,",").concat(i+a*s,"Q ").concat(r,",").concat(i," ").concat(r+a*l,",").concat(i)}(d[n-1],t,d[n+1],l):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=o},"");return[g,p,f,m,h]}const Ii=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:a,targetY:r,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:p,sourcePosition:f=_i.Bottom,targetPosition:m=_i.Top,markerEnd:h,markerStart:g,pathOptions:v,interactionWidth:y}=e;const[b,x,w]=Li({sourceX:t,sourceY:n,sourcePosition:f,targetX:a,targetY:r,targetPosition:m,borderRadius:null===v||void 0===v?void 0:v.borderRadius,offset:null===v||void 0===v?void 0:v.offset});return o.createElement(Si,{path:b,labelX:x,labelY:w,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:h,markerStart:g,interactionWidth:y})});Ii.displayName="SmoothStepEdge";const Bi=(0,o.memo)(e=>{var t;return o.createElement(Ii,u(u({},e),{},{pathOptions:(0,o.useMemo)(()=>{var t;return{borderRadius:0,offset:null===(t=e.pathOptions)||void 0===t?void 0:t.offset}},[null===(t=e.pathOptions)||void 0===t?void 0:t.offset])}))});Bi.displayName="StepEdge";const Ui=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:a,targetY:r,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:m,interactionWidth:h}=e;const[g,v,y]=function(e){let{sourceX:t,sourceY:n,targetX:o,targetY:a}=e;const[r,i,l,s]=Ci({sourceX:t,sourceY:n,targetX:o,targetY:a});return["M ".concat(t,",").concat(n,"L ").concat(o,",").concat(a),r,i,l,s]}({sourceX:t,sourceY:n,targetX:a,targetY:r});return o.createElement(Si,{path:g,labelX:v,labelY:y,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:m,interactionWidth:h})});function Hi(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Vi(e){let{pos:t,x1:n,y1:o,x2:a,y2:r,c:i}=e;switch(t){case _i.Left:return[n-Hi(n-a,i),o];case _i.Right:return[n+Hi(a-n,i),o];case _i.Top:return[n,o-Hi(o-r,i)];case _i.Bottom:return[n,o+Hi(r-o,i)]}}function Wi(e){let{sourceX:t,sourceY:n,sourcePosition:o=_i.Bottom,targetX:a,targetY:r,targetPosition:i=_i.Top,curvature:l=.25}=e;const[s,c]=Vi({pos:o,x1:t,y1:n,x2:a,y2:r,c:l}),[u,d]=Vi({pos:i,x1:a,y1:r,x2:t,y2:n,c:l}),[p,f,m,h]=Ei({sourceX:t,sourceY:n,targetX:a,targetY:r,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(s,",").concat(c," ").concat(u,",").concat(d," ").concat(a,",").concat(r),p,f,m,h]}Ui.displayName="StraightEdge";const Xi=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:a,targetY:r,sourcePosition:i=_i.Bottom,targetPosition:l=_i.Top,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:g,pathOptions:v,interactionWidth:y}=e;const[b,x,w]=Wi({sourceX:t,sourceY:n,sourcePosition:i,targetX:a,targetY:r,targetPosition:l,curvature:null===v||void 0===v?void 0:v.curvature});return o.createElement(Si,{path:b,labelX:x,labelY:w,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:g,interactionWidth:y})});Xi.displayName="BezierEdge";const Yi=(0,o.createContext)(null),Ki=Yi.Provider;Yi.Consumer;const Gi=e=>{let{source:t,sourceHandle:n,target:o,targetHandle:a}=e;return"reactflow__edge-".concat(t).concat(n||"","-").concat(o).concat(a||"")},$i=(e,t)=>{if("undefined"===typeof e)return"";if("string"===typeof e)return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map(t=>"".concat(t,"=").concat(e[t])).join("&"))},qi=(e,t)=>{if(!e.source||!e.target)return vi(0,Wr()),t;let n;var o;return n="id"in(o=e)&&"source"in o&&"target"in o?u({},e):u(u({},e),{},{id:Gi(e)}),((e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))(n,t)?t:t.concat(n)},Zi=(e,t,n,o)=>{let{x:a,y:r}=e,[i,l,s]=t,[c,u]=o;const d={x:(a-i)/s,y:(r-l)/s};return n?{x:c*Math.round(d.x/c),y:u*Math.round(d.y/u)}:d},Qi=(e,t)=>{let{x:n,y:o}=e,[a,r,i]=t;return{x:n*i+a,y:o*i+r}},Ji=function(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const a=(null!==(t=e.width)&&void 0!==t?t:0)*o[0],r=(null!==(n=e.height)&&void 0!==n?n:0)*o[1],i={x:e.position.x-a,y:e.position.y-r};return u(u({},i),{},{positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-a,y:e.positionAbsolute.y-r}:i})},el=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const{x:o,y:a}=Ji(n,t).positionAbsolute;return ci(e,ui({x:o,y:a,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return di(n)},tl=function(e,t){let[n,o,a]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0];const s={x:(t.x-n)/a,y:(t.y-o)/a,width:t.width/a,height:t.height/a},c=[];return e.forEach(e=>{const{width:t,height:n,selectable:o=!0,hidden:a=!1}=e;if(i&&!o||a)return!1;const{positionAbsolute:u}=Ji(e,l),d={x:u.x,y:u.y,width:t||0,height:n||0},p=fi(s,d);("undefined"===typeof t||"undefined"===typeof n||null===t||null===n||r&&p>0||p>=(t||0)*(n||0)||e.dragging)&&c.push(e)}),c},nl=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},ol=function(e,t,n,o,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1;const i=t/(e.width*(1+r)),l=n/(e.height*(1+r)),s=Math.min(i,l),c=ai(s,o,a);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},al=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function rl(e,t,n,o){return(t[n]||[]).reduce((t,a)=>{var r,i,l,s;"".concat(e.id,"-").concat(a.id,"-").concat(n)!==o&&t.push({id:a.id||null,type:n,nodeId:e.id,x:(null!==(r=null===(i=e.positionAbsolute)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+a.x+a.width/2,y:(null!==(l=null===(s=e.positionAbsolute)||void 0===s?void 0:s.y)&&void 0!==l?l:0)+a.y+a.height/2});return t},[])}const il={source:null,target:null,sourceHandle:null,targetHandle:null},ll=()=>({handleDomNode:null,isValid:!1,connection:il,endHandle:null});function sl(e,t,n,o,a,r,i){const l="target"===a,s=i.querySelector('.react-flow__handle[data-id="'.concat(null===e||void 0===e?void 0:e.nodeId,"-").concat(null===e||void 0===e?void 0:e.id,"-").concat(null===e||void 0===e?void 0:e.type,'"]')),c=u(u({},ll()),{},{handleDomNode:s});if(s){const e=cl(void 0,s),a=s.getAttribute("data-nodeid"),i=s.getAttribute("data-handleid"),u=s.classList.contains("connectable"),d=s.classList.contains("connectableend"),p={source:l?a:n,sourceHandle:l?i:o,target:l?n:a,targetHandle:l?o:i};c.connection=p;u&&d&&(t===Ni.Strict?l&&"source"===e||!l&&"target"===e:a!==n||i!==o)&&(c.endHandle={nodeId:a,handleId:i,type:e},c.isValid=r(p))}return c}function cl(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}function ul(e){null===e||void 0===e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function dl(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function pl(e){let{event:t,handleId:n,nodeId:o,onConnect:a,isTarget:r,getState:i,setState:l,isValidConnection:s,edgeUpdaterType:c,onReconnectEnd:u}=e;const d=si(t.target),{connectionMode:p,domNode:f,autoPanOnConnect:m,connectionRadius:h,onConnectStart:g,panBy:v,getNodes:y,cancelConnection:b}=i();let x,w=0;const{x:S,y:k}=xi(t),C=null===d||void 0===d?void 0:d.elementFromPoint(S,k),E=cl(c,C),N=null===f||void 0===f?void 0:f.getBoundingClientRect();if(!N||!E)return;let j,P=xi(t,N),M=!1,T=null,_=!1,D=null;const R=function(e){let{nodes:t,nodeId:n,handleId:o,handleType:a}=e;return t.reduce((e,t)=>{if(t[hi]){const{handleBounds:r}=t[hi];let i=[],l=[];r&&(i=rl(t,r,"source","".concat(n,"-").concat(o,"-").concat(a)),l=rl(t,r,"target","".concat(n,"-").concat(o,"-").concat(a))),e.push(...i,...l)}return e},[])}({nodes:y(),nodeId:o,handleId:n,handleType:E}),A=()=>{if(!m)return;const[e,t]=li(P,N);v({x:e,y:t}),w=requestAnimationFrame(A)};function O(e){const{transform:t}=i();P=xi(e,N);const{handle:a,validHandleResult:c}=function(e,t,n,o,a,r){const{x:i,y:l}=xi(e),s=t.elementsFromPoint(i,l).find(e=>e.classList.contains("react-flow__handle"));if(s){const e=s.getAttribute("data-nodeid");if(e){const t=cl(void 0,s),o=s.getAttribute("data-handleid"),i=r({nodeId:e,id:o,type:t});if(i){const r=a.find(n=>n.nodeId===e&&n.type===t&&n.id===o);return{handle:{id:o,type:t,nodeId:e,x:(null===r||void 0===r?void 0:r.x)||n.x,y:(null===r||void 0===r?void 0:r.y)||n.y},validHandleResult:i}}}}let c=[],u=1/0;if(a.forEach(e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=o){const n=r(e);t<=u&&(t<u?c=[{handle:e,validHandleResult:n}]:t===u&&c.push({handle:e,validHandleResult:n}),u=t)}}),!c.length)return{handle:null,validHandleResult:ll()};if(1===c.length)return c[0];const d=c.some(e=>{let{validHandleResult:t}=e;return t.isValid}),p=c.some(e=>{let{handle:t}=e;return"target"===t.type});return c.find(e=>{let{handle:t,validHandleResult:n}=e;return p?"target"===t.type:!d||n.isValid})||c[0]}(e,d,Zi(P,t,!1,[1,1]),h,R,e=>sl(e,p,o,n,r?"target":"source",s,d));if(x=a,M||(A(),M=!0),D=c.handleDomNode,T=c.connection,_=c.isValid,l({connectionPosition:x&&_?Qi({x:x.x,y:x.y},t):P,connectionStatus:dl(!!x,_),connectionEndHandle:c.endHandle}),!x&&!_&&!D)return ul(j);T.source!==T.target&&D&&(ul(j),j=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",_),D.classList.toggle("react-flow__handle-valid",_))}function z(e){var t,n;(x||D)&&T&&_&&(null===a||void 0===a||a(T)),null===(t=(n=i()).onConnectEnd)||void 0===t||t.call(n,e),c&&(null===u||void 0===u||u(e)),ul(j),b(),cancelAnimationFrame(w),M=!1,_=!1,T=null,D=null,d.removeEventListener("mousemove",O),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",O),d.removeEventListener("touchend",z)}l({connectionPosition:P,connectionStatus:null,connectionNodeId:o,connectionHandleId:n,connectionHandleType:E,connectionStartHandle:{nodeId:o,handleId:n,type:E},connectionEndHandle:null}),null===g||void 0===g||g(t,{nodeId:o,handleId:n,handleType:E}),d.addEventListener("mousemove",O),d.addEventListener("mouseup",z),d.addEventListener("touchmove",O),d.addEventListener("touchend",z)}const fl=()=>!0,ml=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),hl=(0,o.forwardRef)((e,t)=>{let{type:n="source",position:a=_i.Top,isValidConnection:i,isConnectable:l=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:d,onConnect:p,children:f,className:m,onMouseDown:h,onTouchStart:g}=e,v=r(e,Fr);const y=d||null,b="target"===n,x=Qr(),w=(0,o.useContext)(Yi),{connectOnClick:S,noPanClassName:k}=Zr(ml,Wt),{connecting:C,clickConnecting:E}=Zr(((e,t,n)=>o=>{const{connectionStartHandle:a,connectionEndHandle:r,connectionClickStartHandle:i}=o;return{connecting:(null===a||void 0===a?void 0:a.nodeId)===e&&(null===a||void 0===a?void 0:a.handleId)===t&&(null===a||void 0===a?void 0:a.type)===n||(null===r||void 0===r?void 0:r.nodeId)===e&&(null===r||void 0===r?void 0:r.handleId)===t&&(null===r||void 0===r?void 0:r.type)===n,clickConnecting:(null===i||void 0===i?void 0:i.nodeId)===e&&(null===i||void 0===i?void 0:i.handleId)===t&&(null===i||void 0===i?void 0:i.type)===n}})(w,y,n),Wt);var N,j;w||(null===(N=(j=x.getState()).onError)||void 0===N||N.call(j,"010",Kr()));const P=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=x.getState(),a=u(u({},t),e);if(o){const{edges:e,setEdges:t}=x.getState();t(qi(a,e))}null===n||void 0===n||n(a),null===p||void 0===p||p(a)},M=e=>{if(!w)return;const t=bi(e);s&&(t&&0===e.button||!t)&&pl({event:e,handleId:y,nodeId:w,onConnect:P,isTarget:b,getState:x.getState,setState:x.setState,isValidConnection:i||x.getState().isValidConnection||fl}),t?null===h||void 0===h||h(e):null===g||void 0===g||g(e)};return o.createElement("div",u({"data-handleid":y,"data-nodeid":w,"data-handlepos":a,"data-id":"".concat(w,"-").concat(y,"-").concat(n),className:Ot(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",k,m,{source:!b,target:b,connectable:l,connectablestart:s,connectableend:c,connecting:E,connectionindicator:l&&(s&&!C||c&&C)}]),onMouseDown:M,onTouchStart:M,onClick:S?e=>{const{onClickConnectStart:t,onClickConnectEnd:o,connectionClickStartHandle:a,connectionMode:r,isValidConnection:l}=x.getState();if(!w||!a&&!s)return;if(!a)return null===t||void 0===t||t(e,{nodeId:w,handleId:y,handleType:n}),void x.setState({connectionClickStartHandle:{nodeId:w,type:n,handleId:y}});const c=si(e.target),u=i||l||fl,{connection:d,isValid:p}=sl({nodeId:w,id:y,type:n},r,a.nodeId,a.handleId||null,a.type,u,c);p&&P(d),null===o||void 0===o||o(e),x.setState({connectionClickStartHandle:null})}:void 0,ref:t},v),f)});hl.displayName="Handle";var gl=(0,o.memo)(hl);const vl=e=>{let{data:t,isConnectable:n,targetPosition:a=_i.Top,sourcePosition:r=_i.Bottom}=e;return o.createElement(o.Fragment,null,o.createElement(gl,{type:"target",position:a,isConnectable:n}),null===t||void 0===t?void 0:t.label,o.createElement(gl,{type:"source",position:r,isConnectable:n}))};vl.displayName="DefaultNode";var yl=(0,o.memo)(vl);const bl=e=>{let{data:t,isConnectable:n,sourcePosition:a=_i.Bottom}=e;return o.createElement(o.Fragment,null,null===t||void 0===t?void 0:t.label,o.createElement(gl,{type:"source",position:a,isConnectable:n}))};bl.displayName="InputNode";var xl=(0,o.memo)(bl);const wl=e=>{let{data:t,isConnectable:n,targetPosition:a=_i.Top}=e;return o.createElement(o.Fragment,null,o.createElement(gl,{type:"target",position:a,isConnectable:n}),null===t||void 0===t?void 0:t.label)};wl.displayName="OutputNode";var Sl=(0,o.memo)(wl);const kl=()=>null;kl.displayName="GroupNode";const Cl=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>u({},e))}),El=e=>e.id;function Nl(e,t){return Wt(e.selectedNodes.map(El),t.selectedNodes.map(El))&&Wt(e.selectedEdges.map(El),t.selectedEdges.map(El))}const jl=(0,o.memo)(e=>{let{onSelectionChange:t}=e;const n=Qr(),{selectedNodes:a,selectedEdges:r}=Zr(Cl,Nl);return(0,o.useEffect)(()=>{const e={nodes:a,edges:r};null===t||void 0===t||t(e),n.getState().onSelectionChange.forEach(t=>t(e))},[a,r,t]),null});jl.displayName="SelectionListener";const Pl=e=>!!e.onSelectionChange;function Ml(e){let{onSelectionChange:t}=e;const n=Zr(Pl);return t||n?o.createElement(jl,{onSelectionChange:t}):null}const Tl=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function _l(e,t){(0,o.useEffect)(()=>{"undefined"!==typeof e&&t(e)},[e])}function Dl(e,t,n){(0,o.useEffect)(()=>{"undefined"!==typeof t&&n({[e]:t})},[t])}const Rl=e=>{let{nodes:t,edges:n,defaultNodes:a,defaultEdges:r,onConnect:i,onConnectStart:l,onConnectEnd:s,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:p,nodesConnectable:f,nodesFocusable:m,edgesFocusable:h,edgesUpdatable:g,elevateNodesOnSelect:v,minZoom:y,maxZoom:b,nodeExtent:x,onNodesChange:w,onEdgesChange:S,elementsSelectable:k,connectionMode:C,snapGrid:E,snapToGrid:N,translateExtent:j,connectOnClick:P,defaultEdgeOptions:M,fitView:T,fitViewOptions:_,onNodesDelete:D,onEdgesDelete:R,onNodeDrag:A,onNodeDragStart:O,onNodeDragStop:z,onSelectionDrag:F,onSelectionDragStart:L,onSelectionDragStop:I,noPanClassName:B,nodeOrigin:U,rfId:H,autoPanOnConnect:V,autoPanOnNodeDrag:W,onError:X,connectionRadius:Y,isValidConnection:K,nodeDragThreshold:G}=e;const{setNodes:$,setEdges:q,setDefaultNodesAndEdges:Z,setMinZoom:Q,setMaxZoom:J,setTranslateExtent:ee,setNodeExtent:te,reset:ne}=Zr(Tl,Wt),oe=Qr();return(0,o.useEffect)(()=>{const e=null===r||void 0===r?void 0:r.map(e=>u(u({},e),M));return Z(a,e),()=>{ne()}},[]),Dl("defaultEdgeOptions",M,oe.setState),Dl("connectionMode",C,oe.setState),Dl("onConnect",i,oe.setState),Dl("onConnectStart",l,oe.setState),Dl("onConnectEnd",s,oe.setState),Dl("onClickConnectStart",c,oe.setState),Dl("onClickConnectEnd",d,oe.setState),Dl("nodesDraggable",p,oe.setState),Dl("nodesConnectable",f,oe.setState),Dl("nodesFocusable",m,oe.setState),Dl("edgesFocusable",h,oe.setState),Dl("edgesUpdatable",g,oe.setState),Dl("elementsSelectable",k,oe.setState),Dl("elevateNodesOnSelect",v,oe.setState),Dl("snapToGrid",N,oe.setState),Dl("snapGrid",E,oe.setState),Dl("onNodesChange",w,oe.setState),Dl("onEdgesChange",S,oe.setState),Dl("connectOnClick",P,oe.setState),Dl("fitViewOnInit",T,oe.setState),Dl("fitViewOnInitOptions",_,oe.setState),Dl("onNodesDelete",D,oe.setState),Dl("onEdgesDelete",R,oe.setState),Dl("onNodeDrag",A,oe.setState),Dl("onNodeDragStart",O,oe.setState),Dl("onNodeDragStop",z,oe.setState),Dl("onSelectionDrag",F,oe.setState),Dl("onSelectionDragStart",L,oe.setState),Dl("onSelectionDragStop",I,oe.setState),Dl("noPanClassName",B,oe.setState),Dl("nodeOrigin",U,oe.setState),Dl("rfId",H,oe.setState),Dl("autoPanOnConnect",V,oe.setState),Dl("autoPanOnNodeDrag",W,oe.setState),Dl("onError",X,oe.setState),Dl("connectionRadius",Y,oe.setState),Dl("isValidConnection",K,oe.setState),Dl("nodeDragThreshold",G,oe.setState),_l(t,$),_l(n,q),_l(y,Q),_l(b,J),_l(j,ee),_l(x,te),null},Al={display:"none"},Ol={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},zl="react-flow__node-desc",Fl="react-flow__edge-desc",Ll=e=>e.ariaLiveMessage;function Il(e){let{rfId:t}=e;const n=Zr(Ll);return o.createElement("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:Ol},n)}function Bl(e){let{rfId:t,disableKeyboardA11y:n}=e;return o.createElement(o.Fragment,null,o.createElement("div",{id:"".concat(zl,"-").concat(t),style:Al},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),o.createElement("div",{id:"".concat(Fl,"-").concat(t),style:Al},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&o.createElement(Il,{rfId:t}))}var Ul=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0};const[n,a]=(0,o.useState)(!1),r=(0,o.useRef)(!1),i=(0,o.useRef)(new Set([])),[l,s]=(0,o.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"===typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,o.useEffect)(()=>{const n="undefined"!==typeof document?document:null,o=(null===t||void 0===t?void 0:t.target)||n;if(null!==e){const e=e=>{r.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!r.current||r.current&&!t.actInsideInputWithModifier)&&yi(e))return!1;const n=Vl(e.code,s);i.current.add(e[n]),Hl(l,i.current,!1)&&(e.preventDefault(),a(!0))},n=e=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&yi(e))return!1;const n=Vl(e.code,s);Hl(l,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(e[n]),"Meta"===e.key&&i.current.clear(),r.current=!1},c=()=>{i.current.clear(),a(!1)};return null===o||void 0===o||o.addEventListener("keydown",e),null===o||void 0===o||o.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{null===o||void 0===o||o.removeEventListener("keydown",e),null===o||void 0===o||o.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}},[e,a]),n};function Hl(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Vl(e,t){return t.includes(e)?"code":"key"}function Wl(e,t,n,o){var a,r,i,l,s,c,u,d;const p=e.parentNode||e.parentId;if(!p)return n;const f=t.get(p),m=Ji(f,o);return Wl(f,t,{x:(null!==(a=n.x)&&void 0!==a?a:0)+m.x,y:(null!==(r=n.y)&&void 0!==r?r:0)+m.y,z:(null!==(i=null===(l=f[hi])||void 0===l?void 0:l.z)&&void 0!==i?i:0)>(null!==(s=n.z)&&void 0!==s?s:0)?null!==(c=null===(u=f[hi])||void 0===u?void 0:u.z)&&void 0!==c?c:0:null!==(d=n.z)&&void 0!==d?d:0},o)}function Xl(e,t,n){e.forEach(o=>{const a=o.parentNode||o.parentId;if(a&&!e.has(a))throw new Error("Parent node ".concat(a," not found"));if(a||null!==n&&void 0!==n&&n[o.id]){var r,i;const{x:a,y:l,z:s}=Wl(o,e,u(u({},o.position),{},{z:null!==(r=null===(i=o[hi])||void 0===i?void 0:i.z)&&void 0!==r?r:0}),t);o.positionAbsolute={x:a,y:l},o[hi].z=s,null!==n&&void 0!==n&&n[o.id]&&(o[hi].isParent=!0)}})}function Yl(e,t,n,o){const a=new Map,r={},i=o?1e3:0;return e.forEach(e=>{var n;const o=(mi(e.zIndex)?e.zIndex:0)+(e.selected?i:0),l=t.get(e.id),s=u(u({},e),{},{positionAbsolute:{x:e.position.x,y:e.position.y}}),c=e.parentNode||e.parentId;c&&(r[c]=!0);const d=(null===l||void 0===l?void 0:l.type)&&(null===l||void 0===l?void 0:l.type)!==e.type;Object.defineProperty(s,hi,{enumerable:!1,value:{handleBounds:d||null===l||void 0===l||null===(n=l[hi])||void 0===n?void 0:n.handleBounds,z:o}}),a.set(e.id,s)}),Xl(a,n,r),a}function Kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getNodes:n,width:o,height:a,minZoom:r,maxZoom:i,d3Zoom:l,d3Selection:s,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),p=t.initial&&!c&&u;if(l&&s&&(p||!t.initial)){const e=n().filter(e=>{var n;const o=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return null!==(n=t.nodes)&&void 0!==n&&n.length?o&&t.nodes.some(t=>t.id===e.id):o}),c=e.every(e=>e.width&&e.height);if(e.length>0&&c){var f,m,h;const n=el(e,d),{x:c,y:u,zoom:p}=ol(n,o,a,null!==(f=t.minZoom)&&void 0!==f?f:r,null!==(m=t.maxZoom)&&void 0!==m?m:i,null!==(h=t.padding)&&void 0!==h?h:.1),g=yr.translate(c,u).scale(p);return"number"===typeof t.duration&&t.duration>0?l.transform(al(s,t.duration),g):l.transform(s,g),!0}}return!1}function Gl(e,t){return e.forEach(e=>{const n=t.get(e.id);n&&t.set(n.id,u(u({},n),{},{[hi]:n[hi],selected:e.selected}))}),new Map(t)}function $l(e,t){return t.map(t=>{const n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function ql(e){let{changedNodes:t,changedEdges:n,get:o,set:a}=e;const{nodeInternals:r,edges:i,onNodesChange:l,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:u}=o();null!==t&&void 0!==t&&t.length&&(c&&a({nodeInternals:Gl(t,r)}),null===l||void 0===l||l(t)),null!==n&&void 0!==n&&n.length&&(u&&a({edges:$l(n,i)}),null===s||void 0===s||s(n))}const Zl=()=>{},Ql={zoomIn:Zl,zoomOut:Zl,zoomTo:Zl,getZoom:()=>1,setViewport:Zl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Zl,fitBounds:Zl,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Jl=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function es(){const e=(()=>{const e=Qr(),{d3Zoom:t,d3Selection:n}=Zr(Jl,Wt),a=(0,o.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(al(n,null===e||void 0===e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(al(n,null===e||void 0===e?void 0:e.duration),1/1.2),zoomTo:(e,o)=>t.scaleTo(al(n,null===o||void 0===o?void 0:o.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(o,a)=>{var r,i,l;const[s,c,u]=e.getState().transform,d=yr.translate(null!==(r=o.x)&&void 0!==r?r:s,null!==(i=o.y)&&void 0!==i?i:c).scale(null!==(l=o.zoom)&&void 0!==l?l:u);t.transform(al(n,null===a||void 0===a?void 0:a.duration),d)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>Kl(e.getState,t),setCenter:(o,a,r)=>{const{width:i,height:l,maxZoom:s}=e.getState(),c="undefined"!==typeof(null===r||void 0===r?void 0:r.zoom)?r.zoom:s,u=i/2-o*c,d=l/2-a*c,p=yr.translate(u,d).scale(c);t.transform(al(n,null===r||void 0===r?void 0:r.duration),p)},fitBounds:(o,a)=>{var r;const{width:i,height:l,minZoom:s,maxZoom:c}=e.getState(),{x:u,y:d,zoom:p}=ol(o,i,l,s,c,null!==(r=null===a||void 0===a?void 0:a.padding)&&void 0!==r?r:.1),f=yr.translate(u,d).scale(p);t.transform(al(n,null===a||void 0===a?void 0:a.duration),f)},project:t=>{const{transform:n,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Zi(t,n,o,a)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:o,snapGrid:a,domNode:r}=e.getState();if(!r)return t;const{x:i,y:l}=r.getBoundingClientRect(),s={x:t.x-i,y:t.y-l};return Zi(s,n,o,a)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:a,y:r}=o.getBoundingClientRect(),i=Qi(t,n);return{x:i.x+a,y:i.y+r}},viewportInitialized:!0}:Ql,[t,n]);return a})(),t=Qr(),n=(0,o.useCallback)(()=>t.getState().getNodes().map(e=>u({},e)),[]),a=(0,o.useCallback)(e=>t.getState().nodeInternals.get(e),[]),r=(0,o.useCallback)(()=>{const{edges:e=[]}=t.getState();return e.map(e=>u({},e))},[]),i=(0,o.useCallback)(e=>{const{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),l=(0,o.useCallback)(e=>{const{getNodes:n,setNodes:o,hasDefaultNodes:a,onNodesChange:r}=t.getState(),i=n(),l="function"===typeof e?e(i):e;if(a)o(l);else if(r){const e=0===l.length?i.map(e=>({type:"remove",id:e.id})):l.map(e=>({item:e,type:"reset"}));r(e)}},[]),s=(0,o.useCallback)(e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:a,onEdgesChange:r}=t.getState(),i="function"===typeof e?e(n):e;if(a)o(i);else if(r){r(0===i.length?n.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))}},[]),c=(0,o.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{getNodes:o,setNodes:a,hasDefaultNodes:r,onNodesChange:i}=t.getState();if(r){a([...o(),...n])}else if(i){const e=n.map(e=>({item:e,type:"add"}));i(e)}},[]),d=(0,o.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{edges:o=[],setEdges:a,hasDefaultEdges:r,onEdgesChange:i}=t.getState();if(r)a([...o,...n]);else if(i){i(n.map(e=>({item:e,type:"add"})))}},[]),p=(0,o.useCallback)(()=>{const{getNodes:e,edges:n=[],transform:o}=t.getState(),[a,r,i]=o;return{nodes:e().map(e=>u({},e)),edges:n.map(e=>u({},e)),viewport:{x:a,y:r,zoom:i}}},[]),f=(0,o.useCallback)(e=>{let{nodes:n,edges:o}=e;const{nodeInternals:a,getNodes:r,edges:i,hasDefaultNodes:l,hasDefaultEdges:s,onNodesDelete:c,onEdgesDelete:u,onNodesChange:d,onEdgesChange:p}=t.getState(),f=(n||[]).map(e=>e.id),m=(o||[]).map(e=>e.id),h=r().reduce((e,t)=>{const n=t.parentNode||t.parentId,o=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!==typeof t.deletable||t.deletable)&&(f.includes(t.id)||o)&&e.push(t),e},[]),g=i.filter(e=>"boolean"!==typeof e.deletable||e.deletable),v=g.filter(e=>m.includes(e.id));if(h||v){const e=nl(h,g),n=[...v,...e],o=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);if((s||l)&&(s&&t.setState({edges:i.filter(e=>!o.includes(e.id))}),l&&(h.forEach(e=>{a.delete(e.id)}),t.setState({nodeInternals:new Map(a)}))),o.length>0&&(null===u||void 0===u||u(n),p&&p(o.map(e=>({id:e,type:"remove"})))),h.length>0&&(null===c||void 0===c||c(h),d)){d(h.map(e=>({id:e.id,type:"remove"})))}}},[]),m=(0,o.useCallback)(e=>{const n=mi((o=e).width)&&mi(o.height)&&mi(o.x)&&mi(o.y);var o;const a=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!a)return[null,null,n];return[n?e:pi(a),a,n]},[]),h=(0,o.useCallback)(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;const[a,r,i]=m(e);return a?(o||t.getState().getNodes()).filter(e=>{if(!i&&(e.id===r.id||!e.positionAbsolute))return!1;const t=pi(e),o=fi(t,a);return n&&o>0||o>=a.width*a.height}):[]},[]),g=(0,o.useCallback)(function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[o]=m(e);if(!o)return!1;const a=fi(o,t);return n&&a>0||a>=o.width*o.height},[]);return(0,o.useMemo)(()=>u(u({},e),{},{getNodes:n,getNode:a,getEdges:r,getEdge:i,setNodes:l,setEdges:s,addNodes:c,addEdges:d,toObject:p,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:g}),[e,n,a,r,i,l,s,c,d,p,f,h,g])}const ts={actInsideInputWithModifier:!1};const ns={position:"absolute",width:"100%",height:"100%",top:0,left:0},os=e=>({x:e.x,y:e.y,zoom:e.k}),as=(e,t)=>e.target.closest(".".concat(t)),rs=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),is=e=>{const t=e.ctrlKey&&wi()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},ls=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ss=e=>{let{onMove:t,onMoveStart:n,onMoveEnd:a,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:l=!0,panOnScroll:s=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=ji.Free,zoomOnDoubleClick:d=!0,elementsSelectable:p,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:g,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:x,noWheelClassName:w,noPanClassName:S}=e;const k=(0,o.useRef)(),C=Qr(),E=(0,o.useRef)(!1),N=(0,o.useRef)(!1),j=(0,o.useRef)(null),P=(0,o.useRef)({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:T,d3ZoomHandler:_,userSelectionActive:D}=Zr(ls,Wt),R=Ul(y),A=(0,o.useRef)(0),O=(0,o.useRef)(!1),z=(0,o.useRef)();return function(e){const t=Qr();(0,o.useEffect)(()=>{let n;const o=()=>{if(!e.current)return;const n=oi(e.current);var o,a;0!==n.height&&0!==n.width||null===(o=(a=t.getState()).onError)||void 0===o||o.call(a,"004",Hr()),t.setState({width:n.width||500,height:n.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}(j),(0,o.useEffect)(()=>{if(j.current){const e=j.current.getBoundingClientRect(),t=jr().scaleExtent([g,v]).translateExtent(h),n=po(j.current).call(t),o=yr.translate(m.x,m.y).scale(ai(m.zoom,g,v)),a=[[0,0],[e.width,e.height]],r=t.constrain()(o,a,h);t.transform(n,r),t.wheelDelta(is),C.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[r.x,r.y,r.k],domNode:j.current.closest(".react-flow")})}},[]),(0,o.useEffect)(()=>{T&&M&&(!s||R||D?"undefined"!==typeof _&&T.on("wheel.zoom",function(e,t){if(!b&&"wheel"===e.type&&!e.ctrlKey||as(e,w))return null;e.preventDefault(),_.call(this,e,t)},{passive:!1}):T.on("wheel.zoom",e=>{if(as(e,w))return!1;e.preventDefault(),e.stopImmediatePropagation();const o=T.property("__zoom").k||1;if(e.ctrlKey&&l){const t=wo(e),n=is(e),a=o*Math.pow(2,n);return void M.scaleTo(T,a,t,e)}const r=1===e.deltaMode?20:1;let i=u===ji.Vertical?0:e.deltaX*r,s=u===ji.Horizontal?0:e.deltaY*r;!wi()&&e.shiftKey&&u!==ji.Vertical&&(i=e.deltaY*r,s=0),M.translateBy(T,-i/o*c,-s/o*c,{internal:!0});const d=os(T.property("__zoom")),{onViewportChangeStart:p,onViewportChange:f,onViewportChangeEnd:m}=C.getState();clearTimeout(z.current),O.current||(O.current=!0,null===n||void 0===n||n(e,d),null===p||void 0===p||p(d)),O.current&&(null===t||void 0===t||t(e,d),null===f||void 0===f||f(d),z.current=setTimeout(()=>{null===a||void 0===a||a(e,d),null===m||void 0===m||m(d),O.current=!1},150))},{passive:!1}))},[D,s,u,T,M,_,R,l,b,w,n,t,a]),(0,o.useEffect)(()=>{M&&M.on("start",e=>{var t,o;if(!e.sourceEvent||e.sourceEvent.internal)return null;A.current=null===(t=e.sourceEvent)||void 0===t?void 0:t.button;const{onViewportChangeStart:a}=C.getState(),r=os(e.transform);E.current=!0,P.current=r,"mousedown"===(null===(o=e.sourceEvent)||void 0===o?void 0:o.type)&&C.setState({paneDragging:!0}),null===a||void 0===a||a(r),null===n||void 0===n||n(e.sourceEvent,r)})},[M,n]),(0,o.useEffect)(()=>{M&&(D&&!E.current?M.on("zoom",null):D||M.on("zoom",e=>{var n,o;const{onViewportChange:a}=C.getState();if(C.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),N.current=!(!r||!rs(f,null!==(n=A.current)&&void 0!==n?n:0)),(t||a)&&(null===(o=e.sourceEvent)||void 0===o||!o.internal)){const n=os(e.transform);null===a||void 0===a||a(n),null===t||void 0===t||t(e.sourceEvent,n)}}))},[D,M,t,f,r]),(0,o.useEffect)(()=>{M&&M.on("end",e=>{var t;if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:n}=C.getState();if(E.current=!1,C.setState({paneDragging:!1}),r&&rs(f,null!==(t=A.current)&&void 0!==t?t:0)&&!N.current&&r(e.sourceEvent),N.current=!1,(a||n)&&(o=P.current,i=e.transform,o.x!==i.x||o.y!==i.y||o.zoom!==i.k)){const t=os(e.transform);P.current=t,clearTimeout(k.current),k.current=setTimeout(()=>{null===n||void 0===n||n(t),null===a||void 0===a||a(e.sourceEvent,t)},s?150:0)}var o,i})},[M,s,f,a,r]),(0,o.useEffect)(()=>{M&&M.filter(e=>{const t=R||i,n=l&&e.ctrlKey;if((!0===f||Array.isArray(f)&&f.includes(1))&&1===e.button&&"mousedown"===e.type&&(as(e,"react-flow__node")||as(e,"react-flow__edge")))return!0;if(!f&&!t&&!s&&!d&&!l)return!1;if(D)return!1;if(!d&&"dblclick"===e.type)return!1;if(as(e,w)&&"wheel"===e.type)return!1;if(as(e,S)&&("wheel"!==e.type||s&&"wheel"===e.type&&!R))return!1;if(!l&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!s&&!n&&"wheel"===e.type)return!1;if(!f&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(f)&&!f.includes(e.button)&&"mousedown"===e.type)return!1;const o=Array.isArray(f)&&f.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&o})},[D,M,i,l,s,d,f,p,R]),o.createElement("div",{className:"react-flow__renderer",ref:j,style:ns},x)},cs=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function us(){const{userSelectionActive:e,userSelectionRect:t}=Zr(cs,Wt);return e&&t?o.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}function ds(e,t){const n=t.parentNode||t.parentId,o=e.find(e=>e.id===n);if(o){const e=t.position.x+t.width-o.width,n=t.position.y+t.height-o.height;if(e>0||n>0||t.position.x<0||t.position.y<0){var a,r;if(o.style=u({},o.style)||{},o.style.width=null!==(a=o.style.width)&&void 0!==a?a:o.width,o.style.height=null!==(r=o.style.height)&&void 0!==r?r:o.height,e>0&&(o.style.width+=e),n>0&&(o.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);o.position.x=o.position.x-e,o.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);o.position.y=o.position.y-e,o.style.height+=e,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function ps(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);const n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{const o=e.filter(e=>e.id===n.id);if(0===o.length)return t.push(n),t;const a=u({},n);for(const e of o)if(e)switch(e.type){case"select":a.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(a.position=e.position),"undefined"!==typeof e.positionAbsolute&&(a.positionAbsolute=e.positionAbsolute),"undefined"!==typeof e.dragging&&(a.dragging=e.dragging),a.expandParent&&ds(t,a);break;case"dimensions":"undefined"!==typeof e.dimensions&&(a.width=e.dimensions.width,a.height=e.dimensions.height),"undefined"!==typeof e.updateStyle&&(a.style=u(u({},a.style||{}),e.dimensions)),"boolean"===typeof e.resizing&&(a.resizing=e.resizing),a.expandParent&&ds(t,a);break;case"remove":return t}return t.push(a),t},n)}function fs(e,t){return ps(e,t)}const ms=(e,t)=>({id:e,type:"select",selected:t});function hs(e,t){return e.reduce((e,n)=>{const o=t.includes(n.id);return!n.selected&&o?(n.selected=!0,e.push(ms(n.id,!0))):n.selected&&!o&&(n.selected=!1,e.push(ms(n.id,!1))),e},[])}const gs=(e,t)=>n=>{n.target===t.current&&(null===e||void 0===e||e(n))},vs=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ys=(0,o.memo)(e=>{let{isSelecting:t,selectionMode:n=Pi.Full,panOnDrag:a,onSelectionStart:r,onSelectionEnd:i,onPaneClick:l,onPaneContextMenu:s,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:p,onPaneMouseLeave:f,children:m}=e;const h=(0,o.useRef)(null),g=Qr(),v=(0,o.useRef)(0),y=(0,o.useRef)(0),b=(0,o.useRef)(),{userSelectionActive:x,elementsSelectable:w,dragging:S}=Zr(vs,Wt),k=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},C=e=>{null===l||void 0===l||l(e),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},E=c?e=>c(e):void 0,N=w&&(t||x);return o.createElement("div",{className:Ot(["react-flow__pane",{dragging:S,selection:t}]),onClick:N?void 0:gs(C,h),onContextMenu:gs(e=>{Array.isArray(a)&&null!==a&&void 0!==a&&a.includes(2)?e.preventDefault():null===s||void 0===s||s(e)},h),onWheel:gs(E,h),onMouseEnter:N?void 0:d,onMouseDown:N?e=>{const{resetSelectedElements:n,domNode:o}=g.getState();if(b.current=null===o||void 0===o?void 0:o.getBoundingClientRect(),!w||!t||0!==e.button||e.target!==h.current||!b.current)return;const{x:a,y:i}=xi(e,b.current);n(),g.setState({userSelectionRect:{width:0,height:0,startX:a,startY:i,x:a,y:i}}),null===r||void 0===r||r(e)}:void 0,onMouseMove:N?e=>{var o,a;const{userSelectionRect:r,nodeInternals:i,edges:l,transform:s,onNodesChange:c,onEdgesChange:d,nodeOrigin:p,getNodes:f}=g.getState();if(!t||!b.current||!r)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const m=xi(e,b.current),h=null!==(o=r.startX)&&void 0!==o?o:0,x=null!==(a=r.startY)&&void 0!==a?a:0,w=u(u({},r),{},{x:m.x<h?m.x:h,y:m.y<x?m.y:x,width:Math.abs(m.x-h),height:Math.abs(m.y-x)}),S=f(),k=tl(i,w,s,n===Pi.Partial,!0,p),C=nl(k,l).map(e=>e.id),E=k.map(e=>e.id);if(v.current!==E.length){v.current=E.length;const e=hs(S,E);e.length&&(null===c||void 0===c||c(e))}if(y.current!==C.length){y.current=C.length;const e=hs(l,C);e.length&&(null===d||void 0===d||d(e))}g.setState({userSelectionRect:w})}:p,onMouseUp:N?e=>{if(0!==e.button)return;const{userSelectionRect:t}=g.getState();!x&&t&&e.target===h.current&&(null===C||void 0===C||C(e)),g.setState({nodesSelectionActive:v.current>0}),k(),null===i||void 0===i||i(e)}:void 0,onMouseLeave:N?e=>{x&&(g.setState({nodesSelectionActive:v.current>0}),null===i||void 0===i||i(e)),k()}:f,ref:h,style:ns},m,o.createElement(us,null))});function bs(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return!!o&&(!!o.selected||bs(o,t))}function xs(e,t,n){let o=e;do{var a;if(null!==(a=o)&&void 0!==a&&a.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function ws(e,t,n,o){return Array.from(e.values()).filter(n=>(n.selected||n.id===o)&&(!n.parentNode||n.parentId||!bs(n,e))&&(n.draggable||t&&"undefined"===typeof n.draggable)).map(e=>{var t,o,a,r;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(null!==(t=null===(o=e.positionAbsolute)||void 0===o?void 0:o.x)&&void 0!==t?t:0),y:n.y-(null!==(a=null===(r=e.positionAbsolute)||void 0===r?void 0:r.y)&&void 0!==a?a:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}})}function Ss(e,t,n,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5?arguments[5]:void 0;const i=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||o);let l=i;const s=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&s&&"parent"!==e.extent){const t=n.get(s),{x:o,y:r}=Ji(t,a).positionAbsolute;l=[[e.extent[0][0]+o,e.extent[0][1]+r],[e.extent[1][0]+o,e.extent[1][1]+r]]}}else if(s&&e.width&&e.height){const t=n.get(s),{x:o,y:r}=Ji(t,a).positionAbsolute;l=t&&mi(o)&&mi(r)&&mi(t.width)&&mi(t.height)?[[o+e.width*a[0],r+e.height*a[1]],[o+t.width-e.width+e.width*a[0],r+t.height-e.height+e.height*a[1]]]:l}else null===r||void 0===r||r("005",Vr()),l=i;let c={x:0,y:0};if(s){const e=n.get(s);c=Ji(e,a).positionAbsolute}const u=l&&"parent"!==l?ri(t,l):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function ks(e){let{nodeId:t,dragItems:n,nodeInternals:o}=e;const a=n.map(e=>u(u({},o.get(e.id)),{},{position:e.position,positionAbsolute:e.positionAbsolute}));return[t?a.find(e=>e.id===t):a[0],a]}ys.displayName="Pane";const Cs=(e,t,n,o)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const r=Array.from(a),i=t.getBoundingClientRect(),l=i.width*o[0],s=i.height*o[1];return r.map(e=>{const t=e.getBoundingClientRect();return u({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-l)/n,y:(t.top-i.top-s)/n},oi(e))})};function Es(e,t,n){return void 0===n?n:o=>{const a=t().nodeInternals.get(e);a&&n(o,u({},a))}}function Ns(e){let{id:t,store:n,unselect:o=!1,nodeRef:a}=e;const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:l,nodeInternals:s,onError:c}=n.getState(),u=s.get(t);u?(n.setState({nodesSelectionActive:!1}),u.selected?(o||u.selected&&l)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var e;return null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.blur()})):r([t])):null===c||void 0===c||c("012",$r(t))}function js(e){return(t,n,o)=>null===e||void 0===e?void 0:e(t,o)}function Ps(e){let{nodeRef:t,disabled:n=!1,noDragClassName:a,handleSelector:r,nodeId:i,isSelectable:l,selectNodesOnDrag:s}=e;const c=Qr(),[d,p]=(0,o.useState)(!1),f=(0,o.useRef)([]),m=(0,o.useRef)({x:null,y:null}),h=(0,o.useRef)(0),g=(0,o.useRef)(null),v=(0,o.useRef)({x:0,y:0}),y=(0,o.useRef)(null),b=(0,o.useRef)(!1),x=(0,o.useRef)(!1),w=(0,o.useRef)(!1),S=function(){const e=Qr(),t=(0,o.useCallback)(t=>{let{sourceEvent:n}=t;const{transform:o,snapGrid:a,snapToGrid:r}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,s={x:(i-o[0])/o[2],y:(l-o[1])/o[2]};return u({xSnapped:r?a[0]*Math.round(s.x/a[0]):s.x,ySnapped:r?a[1]*Math.round(s.y/a[1]):s.y},s)},[]);return t}();return(0,o.useEffect)(()=>{if(null!==t&&void 0!==t&&t.current){const e=po(t.current),o=e=>{let{x:t,y:n}=e;const{nodeInternals:o,onNodeDrag:a,onSelectionDrag:r,updateNodePositions:l,nodeExtent:s,snapGrid:u,snapToGrid:d,nodeOrigin:h,onError:g}=c.getState();m.current={x:t,y:n};let v=!1,b={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&s){const e=el(f.current,h);b=ui(e)}if(f.current=f.current.map(e=>{const a={x:t-e.distance.x,y:n-e.distance.y};d&&(a.x=u[0]*Math.round(a.x/u[0]),a.y=u[1]*Math.round(a.y/u[1]));const r=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]];var i,l;f.current.length>1&&s&&!e.extent&&(r[0][0]=e.positionAbsolute.x-b.x+s[0][0],r[1][0]=e.positionAbsolute.x+(null!==(i=e.width)&&void 0!==i?i:0)-b.x2+s[1][0],r[0][1]=e.positionAbsolute.y-b.y+s[0][1],r[1][1]=e.positionAbsolute.y+(null!==(l=e.height)&&void 0!==l?l:0)-b.y2+s[1][1]);const c=Ss(e,a,o,r,h,g);return v=v||e.position.x!==c.position.x||e.position.y!==c.position.y,e.position=c.position,e.positionAbsolute=c.positionAbsolute,e}),!v)return;l(f.current,!0,!0),p(!0);const x=i?a:js(r);if(x&&y.current){const[e,t]=ks({nodeId:i,dragItems:f.current,nodeInternals:o});x(y.current,e,t)}},u=()=>{if(!g.current)return;const[e,t]=li(v.current,g.current);if(0!==e||0!==t){var n,a;const{transform:r,panBy:i}=c.getState();m.current.x=(null!==(n=m.current.x)&&void 0!==n?n:0)-e/r[2],m.current.y=(null!==(a=m.current.y)&&void 0!==a?a:0)-t/r[2],i({x:e,y:t})&&o(m.current)}h.current=requestAnimationFrame(u)},d=e=>{const{nodeInternals:n,multiSelectionActive:o,nodesDraggable:a,unselectNodesAndEdges:r,onNodeDragStart:u,onSelectionDragStart:d}=c.getState();x.current=!0;const p=i?u:js(d);var h;s&&l||o||!i||(null!==(h=n.get(i))&&void 0!==h&&h.selected||r());i&&l&&s&&Ns({id:i,store:c,nodeRef:t});const g=S(e);if(m.current=g,f.current=ws(n,a,g,i),p&&f.current){const[t,o]=ks({nodeId:i,dragItems:f.current,nodeInternals:n});p(e.sourceEvent,t,o)}};if(!n){const n=function(){var e,t,n,o,a=Tr,r=_r,i=Dr,l=Rr,s={},c=qt("start","drag","end"),u=0,d=0;function p(e){e.on("mousedown.drag",f).filter(l).on("touchstart.drag",g).on("touchmove.drag",v,fo).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(i,l){if(!o&&a.call(this,i,l)){var s=b(this,r.call(this,i,l),i,l,"mouse");s&&(po(i.view).on("mousemove.drag",m,mo).on("mouseup.drag",h,mo),vo(i.view),ho(i),n=!1,e=i.clientX,t=i.clientY,s("start",i))}}function m(o){if(go(o),!n){var a=o.clientX-e,r=o.clientY-t;n=a*a+r*r>d}s.mouse("drag",o)}function h(e){po(e.view).on("mousemove.drag mouseup.drag",null),yo(e.view,n),go(e),s.mouse("end",e)}function g(e,t){if(a.call(this,e,t)){var n,o,i=e.changedTouches,l=r.call(this,e,t),s=i.length;for(n=0;n<s;++n)(o=b(this,l,e,t,i[n].identifier,i[n]))&&(ho(e),o("start",e,i[n]))}}function v(e){var t,n,o=e.changedTouches,a=o.length;for(t=0;t<a;++t)(n=s[o[t].identifier])&&(go(e),n("drag",e,o[t]))}function y(e){var t,n,a=e.changedTouches,r=a.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<r;++t)(n=s[a[t].identifier])&&(ho(e),n("end",e,a[t]))}function b(e,t,n,o,a,r){var l,d,f,m=c.copy(),h=wo(r||n,t);if(null!=(f=i.call(e,new Mr("beforestart",{sourceEvent:n,target:p,identifier:a,active:u,x:h[0],y:h[1],dx:0,dy:0,dispatch:m}),o)))return l=f.x-h[0]||0,d=f.y-h[1]||0,function n(r,i,c){var g,v=h;switch(r){case"start":s[a]=n,g=u++;break;case"end":delete s[a],--u;case"drag":h=wo(c||i,t),g=u}m.call(r,e,new Mr(r,{sourceEvent:i,subject:f,target:p,identifier:a,active:g,x:h[0]+l,y:h[1]+d,dx:h[0]-v[0],dy:h[1]-v[1],dispatch:m}),o)}}return p.filter=function(e){return arguments.length?(a="function"===typeof e?e:Pr(!!e),p):a},p.container=function(e){return arguments.length?(r="function"===typeof e?e:Pr(e),p):r},p.subject=function(e){return arguments.length?(i="function"===typeof e?e:Pr(e),p):i},p.touchable=function(e){return arguments.length?(l="function"===typeof e?e:Pr(!!e),p):l},p.on=function(){var e=c.on.apply(c,arguments);return e===c?p:e},p.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,p):Math.sqrt(d)},p}().on("start",e=>{const{domNode:t,nodeDragThreshold:n}=c.getState();0===n&&d(e),w.current=!1;const o=S(e);m.current=o,g.current=(null===t||void 0===t?void 0:t.getBoundingClientRect())||null,v.current=xi(e.sourceEvent,g.current)}).on("drag",e=>{const t=S(e),{autoPanOnNodeDrag:n,nodeDragThreshold:a}=c.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&x.current&&n&&(b.current=!0,u()),!x.current){var r,i,l,s;const n=t.xSnapped-(null!==(r=null===m||void 0===m||null===(i=m.current)||void 0===i?void 0:i.x)&&void 0!==r?r:0),o=t.ySnapped-(null!==(l=null===m||void 0===m||null===(s=m.current)||void 0===s?void 0:s.y)&&void 0!==l?l:0);Math.sqrt(n*n+o*o)>a&&d(e)}(m.current.x!==t.xSnapped||m.current.y!==t.ySnapped)&&f.current&&x.current&&(y.current=e.sourceEvent,v.current=xi(e.sourceEvent,g.current),o(t))}}).on("end",e=>{if(x.current&&!w.current&&(p(!1),b.current=!1,x.current=!1,cancelAnimationFrame(h.current),f.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:o,onSelectionDragStop:a}=c.getState(),r=i?o:js(a);if(t(f.current,!1,!1),r){const[t,o]=ks({nodeId:i,dragItems:f.current,nodeInternals:n});r(e.sourceEvent,t,o)}}}).filter(e=>{const n=e.target;return!e.button&&(!a||!xs(n,".".concat(a),t))&&(!r||xs(n,r,t))});return e.call(n),()=>{e.on(".drag",null)}}e.on(".drag",null)}},[t,n,a,r,l,c,i,s,S]),d}function Ms(){const e=Qr();return(0,o.useCallback)(t=>{const{nodeInternals:n,nodeExtent:o,updateNodePositions:a,getNodes:r,snapToGrid:i,snapGrid:l,onError:s,nodesDraggable:c}=e.getState(),u=r().filter(e=>e.selected&&(e.draggable||c&&"undefined"===typeof e.draggable)),d=i?l[0]:5,p=i?l[1]:5,f=t.isShiftPressed?4:1,m=t.x*d*f,h=t.y*p*f;a(u.map(e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+m,y:e.positionAbsolute.y+h};i&&(t.x=l[0]*Math.round(t.x/l[0]),t.y=l[1]*Math.round(t.y/l[1]));const{positionAbsolute:a,position:r}=Ss(e,t,n,o,void 0,s);e.position=r,e.positionAbsolute=a}return e}),!0,!1)},[])}const Ts={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _s=e=>{const t=t=>{let{id:n,type:a,data:r,xPos:i,yPos:l,xPosOrigin:s,yPosOrigin:c,selected:d,onClick:p,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onContextMenu:g,onDoubleClick:v,style:y,className:b,isDraggable:x,isSelectable:w,isConnectable:S,isFocusable:k,selectNodesOnDrag:C,sourcePosition:E,targetPosition:N,hidden:j,resizeObserver:P,dragHandle:M,zIndex:T,isParent:_,noDragClassName:D,noPanClassName:R,initialized:A,disableKeyboardA11y:O,ariaLabel:z,rfId:F,hasHandleBounds:L}=t;const I=Qr(),B=(0,o.useRef)(null),U=(0,o.useRef)(null),H=(0,o.useRef)(E),V=(0,o.useRef)(N),W=(0,o.useRef)(a),X=w||x||p||f||m||h,Y=Ms(),K=Es(n,I.getState,f),G=Es(n,I.getState,m),$=Es(n,I.getState,h),q=Es(n,I.getState,g),Z=Es(n,I.getState,v);(0,o.useEffect)(()=>()=>{U.current&&(null===P||void 0===P||P.unobserve(U.current),U.current=null)},[]),(0,o.useEffect)(()=>{if(B.current&&!j){const e=B.current;A&&L&&U.current===e||(U.current&&(null===P||void 0===P||P.unobserve(U.current)),null===P||void 0===P||P.observe(e),U.current=e)}},[j,A,L]),(0,o.useEffect)(()=>{const e=W.current!==a,t=H.current!==E,o=V.current!==N;B.current&&(e||t||o)&&(e&&(W.current=a),t&&(H.current=E),o&&(V.current=N),I.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,a,E,N]);const Q=Ps({nodeRef:B,disabled:j||!x,noDragClassName:D,handleSelector:M,nodeId:n,isSelectable:w,selectNodesOnDrag:C});return j?null:o.createElement("div",{className:Ot(["react-flow__node","react-flow__node-".concat(a),{[R]:x},b,{selected:d,selectable:w,parent:_,dragging:Q}]),ref:B,style:u({zIndex:T,transform:"translate(".concat(s,"px,").concat(c,"px)"),pointerEvents:X?"all":"none",visibility:A?"visible":"hidden"},y),"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:K,onMouseMove:G,onMouseLeave:$,onContextMenu:q,onClick:e=>{const{nodeDragThreshold:t}=I.getState();if(w&&(!C||!x||t>0)&&Ns({id:n,store:I,nodeRef:B}),p){const t=I.getState().nodeInternals.get(n);t&&p(e,u({},t))}},onDoubleClick:Z,onKeyDown:k?e=>{if(!yi(e)&&!O)if(gi.includes(e.key)&&w){const t="Escape"===e.key;Ns({id:n,store:I,unselect:t,nodeRef:B})}else x&&d&&Object.prototype.hasOwnProperty.call(Ts,e.key)&&(I.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~i,", y: ").concat(~~l)}),Y({x:Ts[e.key].x,y:Ts[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":O?void 0:"".concat(zl,"-").concat(F),"aria-label":z},o.createElement(Ki,{value:n},o.createElement(e,{id:n,data:r,type:a,xPos:i,yPos:l,selected:d,isConnectable:S,sourcePosition:E,targetPosition:N,dragging:Q,dragHandle:M,zIndex:T})))};return t.displayName="NodeWrapper",(0,o.memo)(t)};const Ds=e=>{const t=e.getNodes().filter(e=>e.selected);return u(u({},el(t,e.nodeOrigin)),{},{transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive})};var Rs=(0,o.memo)(function(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:a}=e;const r=Qr(),{width:i,height:l,x:s,y:c,transformString:u,userSelectionActive:d}=Zr(Ds,Wt),p=Ms(),f=(0,o.useRef)(null);if((0,o.useEffect)(()=>{var e;a||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))},[a]),Ps({nodeRef:f}),d||!i||!l)return null;const m=t?e=>{const n=r.getState().getNodes().filter(e=>e.selected);t(e,n)}:void 0;return o.createElement("div",{className:Ot(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u}},o.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:a?void 0:-1,onKeyDown:a?void 0:e=>{Object.prototype.hasOwnProperty.call(Ts,e.key)&&p({x:Ts[e.key].x,y:Ts[e.key].y,isShiftPressed:e.shiftKey})},style:{width:i,height:l,top:c,left:s}}))});const As=e=>e.nodesSelectionActive,Os=e=>{let{children:t,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:s,deleteKeyCode:c,onMove:u,onMoveStart:d,onMoveEnd:p,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:b,zoomActivationKeyCode:x,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:k,panOnScroll:C,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:P,defaultViewport:M,translateExtent:T,minZoom:_,maxZoom:D,preventScrolling:R,onSelectionContextMenu:A,noWheelClassName:O,noPanClassName:z,disableKeyboardA11y:F}=e;const L=Zr(As),I=Ul(f),B=Ul(b),U=B||P,H=B||C,V=I||m&&!0!==U;return(e=>{let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const a=Qr(),{deleteElements:r}=es(),i=Ul(t,ts),l=Ul(n);(0,o.useEffect)(()=>{if(i){const{edges:e,getNodes:t}=a.getState(),n=t().filter(e=>e.selected),o=e.filter(e=>e.selected);r({nodes:n,edges:o}),a.setState({nodesSelectionActive:!1})}},[i]),(0,o.useEffect)(()=>{a.setState({multiSelectionActive:l})},[l])})({deleteKeyCode:c,multiSelectionKeyCode:y}),o.createElement(ss,{onMove:u,onMoveStart:d,onMoveEnd:p,onPaneContextMenu:l,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:k,panOnScroll:H,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:!I&&U,defaultViewport:M,translateExtent:T,minZoom:_,maxZoom:D,zoomActivationKeyCode:x,preventScrolling:R,noWheelClassName:O,noPanClassName:z},o.createElement(ys,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:s,panOnDrag:U,isSelecting:!!V,selectionMode:h},t,L&&o.createElement(Rs,{onSelectionContextMenu:A,noPanClassName:z,disableKeyboardA11y:F})))};Os.displayName="FlowRenderer";var zs=(0,o.memo)(Os);function Fs(e){const t={input:_s(e.input||xl),default:_s(e.default||yl),output:_s(e.output||Sl),group:_s(e.group||kl)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=_s(e[n]||yl),t),{});return u(u({},t),n)}const Ls=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Is=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:a,elementsSelectable:r,updateNodeDimensions:i,onError:l}=Zr(Ls,Wt),s=(c=e.onlyRenderVisibleElements,Zr((0,o.useCallback)(e=>c?tl(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[c])));var c;const u=(0,o.useRef)(),d=(0,o.useMemo)(()=>{if("undefined"===typeof ResizeObserver)return null;const e=new ResizeObserver(e=>{const t=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));i(t)});return u.current=e,e},[]);return(0,o.useEffect)(()=>()=>{var e;null===u||void 0===u||null===(e=u.current)||void 0===e||e.disconnect()},[]),o.createElement("div",{className:"react-flow__nodes",style:ns},s.map(i=>{var s,c,u,p,f,m,h,g;let v=i.type||"default";e.nodeTypes[v]||(null===l||void 0===l||l("003",Ur(v)),v="default");const y=e.nodeTypes[v]||e.nodeTypes.default,b=!!(i.draggable||t&&"undefined"===typeof i.draggable),x=!!(i.selectable||r&&"undefined"===typeof i.selectable),w=!!(i.connectable||n&&"undefined"===typeof i.connectable),S=!!(i.focusable||a&&"undefined"===typeof i.focusable),k=e.nodeExtent?ri(i.positionAbsolute,e.nodeExtent):i.positionAbsolute,C=null!==(s=null===k||void 0===k?void 0:k.x)&&void 0!==s?s:0,E=null!==(c=null===k||void 0===k?void 0:k.y)&&void 0!==c?c:0,N=(e=>{let{x:t,y:n,width:o,height:a,origin:r}=e;return o&&a?r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:n}:{x:t-o*r[0],y:n-a*r[1]}:{x:t,y:n}})({x:C,y:E,width:null!==(u=i.width)&&void 0!==u?u:0,height:null!==(p=i.height)&&void 0!==p?p:0,origin:e.nodeOrigin});return o.createElement(y,{key:i.id,id:i.id,className:i.className,style:i.style,type:v,data:i.data,sourcePosition:i.sourcePosition||_i.Bottom,targetPosition:i.targetPosition||_i.Top,hidden:i.hidden,xPos:C,yPos:E,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!i.selected,isDraggable:b,isSelectable:x,isConnectable:w,isFocusable:S,resizeObserver:d,dragHandle:i.dragHandle,zIndex:null!==(f=null===(m=i[hi])||void 0===m?void 0:m.z)&&void 0!==f?f:0,isParent:!(null===(h=i[hi])||void 0===h||!h.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!i.width&&!!i.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:i.ariaLabel,hasHandleBounds:!(null===(g=i[hi])||void 0===g||!g.handleBounds)})}))};Is.displayName="NodeRenderer";var Bs=(0,o.memo)(Is);const Us=(e,t,n)=>n===_i.Left?e-t:n===_i.Right?e+t:e,Hs=(e,t,n)=>n===_i.Top?e-t:n===_i.Bottom?e+t:e,Vs="react-flow__edgeupdater",Ws=e=>{let{position:t,centerX:n,centerY:a,radius:r=10,onMouseDown:i,onMouseEnter:l,onMouseOut:s,type:c}=e;return o.createElement("circle",{onMouseDown:i,onMouseEnter:l,onMouseOut:s,className:Ot([Vs,"".concat(Vs,"-").concat(c)]),cx:Us(n,r,t),cy:Hs(a,r,t),r:r,stroke:"transparent",fill:"transparent"})},Xs=()=>!0;var Ys=e=>{const t=t=>{let{id:n,className:a,type:r,data:i,onClick:l,onEdgeDoubleClick:s,selected:c,animated:u,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:g,style:v,source:y,target:b,sourceX:x,sourceY:w,targetX:S,targetY:k,sourcePosition:C,targetPosition:E,elementsSelectable:N,hidden:j,sourceHandleId:P,targetHandleId:M,onContextMenu:T,onMouseEnter:_,onMouseMove:D,onMouseLeave:R,reconnectRadius:A,onReconnect:O,onReconnectStart:z,onReconnectEnd:F,markerEnd:L,markerStart:I,rfId:B,ariaLabel:U,isFocusable:H,isReconnectable:V,pathOptions:W,interactionWidth:X,disableKeyboardA11y:Y}=t;const K=(0,o.useRef)(null),[G,$]=(0,o.useState)(!1),[q,Z]=(0,o.useState)(!1),Q=Qr(),J=(0,o.useMemo)(()=>"url('#".concat($i(I,B),"')"),[I,B]),ee=(0,o.useMemo)(()=>"url('#".concat($i(L,B),"')"),[L,B]);if(j)return null;const te=ki(n,Q.getState,s),ne=ki(n,Q.getState,T),oe=ki(n,Q.getState,_),ae=ki(n,Q.getState,D),re=ki(n,Q.getState,R),ie=(e,t)=>{if(0!==e.button)return;const{edges:o,isValidConnection:a}=Q.getState(),r=t?b:y,i=(t?M:P)||null,l=t?"target":"source",s=a||Xs,c=t,u=o.find(e=>e.id===n);Z(!0),null===z||void 0===z||z(e,u,l);pl({event:e,handleId:i,nodeId:r,onConnect:e=>null===O||void 0===O?void 0:O(u,e),isTarget:c,getState:Q.getState,setState:Q.setState,isValidConnection:s,edgeUpdaterType:l,onReconnectEnd:e=>{Z(!1),null===F||void 0===F||F(e,u,l)}})},le=()=>$(!0),se=()=>$(!1),ce=!N&&!l;return o.createElement("g",{className:Ot(["react-flow__edge","react-flow__edge-".concat(r),a,{selected:c,animated:u,inactive:ce,updating:G}]),onClick:e=>{const{edges:t,addSelectedEdges:o,unselectNodesAndEdges:a,multiSelectionActive:r}=Q.getState(),i=t.find(e=>e.id===n);if(i){var s;if(N)if(Q.setState({nodesSelectionActive:!1}),i.selected&&r)a({nodes:[],edges:[i]}),null===(s=K.current)||void 0===s||s.blur();else o([n]);l&&l(e,i)}},onDoubleClick:te,onContextMenu:ne,onMouseEnter:oe,onMouseMove:ae,onMouseLeave:re,onKeyDown:H?e=>{if(!Y&&gi.includes(e.key)&&N){const{unselectNodesAndEdges:o,addSelectedEdges:a,edges:r}=Q.getState();var t;if("Escape"===e.key)null===(t=K.current)||void 0===t||t.blur(),o({edges:[r.find(e=>e.id===n)]});else a([n])}}:void 0,tabIndex:H?0:void 0,role:H?"button":"img","data-testid":"rf__edge-".concat(n),"aria-label":null===U?void 0:U||"Edge from ".concat(y," to ").concat(b),"aria-describedby":H?"".concat(Fl,"-").concat(B):void 0,ref:K},!q&&o.createElement(e,{id:n,source:y,target:b,selected:c,animated:u,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:g,data:i,style:v,sourceX:x,sourceY:w,targetX:S,targetY:k,sourcePosition:C,targetPosition:E,sourceHandleId:P,targetHandleId:M,markerStart:J,markerEnd:ee,pathOptions:W,interactionWidth:X}),V&&o.createElement(o.Fragment,null,("source"===V||!0===V)&&o.createElement(Ws,{position:C,centerX:x,centerY:w,radius:A,onMouseDown:e=>ie(e,!0),onMouseEnter:le,onMouseOut:se,type:"source"}),("target"===V||!0===V)&&o.createElement(Ws,{position:E,centerX:S,centerY:k,radius:A,onMouseDown:e=>ie(e,!1),onMouseEnter:le,onMouseOut:se,type:"target"})))};return t.displayName="EdgeWrapper",(0,o.memo)(t)};function Ks(e){const t={default:Ys(e.default||Xi),straight:Ys(e.bezier||Ui),step:Ys(e.step||Bi),smoothstep:Ys(e.step||Ii),simplebezier:Ys(e.simplebezier||Ai)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=Ys(e[n]||Xi),t),{});return u(u({},t),n)}function Gs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=((null===n||void 0===n?void 0:n.x)||0)+t.x,a=((null===n||void 0===n?void 0:n.y)||0)+t.y,r=(null===n||void 0===n?void 0:n.width)||t.width,i=(null===n||void 0===n?void 0:n.height)||t.height;switch(e){case _i.Top:return{x:o+r/2,y:a};case _i.Right:return{x:o+r,y:a+i/2};case _i.Bottom:return{x:o+r/2,y:a+i};case _i.Left:return{x:o,y:a+i/2}}}function $s(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function qs(e){var t,n,o,a,r;const i=(null===e||void 0===e||null===(t=e[hi])||void 0===t?void 0:t.handleBounds)||null,l=i&&(null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height)&&"undefined"!==typeof(null===e||void 0===e||null===(n=e.positionAbsolute)||void 0===n?void 0:n.x)&&"undefined"!==typeof(null===e||void 0===e||null===(o=e.positionAbsolute)||void 0===o?void 0:o.y);return[{x:(null===e||void 0===e||null===(a=e.positionAbsolute)||void 0===a?void 0:a.x)||0,y:(null===e||void 0===e||null===(r=e.positionAbsolute)||void 0===r?void 0:r.y)||0,width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0},i,!!l]}const Zs=[{level:0,isMaxLevel:!0,edges:[]}];function Qs(e,t,n){const a=Zr((0,o.useCallback)(n=>e?n.edges.filter(e=>{const o=t.get(e.source),a=t.get(e.target);return(null===o||void 0===o?void 0:o.width)&&(null===o||void 0===o?void 0:o.height)&&(null===a||void 0===a?void 0:a.width)&&(null===a||void 0===a?void 0:a.height)&&function(e){let{sourcePos:t,targetPos:n,sourceWidth:o,sourceHeight:a,targetWidth:r,targetHeight:i,width:l,height:s,transform:c}=e;const u={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+r),y2:Math.max(t.y+a,n.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=ui({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:l/c[2],height:s/c[2]}),p=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),f=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(p*f)>0}({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1;const a=e.reduce((e,a)=>{const r=mi(a.zIndex);let i=r?a.zIndex:0;if(n){var l,s;const e=t.get(a.target),n=t.get(a.source),o=a.selected||(null===e||void 0===e?void 0:e.selected)||(null===n||void 0===n?void 0:n.selected),c=Math.max((null===n||void 0===n||null===(l=n[hi])||void 0===l?void 0:l.z)||0,(null===e||void 0===e||null===(s=e[hi])||void 0===s?void 0:s.z)||0,1e3);i=(r?a.zIndex:0)+(o?c:0)}return e[i]?e[i].push(a):e[i]=[a],o=i>o?i:o,e},{}),r=Object.entries(a).map(e=>{let[t,n]=e;const a=+t;return{edges:n,level:a,isMaxLevel:a===o}});return 0===r.length?Zs:r}(a,t,n)}const Js={[Ti.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return o.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[Ti.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return o.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const ec=e=>{let{id:t,type:n,color:a,width:r=12.5,height:i=12.5,markerUnits:l="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"}=e;const u=function(e){const t=Qr();return(0,o.useMemo)(()=>{var n,o;return Object.prototype.hasOwnProperty.call(Js,e)?Js[e]:(null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"009",Xr(e)),null)},[e])}(n);return u?o.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(r),markerHeight:"".concat(i),viewBox:"-10 -10 20 20",markerUnits:l,orient:c,refX:"0",refY:"0"},o.createElement(u,{color:a,strokeWidth:s})):null},tc=e=>{let{defaultColor:t,rfId:n}=e;const a=Zr((0,o.useCallback)((e=>{let{defaultColor:t,rfId:n}=e;return e=>{const o=[];return e.edges.reduce((e,a)=>([a.markerStart,a.markerEnd].forEach(a=>{if(a&&"object"===typeof a){const r=$i(a,n);o.includes(r)||(e.push(u({id:r,color:a.color||t},a)),o.push(r))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}})({defaultColor:t,rfId:n}),[t,n]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return o.createElement("defs",null,a.map(e=>o.createElement(ec,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};tc.displayName="MarkerDefinitions";var nc=(0,o.memo)(tc);const oc=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ac=e=>{let{defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:a,rfId:r,edgeTypes:i,noPanClassName:l,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:p,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:v,children:y,disableKeyboardA11y:b}=e;const{edgesFocusable:x,edgesUpdatable:w,elementsSelectable:S,width:k,height:C,connectionMode:E,nodeInternals:N,onError:j}=Zr(oc,Wt),P=Qs(n,N,a);return k?o.createElement(o.Fragment,null,P.map(e=>{let{level:n,edges:a,isMaxLevel:y}=e;return o.createElement("svg",{key:n,style:{zIndex:n},width:k,height:C,className:"react-flow__edges react-flow__container"},y&&o.createElement(nc,{defaultColor:t,rfId:r}),o.createElement("g",null,a.map(e=>{var t,n;const[a,y,k]=qs(N.get(e.source)),[C,P,M]=qs(N.get(e.target));if(!k||!M)return null;let T=e.type||"default";i[T]||(null===j||void 0===j||j("011",Gr(T)),T="default");const _=i[T]||i.default,D=E===Ni.Strict?P.target:(null!==(t=P.target)&&void 0!==t?t:[]).concat(null!==(n=P.source)&&void 0!==n?n:[]),R=$s(y.source,e.sourceHandle),A=$s(D,e.targetHandle),O=(null===R||void 0===R?void 0:R.position)||_i.Bottom,z=(null===A||void 0===A?void 0:A.position)||_i.Top,F=!!(e.focusable||x&&"undefined"===typeof e.focusable),L=e.reconnectable||e.updatable,I="undefined"!==typeof m&&(L||w&&"undefined"===typeof L);if(!R||!A)return null===j||void 0===j||j("008",Yr(R,e)),null;const{sourceX:B,sourceY:U,targetX:H,targetY:V}=((e,t,n,o,a,r)=>{const i=Gs(n,e,t),l=Gs(r,o,a);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}})(a,R,O,C,A,z);return o.createElement(_,{key:e.id,id:e.id,className:Ot([e.className,l]),type:T,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:B,sourceY:U,targetX:H,targetY:V,sourcePosition:O,targetPosition:z,elementsSelectable:S,onContextMenu:s,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:p,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:v,rfId:r,ariaLabel:e.ariaLabel,isFocusable:F,isReconnectable:I,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:b})})))}),y):null};ac.displayName="EdgeRenderer";var rc=(0,o.memo)(ac);const ic=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function lc(e){let{children:t}=e;const n=Zr(ic);return o.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}const sc={[_i.Left]:_i.Right,[_i.Right]:_i.Left,[_i.Top]:_i.Bottom,[_i.Bottom]:_i.Top},cc=e=>{var t,n,a,r,i,l,s;let{nodeId:c,handleType:d,style:p,type:f=Mi.Bezier,CustomComponent:m,connectionStatus:h}=e;const{fromNode:g,handleId:v,toX:y,toY:b,connectionMode:x}=Zr((0,o.useCallback)(e=>({fromNode:e.nodeInternals.get(c),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[c]),Wt),w=null===g||void 0===g||null===(t=g[hi])||void 0===t?void 0:t.handleBounds;let S=null===w||void 0===w?void 0:w[d];if(x===Ni.Loose&&(S=S||(null===w||void 0===w?void 0:w["source"===d?"target":"source"])),!g||!S)return null;const k=v?S.find(e=>e.id===v):S[0],C=k?k.x+k.width/2:(null!==(n=g.width)&&void 0!==n?n:0)/2,E=k?k.y+k.height/2:null!==(a=g.height)&&void 0!==a?a:0,N=(null!==(r=null===(i=g.positionAbsolute)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+C,j=(null!==(l=null===(s=g.positionAbsolute)||void 0===s?void 0:s.y)&&void 0!==l?l:0)+E,P=null===k||void 0===k?void 0:k.position,M=P?sc[P]:null;if(!P||!M)return null;if(m)return o.createElement(m,{connectionLineType:f,connectionLineStyle:p,fromNode:g,fromHandle:k,fromX:N,fromY:j,toX:y,toY:b,fromPosition:P,toPosition:M,connectionStatus:h});let T="";const _={sourceX:N,sourceY:j,sourcePosition:P,targetX:y,targetY:b,targetPosition:M};return f===Mi.Bezier?[T]=Wi(_):f===Mi.Step?[T]=Li(u(u({},_),{},{borderRadius:0})):f===Mi.SmoothStep?[T]=Li(_):f===Mi.SimpleBezier?[T]=Ri(_):T="M".concat(N,",").concat(j," ").concat(y,",").concat(b),o.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:p})};cc.displayName="ConnectionLine";const uc=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function dc(e){let{containerStyle:t,style:n,type:a,component:r}=e;const{nodeId:i,handleType:l,nodesConnectable:s,width:c,height:u,connectionStatus:d}=Zr(uc,Wt);return!!(i&&l&&c&&s)?o.createElement("svg",{style:t,width:c,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},o.createElement("g",{className:Ot(["react-flow__connection",d])},o.createElement(cc,{nodeId:i,handleType:l,style:n,type:a,CustomComponent:r,connectionStatus:d}))):null}function pc(e,t){(0,o.useRef)(null),Qr();return(0,o.useMemo)(()=>t(e),[e])}const fc=e=>{let{nodeTypes:t,edgeTypes:n,onMove:a,onMoveStart:r,onMoveEnd:i,onInit:l,onNodeClick:s,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:x,connectionLineComponent:w,connectionLineContainerStyle:S,selectionKeyCode:k,selectionOnDrag:C,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:P,deleteKeyCode:M,onlyRenderVisibleElements:T,elementsSelectable:_,selectNodesOnDrag:D,defaultViewport:R,translateExtent:A,minZoom:O,maxZoom:z,preventScrolling:F,defaultMarkerColor:L,zoomOnScroll:I,zoomOnPinch:B,panOnScroll:U,panOnScrollSpeed:H,panOnScrollMode:V,zoomOnDoubleClick:W,panOnDrag:X,onPaneClick:Y,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:$,onPaneScroll:q,onPaneContextMenu:Z,onEdgeContextMenu:Q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:oe,onReconnectEnd:ae,reconnectRadius:re,noDragClassName:ie,noWheelClassName:le,noPanClassName:se,elevateEdgesOnSelect:ce,disableKeyboardA11y:ue,nodeOrigin:de,nodeExtent:pe,rfId:fe}=e;const me=pc(t,Fs),he=pc(n,Ks);return function(e){const t=es(),n=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(l),o.createElement(zs,{onPaneClick:Y,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:$,onPaneContextMenu:Z,onPaneScroll:q,deleteKeyCode:M,selectionKeyCode:k,selectionOnDrag:C,selectionMode:E,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:P,elementsSelectable:_,onMove:a,onMoveStart:r,onMoveEnd:i,zoomOnScroll:I,zoomOnPinch:B,zoomOnDoubleClick:W,panOnScroll:U,panOnScrollSpeed:H,panOnScrollMode:V,panOnDrag:X,defaultViewport:R,translateExtent:A,minZoom:O,maxZoom:z,onSelectionContextMenu:g,preventScrolling:F,noDragClassName:ie,noWheelClassName:le,noPanClassName:se,disableKeyboardA11y:ue},o.createElement(lc,null,o.createElement(rc,{edgeTypes:he,onEdgeClick:c,onEdgeDoubleClick:d,onlyRenderVisibleElements:T,onEdgeContextMenu:Q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:oe,onReconnectEnd:ae,reconnectRadius:re,defaultMarkerColor:L,noPanClassName:se,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:ue,rfId:fe},o.createElement(dc,{style:x,type:b,component:w,containerStyle:S})),o.createElement("div",{className:"react-flow__edgelabel-renderer"}),o.createElement(Bs,{nodeTypes:me,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:p,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:D,onlyRenderVisibleElements:T,noPanClassName:se,noDragClassName:ie,disableKeyboardA11y:ue,nodeOrigin:de,nodeExtent:pe,rfId:fe})))};fc.displayName="GraphView";var mc=(0,o.memo)(fc);const hc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gc={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hc,nodeExtent:hc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ni.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:vi,isValidConnection:void 0},vc=()=>{return e=(e,t)=>u(u({},gc),{},{setNodes:n=>{const{nodeInternals:o,nodeOrigin:a,elevateNodesOnSelect:r}=t();e({nodeInternals:Yl(n,o,a,r)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(e=>u(u({},o),e))})},setDefaultNodesAndEdges:(n,o)=>{const a="undefined"!==typeof n,r="undefined"!==typeof o,i=a?Yl(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:r?o:[],hasDefaultNodes:a,hasDefaultEdges:r})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:a,fitViewOnInit:r,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:s,nodeOrigin:c}=t(),d=null===s||void 0===s?void 0:s.querySelector(".react-flow__viewport");if(!d)return;const p=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(p.transform),m=n.reduce((e,t)=>{const n=a.get(t.id);if(null!==n&&void 0!==n&&n.hidden)a.set(n.id,u(u({},n),{},{[hi]:u(u({},n[hi]),{},{handleBounds:void 0})}));else if(n){const o=oi(t.nodeElement);o.width&&o.height&&(n.width!==o.width||n.height!==o.height||t.forceUpdate)&&(a.set(n.id,u(u({},n),{},{[hi]:u(u({},n[hi]),{},{handleBounds:{source:Cs(".source",t.nodeElement,f,c),target:Cs(".target",t.nodeElement,f,c)}})},o)),e.push({id:n.id,type:"dimensions",dimensions:o}))}return e},[]);Xl(a,c);const h=i||r&&!i&&Kl(t,u({initial:!0},l));e({nodeInternals:new Map(a),fitViewOnInitDone:h}),(null===m||void 0===m?void 0:m.length)>0&&(null===o||void 0===o||o(m))},updateNodePositions:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{triggerNodeChanges:a}=t(),r=e.map(e=>{const t={id:e.id,type:"position",dragging:o};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t});a(r)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:a,hasDefaultNodes:r,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:s}=t();if(null!==n&&void 0!==n&&n.length){if(r){const t=Yl(fs(n,l()),a,i,s);e({nodeInternals:t})}null===o||void 0===o||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:a,getNodes:r}=t();let i,l=null;o?i=n.map(e=>ms(e,!0)):(i=hs(r(),n),l=hs(a,[])),ql({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:a,getNodes:r}=t();let i,l=null;o?i=n.map(e=>ms(e,!0)):(i=hs(a,n),l=hs(r(),[])),ql({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:function(){let{nodes:n,edges:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:a,getNodes:r}=t(),i=o||a;ql({changedNodes:(n||r()).map(e=>(e.selected=!1,ms(e.id,!1))),changedEdges:i.map(e=>ms(e.id,!1)),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:a}=t();null===o||void 0===o||o.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:a}=t();null===o||void 0===o||o.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;null===(o=t().d3Zoom)||void 0===o||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t();ql({changedNodes:o().filter(e=>e.selected).map(e=>ms(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>ms(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(e=>{e.positionAbsolute=ri(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:e=>{const{transform:n,width:o,height:a,d3Zoom:r,d3Selection:i,translateExtent:l}=t();if(!r||!i||!e.x&&!e.y)return!1;const s=yr.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[o,a]],u=null===r||void 0===r?void 0:r.constrain()(s,c,l);return r.transform(i,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:gc.connectionNodeId,connectionHandleId:gc.connectionHandleId,connectionHandleType:gc.connectionHandleType,connectionStatus:gc.connectionStatus,connectionStartHandle:gc.connectionStartHandle,connectionEndHandle:gc.connectionEndHandle}),reset:()=>e(u({},gc))}),t=Object.is,e?Vt(e,t):Vt;var e,t},yc=e=>{let{children:t}=e;const n=(0,o.useRef)(null);return n.current||(n.current=vc()),o.createElement(Br,{value:n.current},t)};yc.displayName="ReactFlowProvider";const bc=e=>{let{children:t}=e;return(0,o.useContext)(Ir)?o.createElement(o.Fragment,null,t):o.createElement(yc,null,t)};bc.displayName="ReactFlowWrapper";const xc={input:xl,default:yl,output:Sl,group:kl},wc={default:Xi,straight:Ui,step:Bi,smoothstep:Ii,simplebezier:Ai},Sc=[0,0],kc=[15,15],Cc={x:0,y:0,zoom:1},Ec={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Nc=(0,o.forwardRef)((e,t)=>{let{nodes:n,edges:a,defaultNodes:i,defaultEdges:l,className:s,nodeTypes:c=xc,edgeTypes:d=wc,onNodeClick:p,onEdgeClick:f,onInit:m,onMove:h,onMoveStart:g,onMoveEnd:v,onConnect:y,onConnectStart:b,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:S,onNodeMouseEnter:k,onNodeMouseMove:C,onNodeMouseLeave:E,onNodeContextMenu:N,onNodeDoubleClick:j,onNodeDragStart:P,onNodeDrag:M,onNodeDragStop:T,onNodesDelete:_,onEdgesDelete:D,onSelectionChange:R,onSelectionDragStart:A,onSelectionDrag:O,onSelectionDragStop:z,onSelectionContextMenu:F,onSelectionStart:L,onSelectionEnd:I,connectionMode:B=Ni.Strict,connectionLineType:U=Mi.Bezier,connectionLineStyle:H,connectionLineComponent:V,connectionLineContainerStyle:W,deleteKeyCode:X="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:K=!1,selectionMode:G=Pi.Full,panActivationKeyCode:$="Space",multiSelectionKeyCode:q=(wi()?"Meta":"Control"),zoomActivationKeyCode:Z=(wi()?"Meta":"Control"),snapToGrid:Q=!1,snapGrid:J=kc,onlyRenderVisibleElements:ee=!1,selectNodesOnDrag:te=!0,nodesDraggable:ne,nodesConnectable:oe,nodesFocusable:ae,nodeOrigin:re=Sc,edgesFocusable:ie,edgesUpdatable:le,elementsSelectable:se,defaultViewport:ce=Cc,minZoom:ue=.5,maxZoom:de=2,translateExtent:pe=hc,preventScrolling:fe=!0,nodeExtent:me,defaultMarkerColor:he="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:ve=!0,panOnScroll:ye=!1,panOnScrollSpeed:be=.5,panOnScrollMode:xe=ji.Free,zoomOnDoubleClick:we=!0,panOnDrag:Se=!0,onPaneClick:ke,onPaneMouseEnter:Ce,onPaneMouseMove:Ee,onPaneMouseLeave:Ne,onPaneScroll:je,onPaneContextMenu:Pe,children:Me,onEdgeContextMenu:Te,onEdgeDoubleClick:_e,onEdgeMouseEnter:De,onEdgeMouseMove:Re,onEdgeMouseLeave:Ae,onEdgeUpdate:Oe,onEdgeUpdateStart:ze,onEdgeUpdateEnd:Fe,onReconnect:Le,onReconnectStart:Ie,onReconnectEnd:Be,reconnectRadius:Ue=10,edgeUpdaterRadius:He=10,onNodesChange:Ve,onEdgesChange:We,noDragClassName:Xe="nodrag",noWheelClassName:Ye="nowheel",noPanClassName:Ke="nopan",fitView:Ge=!1,fitViewOptions:$e,connectOnClick:qe=!0,attributionPosition:Ze,proOptions:Qe,defaultEdgeOptions:Je,elevateNodesOnSelect:et=!0,elevateEdgesOnSelect:tt=!1,disableKeyboardA11y:nt=!1,autoPanOnConnect:ot=!0,autoPanOnNodeDrag:at=!0,connectionRadius:rt=20,isValidConnection:it,onError:lt,style:st,id:ct,nodeDragThreshold:ut}=e,dt=r(e,Lr);const pt=ct||"1";return o.createElement("div",u(u({},dt),{},{style:u(u({},st),Ec),ref:t,className:Ot(["react-flow",s]),"data-testid":"rf__wrapper",id:ct}),o.createElement(bc,null,o.createElement(mc,{onInit:m,onMove:h,onMoveStart:g,onMoveEnd:v,onNodeClick:p,onEdgeClick:f,onNodeMouseEnter:k,onNodeMouseMove:C,onNodeMouseLeave:E,onNodeContextMenu:N,onNodeDoubleClick:j,nodeTypes:c,edgeTypes:d,connectionLineType:U,connectionLineStyle:H,connectionLineComponent:V,connectionLineContainerStyle:W,selectionKeyCode:Y,selectionOnDrag:K,selectionMode:G,deleteKeyCode:X,multiSelectionKeyCode:q,panActivationKeyCode:$,zoomActivationKeyCode:Z,onlyRenderVisibleElements:ee,selectNodesOnDrag:te,defaultViewport:ce,translateExtent:pe,minZoom:ue,maxZoom:de,preventScrolling:fe,zoomOnScroll:ge,zoomOnPinch:ve,zoomOnDoubleClick:we,panOnScroll:ye,panOnScrollSpeed:be,panOnScrollMode:xe,panOnDrag:Se,onPaneClick:ke,onPaneMouseEnter:Ce,onPaneMouseMove:Ee,onPaneMouseLeave:Ne,onPaneScroll:je,onPaneContextMenu:Pe,onSelectionContextMenu:F,onSelectionStart:L,onSelectionEnd:I,onEdgeContextMenu:Te,onEdgeDoubleClick:_e,onEdgeMouseEnter:De,onEdgeMouseMove:Re,onEdgeMouseLeave:Ae,onReconnect:null!==Le&&void 0!==Le?Le:Oe,onReconnectStart:null!==Ie&&void 0!==Ie?Ie:ze,onReconnectEnd:null!==Be&&void 0!==Be?Be:Fe,reconnectRadius:null!==Ue&&void 0!==Ue?Ue:He,defaultMarkerColor:he,noDragClassName:Xe,noWheelClassName:Ye,noPanClassName:Ke,elevateEdgesOnSelect:tt,rfId:pt,disableKeyboardA11y:nt,nodeOrigin:re,nodeExtent:me}),o.createElement(Rl,{nodes:n,edges:a,defaultNodes:i,defaultEdges:l,onConnect:y,onConnectStart:b,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:S,nodesDraggable:ne,nodesConnectable:oe,nodesFocusable:ae,edgesFocusable:ie,edgesUpdatable:le,elementsSelectable:se,elevateNodesOnSelect:et,minZoom:ue,maxZoom:de,nodeExtent:me,onNodesChange:Ve,onEdgesChange:We,snapToGrid:Q,snapGrid:J,connectionMode:B,translateExtent:pe,connectOnClick:qe,defaultEdgeOptions:Je,fitView:Ge,fitViewOptions:$e,onNodesDelete:_,onEdgesDelete:D,onNodeDragStart:P,onNodeDrag:M,onNodeDragStop:T,onSelectionDrag:O,onSelectionDragStart:A,onSelectionDragStop:z,noPanClassName:Ke,nodeOrigin:re,rfId:pt,autoPanOnConnect:ot,autoPanOnNodeDrag:at,onError:lt,connectionRadius:rt,isValidConnection:it,nodeDragThreshold:ut}),o.createElement(Ml,{onSelectionChange:R}),Me,o.createElement(ti,{proOptions:Qe,position:Ze}),o.createElement(Bl,{rfId:pt,disableKeyboardA11y:nt})))});Nc.displayName="ReactFlow";const jc=e=>{var t;return null===(t=e.domNode)||void 0===t?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Pc(e){let{children:t}=e;const n=Zr(jc);return n?(0,Ar.createPortal)(t,n):null}function Mc(e){return t=>{const[n,a]=(0,o.useState)(t),r=(0,o.useCallback)(t=>a(n=>e(t,n)),[]);return[n,a,r]}}const Tc=Mc(fs),_c=Mc(function(e,t){return ps(e,t)});const Dc=e=>{let{id:t,x:n,y:a,width:r,height:i,style:l,color:s,strokeColor:c,strokeWidth:u,className:d,borderRadius:p,shapeRendering:f,onClick:m,selected:h}=e;const{background:g,backgroundColor:v}=l||{},y=s||g||v;return o.createElement("rect",{className:Ot(["react-flow__minimap-node",{selected:h},d]),x:n,y:a,rx:p,ry:p,width:r,height:i,fill:y,stroke:c,strokeWidth:u,shapeRendering:f,onClick:m?e=>m(e,t):void 0})};Dc.displayName="MiniMapNode";var Rc=(0,o.memo)(Dc);const Ac=e=>e.nodeOrigin,Oc=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),zc=e=>e instanceof Function?e:()=>e;var Fc=(0,o.memo)(function(e){let{nodeStrokeColor:t="transparent",nodeColor:n="#e2e2e2",nodeClassName:a="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:l=Rc,onClick:s}=e;const c=Zr(Oc,Wt),u=Zr(Ac),d=zc(n),p=zc(t),f=zc(a),m="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return o.createElement(o.Fragment,null,c.map(e=>{const{x:t,y:n}=Ji(e,u).positionAbsolute;return o.createElement(l,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:f(e),color:d(e),borderRadius:r,strokeColor:p(e),strokeWidth:i,shapeRendering:m,onClick:s,id:e.id})}))});const Lc=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(o=el(t,e.nodeOrigin),a=n,di(ci(ui(o),ui(a)))):n,rfId:e.rfId};var o,a};function Ic(e){var t,n;let{style:a,className:r,nodeStrokeColor:i="transparent",nodeColor:l="#e2e2e2",nodeClassName:s="",nodeBorderRadius:c=5,nodeStrokeWidth:u=2,nodeComponent:d,maskColor:p="rgb(240, 240, 240, 0.6)",maskStrokeColor:f="none",maskStrokeWidth:m=1,position:h="bottom-right",onClick:g,onNodeClick:v,pannable:y=!1,zoomable:b=!1,ariaLabel:x="React Flow mini map",inversePan:w=!1,zoomStep:S=10,offsetScale:k=5}=e;const C=Qr(),E=(0,o.useRef)(null),{boundingRect:N,viewBB:j,rfId:P}=Zr(Lc,Wt),M=null!==(t=null===a||void 0===a?void 0:a.width)&&void 0!==t?t:200,T=null!==(n=null===a||void 0===a?void 0:a.height)&&void 0!==n?n:150,_=N.width/M,D=N.height/T,R=Math.max(_,D),A=R*M,O=R*T,z=k*R,F=N.x-(A-N.width)/2-z,L=N.y-(O-N.height)/2-z,I=A+2*z,B=O+2*z,U="".concat("react-flow__minimap-desc","-").concat(P),H=(0,o.useRef)(0);H.current=R,(0,o.useEffect)(()=>{if(E.current){const e=po(E.current),t=e=>{const{transform:t,d3Selection:n,d3Zoom:o}=C.getState();if("wheel"!==e.sourceEvent.type||!n||!o)return;const a=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*S,r=t[2]*Math.pow(2,a);o.scaleTo(n,r)},n=e=>{const{transform:t,d3Selection:n,d3Zoom:o,translateExtent:a,width:r,height:i}=C.getState();if("mousemove"!==e.sourceEvent.type||!n||!o)return;const l=H.current*Math.max(1,t[2])*(w?-1:1),s={x:t[0]-e.sourceEvent.movementX*l,y:t[1]-e.sourceEvent.movementY*l},c=[[0,0],[r,i]],u=yr.translate(s.x,s.y).scale(t[2]),d=o.constrain()(u,c,a);o.transform(n,d)},o=jr().on("zoom",y?n:null).on("zoom.wheel",b?t:null);return e.call(o),()=>{e.on("zoom",null)}}},[y,b,w,S]);const V=g?e=>{const t=wo(e);g(e,{x:t[0],y:t[1]})}:void 0,W=v?(e,t)=>{const n=C.getState().nodeInternals.get(t);v(e,n)}:void 0;return o.createElement(ei,{position:h,style:a,className:Ot(["react-flow__minimap",r]),"data-testid":"rf__minimap"},o.createElement("svg",{width:M,height:T,viewBox:"".concat(F," ").concat(L," ").concat(I," ").concat(B),role:"img","aria-labelledby":U,ref:E,onClick:V},x&&o.createElement("title",{id:U},x),o.createElement(Fc,{onClick:W,nodeColor:l,nodeStrokeColor:i,nodeBorderRadius:c,nodeClassName:s,nodeStrokeWidth:u,nodeComponent:d}),o.createElement("path",{className:"react-flow__minimap-mask",d:"M".concat(F-z,",").concat(L-z,"h").concat(I+2*z,"v").concat(B+2*z,"h").concat(-I-2*z,"z\n        M").concat(j.x,",").concat(j.y,"h").concat(j.width,"v").concat(j.height,"h").concat(-j.width,"z"),fill:p,fillRule:"evenodd",stroke:f,strokeWidth:m,pointerEvents:"none"})))}Ic.displayName="MiniMap";var Bc,Uc=(0,o.memo)(Ic);function Hc(e){let{color:t,dimensions:n,lineWidth:a}=e;return o.createElement("path",{stroke:t,strokeWidth:a,d:"M".concat(n[0]/2," 0 V").concat(n[1]," M0 ").concat(n[1]/2," H").concat(n[0])})}function Vc(e){let{color:t,radius:n}=e;return o.createElement("circle",{cx:n,cy:n,r:n,fill:t})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Bc||(Bc={}));const Wc={[Bc.Dots]:"#91919a",[Bc.Lines]:"#eee",[Bc.Cross]:"#e2e2e2"},Xc={[Bc.Dots]:1,[Bc.Lines]:1,[Bc.Cross]:6},Yc=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function Kc(e){let{id:t,variant:n=Bc.Dots,gap:a=20,size:r,lineWidth:i=1,offset:l=2,color:s,style:c,className:d}=e;const p=(0,o.useRef)(null),{transform:f,patternId:m}=Zr(Yc,Wt),h=s||Wc[n],g=r||Xc[n],v=n===Bc.Dots,y=n===Bc.Cross,b=Array.isArray(a)?a:[a,a],x=[b[0]*f[2]||1,b[1]*f[2]||1],w=g*f[2],S=y?[w,w]:x,k=v?[w/l,w/l]:[S[0]/l,S[1]/l];return o.createElement("svg",{className:Ot(["react-flow__background",d]),style:u(u({},c),{},{position:"absolute",width:"100%",height:"100%",top:0,left:0}),ref:p,"data-testid":"rf__background"},o.createElement("pattern",{id:m+t,x:f[0]%x[0],y:f[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(k[0],",-").concat(k[1],")")},v?o.createElement(Vc,{color:h,radius:w/l}):o.createElement(Hc,{dimensions:S,color:h,lineWidth:i})),o.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(m+t,")")}))}Kc.displayName="Background";var Gc=(0,o.memo)(Kc);class $c{static hasSimulationResults(){return null!==this.simulationResults&&this.simulationResults.simulationCompleted}static getCurrentResults(){return this.simulationResults}static async loadResultsFromFile(e,t,n,o,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{timestep:1};console.log("\ud83d\udcc1 Loading real results from: ".concat(e));try{const u=[...t.map(e=>e.name),...n.map(e=>e.name)].join(",");console.log("\ud83d\udccb Components to parse: ".concat(u));const d=await fetch("http://".concat(window.location.hostname,":3001/api/results/parse?")+new URLSearchParams({resultsPath:e,components:u,iterations:a.toString(),missionTime:o.toString(),timestep:r.timestep.toString()}).toString());if(!d.ok)throw new Error("Backend returned ".concat(d.status,": ").concat(d.statusText));const p=await d.json();if(!p.success)throw new Error("Backend parsing failed: ".concat(p.error));console.log("\u2705 Backend parsing successful for ".concat(Object.keys(p.components).length," components"));const f=[];for(const e of t){const t=p.components[e.name];if(t){var i,l,s,c;console.log("\ud83d\udd0d [DEBUG] Processing event ".concat(e.name,":")),console.log("  \ud83d\udcca Backend CDF data:",t.cdfData),console.log("  \ud83d\udcc8 Backend PDF data:",t.pdfData);const n={componentId:e.id,componentName:e.name,componentType:"event",timeOfFailureArray:t.timeOfFailureArray||[],reliability:t.reliability||0,unreliability:t.unreliability||0,nFailures:t.nFailures||0,totalIterations:t.totalIterations||a,cdfData:this.convertBackendCdfData(t.cdfData),pdfData:this.convertBackendPdfData(t.pdfData)};console.log("  \ud83d\udcca Converted CDF data (".concat((null===(i=n.cdfData)||void 0===i?void 0:i.length)||0," points):"),null===(l=n.cdfData)||void 0===l?void 0:l.slice(0,3)),console.log("  \ud83d\udcc8 Converted PDF data (".concat((null===(s=n.pdfData)||void 0===s?void 0:s.length)||0," points):"),null===(c=n.pdfData)||void 0===c?void 0:c.slice(0,3)),f.push(n),console.log("\u2705 Processed event ".concat(e.name,": R=").concat((100*n.reliability).toFixed(1),"%, failures=").concat(n.nFailures))}else console.log("\u26a0\ufe0f Event ".concat(e.name," not found in results.mat"))}for(const e of n){const t=p.components[e.name];if(t){const n={componentId:e.id,componentName:e.name,componentType:"gate",timeOfFailureArray:t.timeOfFailureArray||[],reliability:t.reliability||0,unreliability:t.unreliability||0,nFailures:t.nFailures||0,totalIterations:t.totalIterations||a,cdfData:this.convertBackendCdfData(t.cdfData),pdfData:this.convertBackendPdfData(t.pdfData)};f.push(n),console.log("\u2705 Processed gate ".concat(e.name,": R=").concat((100*n.reliability).toFixed(1),"%, failures=").concat(n.nFailures))}else console.log("\u26a0\ufe0f Gate ".concat(e.name," not found in results.mat"))}const m={simulationCompleted:!0,missionTime:o,totalIterations:a,timestep:r.timestep,components:f,resultsFilePath:e};return this.simulationResults=m,m}catch(u){throw console.error("\u274c Error loading real results from backend:",u),u}}static convertBackendCdfData(e){if(!e||!e.time||!Array.isArray(e.time))return[];const t=e.time,n=e.probability;if(!n||!Array.isArray(n)||t.length!==n.length)return[];const o=[];for(let a=0;a<t.length;a++)o.push({time:t[a],probability:n[a]});return o}static convertBackendPdfData(e){if(!e||!e.time||!Array.isArray(e.time))return[];const t=e.time,n=e.density;if(!n||!Array.isArray(n)||t.length!==n.length)return[];const o=[];for(let a=0;a<t.length;a++)o.push({time:t[a],density:n[a]});return o}static getComponentResults(e){return this.simulationResults&&this.simulationResults.components.find(t=>t.componentId===e)||null}static clearResults(){this.simulationResults=null}static async loadResultsAfterSimulation(e,t,n,o,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{timestep:1};try{var i;const l="".concat(e,"/output/results.mat");return console.log("\ud83d\udd0d [MatlabResultsService] Loading results after simulation..."),console.log("   \ud83d\udcc1 Results path: ".concat(l)),console.log("   \ud83d\udcca Components: ".concat(t.length," events, ").concat(n.length," gates")),console.log("   \u2699\ufe0f Config: timestep=".concat(r.timestep,"h")),await this.loadResultsFromFile(l,t,n,o,a,r),console.log("\u2705 [MatlabResultsService] Results loaded and processed successfully!"),console.log("   \ud83d\udcc8 Components with results: ".concat(null===(i=this.simulationResults)||void 0===i?void 0:i.components.length)),window.dispatchEvent(new CustomEvent("simulationResultsLoaded")),!0}catch(l){return console.error("\u274c [MatlabResultsService] Failed to load simulation results:",l),!1}}static validateProcessingConfig(e){return e.timestep<=0?"Timestep deve essere maggiore di 0":e.maxTime&&e.maxTime<=0?"Tempo massimo deve essere maggiore di 0":null}static getOverallStatistics(){if(!this.simulationResults)return null;const e=this.simulationResults.components;if(0===e.length)return null;const t=e.length,n=e.reduce((e,t)=>e+t.reliability,0)/t,o=[...e].sort((e,t)=>t.reliability-e.reliability);return{totalComponents:t,averageReliability:n,mostReliableComponent:{name:o[0].componentName,reliability:o[0].reliability},leastReliableComponent:{name:o[o.length-1].componentName,reliability:o[o.length-1].reliability}}}}$c.simulationResults=null;const qc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e.length<=t?e:e.substring(0,t-3)+"..."},Zc=e=>{let{data:t}=e;const{event:n,onClick:a,onDelete:r}=t,i=e=>{if(!e||!e.type)return null;switch(e.type){case"exponential":return"exp";case"weibull":return"wei";case"normal":return"gauss";case"constant":return"const";default:return e.type}},l=e=>null==e||Number.isNaN(e)?"":parseFloat(e.toFixed(3)).toString(),[,s]=(0,o.useState)({});(0,o.useEffect)(()=>{const e=()=>{console.log("\ud83d\udd04 [EventNode] Results loaded event received for ".concat(n.name)),s({})};return window.addEventListener("simulationResultsLoaded",e),()=>window.removeEventListener("simulationResultsLoaded",e)},[n.name]);const c=$c.getComponentResults(n.id),u=$c.hasSimulationResults();u&&console.log("\ud83d\udccb [EventNode] ".concat(n.name," has results:"),c);const d=e=>{if(!e||!e.type)return null;switch(e.type){case"exponential":return null!=e.lambda?"(\u03bb=".concat(l(e.lambda),")"):null;case"weibull":return"(".concat("undefined"!==typeof e.k?"k=".concat(l(e.k),", "):"").concat("undefined"!==typeof e.lambda?"\u03bb=".concat(l(e.lambda)):"").concat("undefined"!==typeof e.mu?", \u03bc=".concat(l(e.mu)):"",")");case"normal":return"(".concat("undefined"!==typeof e.mu?"\u03bc=".concat(l(e.mu)):"").concat("undefined"!==typeof e.sigma?", \u03c3=".concat(l(e.sigma)):"",")");case"constant":return null!=e.probability?"(p=".concat(l(e.probability),")"):null;default:return null}};return(0,Pt.jsxs)("div",{className:"event-node",onClick:a,children:[(0,Pt.jsx)(gl,{type:"source",position:_i.Top,className:"event-handle"}),r&&(0,Pt.jsx)("button",{className:"delete-button",onClick:e=>{e.stopPropagation(),r&&r(n.id)},title:"Elimina evento",children:"\xd7"}),(0,Pt.jsx)("div",{className:"event-content",children:(0,Pt.jsxs)("div",{className:"event-info",children:[(0,Pt.jsxs)("div",{className:"event-name",title:n.name,children:[(0,Pt.jsx)("span",{className:"inline-dot"}),qc(n.name)]}),n.description&&(0,Pt.jsx)("div",{className:"event-description",title:n.description,children:qc(n.description,25)}),n.failureProbabilityDistribution&&(0,Pt.jsxs)("div",{className:"event-distribution",children:[(0,Pt.jsx)("span",{className:"dist-icon",children:"\u26a0\ufe0f"}),(0,Pt.jsxs)("span",{className:"dist-label",children:[i(n.failureProbabilityDistribution),(()=>{const e=d(n.failureProbabilityDistribution);return e?(0,Pt.jsx)("span",{className:"dist-param",children:" ".concat(e)}):null})()]})]}),n.repairProbabilityDistribution&&(0,Pt.jsxs)("div",{className:"event-repair",children:[(0,Pt.jsx)("span",{className:"repair-icon",children:"\ud83d\udd27"}),(0,Pt.jsxs)("span",{className:"dist-label",children:[i(n.repairProbabilityDistribution),(()=>{const e=d(n.repairProbabilityDistribution);return e?(0,Pt.jsx)("span",{className:"dist-param",children:" ".concat(e)}):null})()]})]}),u&&c&&(0,Pt.jsxs)("div",{className:"event-reliability",children:[(0,Pt.jsx)("span",{className:"reliability-icon",children:"\ud83d\udcca"}),(0,Pt.jsxs)("span",{className:"reliability-value",children:["R = ",(100*c.reliability).toFixed(1),"%"]})]})]})})]})},Qc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length<=t?e:e.substring(0,t-3)+"..."},Jc=e=>{let{data:t}=e;const{gate:n,onClick:a,onDelete:r}=t,i=e=>({AND:"#3498db",OR:"#2ecc71",PAND:"#f39c12",SPARE:"#9b59b6",SEQ:"#e67e22",FDEP:"#1abc9c"}[e]),[,l]=(0,o.useState)({});(0,o.useEffect)(()=>{const e=()=>{console.log("\ud83d\udd04 [GateNode] Results loaded event received for ".concat(n.name)),l({})};return window.addEventListener("simulationResultsLoaded",e),()=>window.removeEventListener("simulationResultsLoaded",e)},[n.name]);const s=$c.getComponentResults(n.id),c=$c.hasSimulationResults();return c&&console.log("\ud83d\udccb [GateNode] ".concat(n.name," has results:"),s),(0,Pt.jsxs)("div",{className:"gate-node",onClick:a,style:{borderColor:i(n.gateType)},children:[(0,Pt.jsx)(gl,{type:"target",position:_i.Bottom,className:"gate-handle gate-handle-input",style:{backgroundColor:i(n.gateType)}}),(0,Pt.jsx)(gl,{type:"source",position:_i.Top,className:"gate-handle gate-handle-output",style:{backgroundColor:i(n.gateType)}}),r&&(0,Pt.jsx)("button",{className:"delete-button",onClick:e=>{e.stopPropagation(),r&&r(n.id)},title:"Elimina porta (e tutti gli elementi collegati)",children:"\xd7"}),(0,Pt.jsxs)("div",{className:"gate-content",children:[(0,Pt.jsx)("div",{className:"gate-icon",style:{color:i(n.gateType)},children:(u=n.gateType,{AND:"\u2227",OR:"\u2228",PAND:"\u2295",SPARE:"\u27f2",SEQ:"\u2192",FDEP:"\u27f9"}[u])}),n.isTopEvent&&(0,Pt.jsx)("div",{className:"top-event-badge",title:"TOP EVENT",children:"TE"}),n.isFailureGate&&(0,Pt.jsx)("div",{className:"failure-badge",title:"Failure Gate",children:"F"}),(0,Pt.jsxs)("div",{className:"gate-info",children:[(0,Pt.jsx)("div",{className:"gate-type",children:n.gateType}),(0,Pt.jsx)("div",{className:"gate-name",title:n.name,children:Qc(n.name)}),n.description&&(0,Pt.jsx)("div",{className:"gate-description",title:n.description,children:Qc(n.description,25)}),(0,Pt.jsxs)("div",{className:"gate-inputs",children:["Inputs: ",n.inputs.length]}),c&&s&&(0,Pt.jsxs)("div",{className:"gate-reliability",children:[(0,Pt.jsx)("span",{className:"reliability-icon",children:"\ud83d\udcca"}),(0,Pt.jsxs)("span",{className:"reliability-value",children:["R = ",(100*s.reliability).toFixed(1),"%"]})]})]})]})]});var u},eu=e=>{let{id:t,sourceX:n,sourceY:o,targetX:a,targetY:r,sourcePosition:i,targetPosition:l,style:s={},markerEnd:c,data:u}=e;const[d,p,f]=Wi({sourceX:n,sourceY:o,sourcePosition:i,targetX:a,targetY:r,targetPosition:l});return(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsx)("path",{id:t,style:s,className:"react-flow__edge-path",d:d,markerEnd:c}),(0,Pt.jsx)(Pc,{children:(0,Pt.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -50%) translate(".concat(p,"px,").concat(f,"px)"),fontSize:12,pointerEvents:"all"},className:"edge-delete-container",children:(0,Pt.jsx)("button",{className:"edge-delete-button",onClick:()=>{null!==u&&void 0!==u&&u.onDelete&&u.onDelete(t)},title:"Elimina collegamento",children:"\xd7"})})})]})},tu={eventNode:Zc,gateNode:Jc},nu={deleteButtonEdge:eu},ou=e=>{let{nodes:t,edges:n,onNodesChange:a,onEdgesChange:r,onConnect:i,nodeTypes:l,edgeTypes:s,onPanelClick:c,componentToPlace:u,isDarkMode:d,onReorganizeComponents:p}=e;const f=es(),[m,h]=(0,o.useState)(!1),g=(0,o.useCallback)(e=>{if(!u)return;const t=f.screenToFlowPosition({x:e.clientX,y:e.clientY}),n={event:{width:135,height:45},gate:{width:155,height:45}}[u.type],o={x:t.x-n.width/2,y:t.y-n.height/2};c(o)},[u,c,f]);return(0,Pt.jsxs)(Nc,{nodes:t,edges:n,onNodesChange:a,onEdgesChange:r,onConnect:i,nodeTypes:l,edgeTypes:s,fitView:!0,attributionPosition:"bottom-left",deleteKeyCode:null,selectionOnDrag:!u&&!m,panOnDrag:!u&&!m&&[1,2],selectionMode:Pi.Partial,multiSelectionKeyCode:"Control",onPaneClick:u?g:void 0,children:[(0,Pt.jsxs)("div",{className:"react-flow__panel react-flow__controls bottom left",children:[(0,Pt.jsx)("button",{className:"react-flow__controls-button",onClick:()=>f.zoomIn(),title:"Zoom In (+)",children:"+"}),(0,Pt.jsx)("button",{className:"react-flow__controls-button",onClick:()=>f.zoomOut(),title:"Zoom Out (-)",children:"-"}),(0,Pt.jsx)("button",{className:"react-flow__controls-button",onClick:()=>f.fitView(),title:"Fit View",children:"\u229e"}),(0,Pt.jsx)("button",{className:"react-flow__controls-button",onClick:()=>h(!m),title:m?"Sblocca Vista":"Blocca Vista",children:m?"\ud83d\udd13":"\ud83d\udd12"}),(0,Pt.jsx)("button",{className:"react-flow__controls-button",onClick:()=>{p(),setTimeout(()=>{f.fitView()},100)},title:"Riorganizza tutti i componenti al centro",children:"\ud83d\udd27"})]}),(0,Pt.jsx)(Uc,{nodeColor:"#3498db",maskColor:"rgba(0, 0, 0, 0.1)",position:"top-right"}),(0,Pt.jsx)(Gc,{variant:Bc.Dots,gap:20,size:1,color:d?"#404040":"#e0e0e0"})]})},au=e=>{let{faultTreeModel:t,onElementClick:n,onModelChange:a,onDeleteElement:r,onDeleteConnection:i,onPanelClick:l,componentToPlace:s,isDarkMode:c,disableDeletion:d=!1,onReorganizeComponents:p}=e;const f=(0,o.useMemo)(()=>{const e=[];return t.events.forEach(t=>{e.push({id:t.id,type:"eventNode",position:t.position,data:{event:t,onClick:()=>n(t),onDelete:r},draggable:!0})}),t.gates.forEach(t=>{e.push({id:t.id,type:"gateNode",position:t.position,data:{gate:t,onClick:()=>n(t),onDelete:r},draggable:!0})}),e},[t,n,r]),m=(0,o.useMemo)(()=>t.connections.map(e=>({id:e.id,source:e.source,target:e.target,type:"deleteButtonEdge",animated:!0,style:{stroke:c?"#e0e0e0":"#2c3e50",strokeWidth:2},markerEnd:{type:Ti.ArrowClosed,color:c?"#e0e0e0":"#2c3e50"},data:{onDelete:i}})),[t.connections,i,c]),[h,g,v]=Tc(f),[y,b,x]=_c(m),[w,S]=o.useState({x:0,y:0,show:!1});o.useEffect(()=>{g(f)},[f,g]),o.useEffect(()=>{b(m)},[m,b]);const k=(0,o.useCallback)(e=>{if(!e.source||!e.target)return;const n={id:"conn-".concat(Date.now()),source:e.source,target:e.target,type:"connection"},o=u(u({},t),{},{connections:[...t.connections,n]}),r=t.gates.find(t=>t.id===e.target);r&&e.source&&!r.inputs.includes(e.source)&&(o.gates=t.gates.map(t=>t.id===e.target&&e.source?u(u({},t),{},{inputs:[...t.inputs,e.source]}):t)),a(o),b(t=>qi(u(u({},e),{},{id:n.id,type:"deleteButtonEdge",animated:!0,style:{stroke:c?"#e0e0e0":"#2c3e50",strokeWidth:2},markerEnd:{type:Ti.ArrowClosed,color:c?"#e0e0e0":"#2c3e50"},data:{onDelete:i}}),t))},[t,a,i,b,c]),C=(0,o.useCallback)(e=>{v(e);const n=e.filter(e=>"position"===e.type&&e.position&&"number"===typeof e.position.x&&"number"===typeof e.position.y&&Number.isFinite(e.position.x)&&Number.isFinite(e.position.y));if(0===n.length)return;const o=t.events.length+t.gates.length;if(0===o)return void console.warn("\u26a0\ufe0f Skipping position update: no elements in model");const r=u(u({},t),{},{events:[...t.events],gates:[...t.gates],connections:[...t.connections]});let i=!1;n.forEach(e=>{if("position"!==e.type||!e.position)return;const t=e.position,n=r.events.findIndex(t=>t.id===e.id);if(-1!==n)return r.events[n]=u(u({},r.events[n]),{},{position:t}),void(i=!0);const o=r.gates.findIndex(t=>t.id===e.id);-1!==o&&(r.gates[o]=u(u({},r.gates[o]),{},{position:t}),i=!0)});const l=r.events.length+r.gates.length;l===o?i&&a(r):console.error("\u26a0\ufe0f Element count mismatch! Skipping update",{original:o,updated:l,changes:n})},[v,t,a]),E=(0,o.useCallback)(e=>{x(e),e.forEach(e=>{"remove"===e.type&&i(e.id)})},[x,i]),N=(0,o.useCallback)(e=>{e.filter(e=>"remove"===e.type).forEach(e=>{"remove"===e.type&&r(e.id)});const t=e.filter(e=>"remove"!==e.type);t.length>0&&C(t)},[C,r]),j=(0,o.useCallback)(e=>{if(!d)if("Delete"===e.key){const t=h.filter(e=>e.selected),n=y.filter(e=>e.selected);t.forEach(e=>{r(e.id)}),n.forEach(e=>{i(e.id)}),e.preventDefault()}else e.ctrlKey&&"a"===e.key&&(e.preventDefault(),g(e=>e.map(e=>u(u({},e),{},{selected:!0}))),b(e=>e.map(e=>u(u({},e),{},{selected:!0}))))},[h,y,r,i,g,b,d]),P=(0,o.useCallback)(e=>{e.preventDefault(),S({x:e.clientX,y:e.clientY,show:!0})},[]),M=(0,o.useCallback)(()=>{S(e=>u(u({},e),{},{show:!1}))},[]),T=(0,o.useCallback)(()=>{g(e=>e.map(e=>u(u({},e),{},{selected:!0}))),b(e=>e.map(e=>u(u({},e),{},{selected:!0}))),M()},[g,b,M]),_=(0,o.useCallback)(()=>{g(e=>e.map(e=>u(u({},e),{},{selected:!1}))),b(e=>e.map(e=>u(u({},e),{},{selected:!1}))),M()},[g,b,M]),D=(0,o.useCallback)(()=>{const e=h.filter(e=>e.selected),t=y.filter(e=>e.selected);e.forEach(e=>r(e.id)),t.forEach(e=>i(e.id)),M()},[h,y,r,i,M]);return o.useEffect(()=>(document.addEventListener("keydown",j),document.addEventListener("click",M),()=>{document.removeEventListener("keydown",j),document.removeEventListener("click",M)}),[j,M]),(0,Pt.jsxs)("div",{className:"central-panel ".concat(c?"dark-mode":""),children:[(0,Pt.jsxs)("div",{className:"panel-header",children:[(0,Pt.jsx)("h3",{children:"Fault Tree Diagram"}),(0,Pt.jsxs)("div",{className:"diagram-info",children:[(0,Pt.jsxs)("span",{children:["Eventi: ",t.events.length]}),(0,Pt.jsxs)("span",{children:["Porte: ",t.gates.length]}),(0,Pt.jsxs)("span",{children:["Connessioni: ",t.connections.length]})]}),(0,Pt.jsx)("div",{className:"diagram-help",children:(0,Pt.jsx)("span",{children:"\ud83d\udca1 Tasto destro per menu \u2022 Trascina per selezione multipla \u2022 Ctrl+Click per selezione \u2022 Ctrl+A seleziona tutto \u2022 DEL/Backspace elimina"})})]}),(0,Pt.jsxs)("div",{className:"react-flow-container ".concat(s?"placement-mode":""),onContextMenu:P,children:[(0,Pt.jsx)(yc,{children:(0,Pt.jsx)(ou,{nodes:h,edges:y,onNodesChange:N,onEdgesChange:E,onConnect:k,nodeTypes:tu,edgeTypes:nu,onPanelClick:l,componentToPlace:s,isDarkMode:c,onReorganizeComponents:p})}),w.show&&(0,Pt.jsxs)("div",{className:"context-menu",style:{position:"fixed",top:w.y,left:w.x,zIndex:1e3},children:[(0,Pt.jsx)("button",{onClick:T,children:"\ud83d\udd32 Seleziona tutto (Ctrl+A)"}),(0,Pt.jsx)("button",{onClick:_,children:"\u2b1c Deseleziona tutto"}),(0,Pt.jsx)("hr",{}),(0,Pt.jsx)("button",{onClick:D,disabled:!h.some(e=>e.selected)&&!y.some(e=>e.selected),children:"\ud83d\uddd1\ufe0f Elimina selezionati (Del)"})]})]})]})};class ru{static parseLLMResponse(e){try{console.log("Parsing LLM response:",e.substring(0,500)+"...");const t=e.match(/```json\s*([\s\S]*?)\s*```/i);if(t)try{const e=t[1].trim();return this.tryParseJSON(e,"JSON fence with tag")}catch(Uu){console.log("Failed to parse JSON fence with tag, trying repair...");const n=this.repairJSON(t[1].trim());if(n)return this.tryParseJSON(n,"Repaired JSON fence")}const n=e.match(/```([\s\S]*?)```/);if(n)try{const e=n[1].trim();if(e.startsWith("{")&&e.endsWith("}"))return this.tryParseJSON(e,"Generic fence as JSON")}catch(Uu){console.log("Failed to parse generic fence as JSON")}const o=this.extractFirstJsonObject(e);if(o){const e=this.tryParseJSON(o,"Extracted balanced JSON");if(e)return e;const t=this.repairJSON(o);if(t)return this.tryParseJSON(t,"Repaired extracted JSON")}const a=e.trim();try{if(a.startsWith("{")&&a.endsWith("}"))return this.tryParseJSON(a,"Full response as JSON")}catch(Uu){console.log("Failed to parse full response as JSON")}const r=this.extractAllJsonObjects(e);for(const e of r){const t=this.tryParseJSON(e,"Multiple JSON objects");if(t&&this.validateFaultTreeResult(t))return t}return console.log("Falling back to structured text parsing"),this.parseStructuredResponse(e)}catch(t){return console.error("Errore nel parsing della risposta LLM:",t),null}}static tryParseJSON(e,t){try{const n=JSON.parse(e);return console.log("Successfully parsed JSON from ".concat(t)),this.validateFaultTreeResult(n)?n:(console.log("Parsed JSON from ".concat(t," failed validation")),null)}catch(Uu){return console.log("Failed to parse JSON from ".concat(t,":"),Uu),null}}static validateFaultTreeResult(e){return e&&"object"===typeof e&&Array.isArray(e.elements)&&Array.isArray(e.connections)&&e.elements.length>0}static extractFirstJsonObject(e){const t=e.indexOf("{");if(-1===t)return null;let n=0,o=!1,a=!1;for(let r=t;r<e.length;r++){const i=e[r];if(a)a=!1;else if("\\"!==i)if('"'!==i){if(!o)if("{"===i)n++;else if("}"===i&&(n--,0===n))return e.substring(t,r+1)}else o=!o;else a=!0}return null}static extractAllJsonObjects(e){const t=[];let n=0;for(;n<e.length;){const o=e.indexOf("{",n);if(-1===o)break;let a=0,r=!1,i=!1,l=!1;for(let s=o;s<e.length;s++){const c=e[s];if(i)i=!1;else if("\\"!==c)if('"'!==c){if(!r)if("{"===c)a++;else if("}"===c&&(a--,0===a)){t.push(e.substring(o,s+1)),n=s+1,l=!0;break}}else r=!r;else i=!0}l||(n=o+1)}return t}static repairJSON(e){try{let t=e.trim();return t=t.replace(/\/\/.*$/gm,""),t=t.replace(/\/\*[\s\S]*?\*\//g,""),t=t.replace(/,(\s*[}\]])/g,"$1"),t=t.replace(/([}\]])(\s*)([{"])/g,"$1,$2$3"),t=t.replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g,'$1"$2":'),JSON.parse(t),t}catch(Uu){return console.log("Failed to repair JSON:",Uu),null}}static prettifyLLMResult(e){const t={value:0},n={},o=new Map,a=e.elements.map(e=>{if("event"===e.type){t.value+=1;const n="BE_".concat(t.value),a=e.name+(e.description?": ".concat(e.description):""),r=e.id&&e.id.length>0?e.id:n;return o.set(e.name,r),o.set(n,r),u(u({},e),{},{id:r,name:n,description:a})}{const t=e.gateType||"GATE";n[t]=(n[t]||0)+1;const a="".concat(t,"_").concat(n[t]),r=e.name+(e.description?": ".concat(e.description):""),i=e.id&&e.id.length>0?e.id:a;return o.set(e.name,i),o.set(a,i),u(u({},e),{},{id:i,name:a,description:r})}}),r=e.connections.map(e=>({source:o.get(e.source)||e.source,target:o.get(e.target)||e.target})).filter(e=>e.source&&e.target);let i;var l;e.topEvent&&(i=o.get(e.topEvent)||o.get((null===(l=e.topEvent)||void 0===l?void 0:l.toString().toLowerCase())||"")||e.topEvent);if(!i){const e=a.filter(e=>"gate"===e.type),t=new Set(r.map(e=>e.target)),n=e.find(e=>e.id&&!t.has(e.id));if(n)i=n.id;else{const t=e.find(e=>e.id);t&&(i=t.id)}}if(i){const e=a.find(e=>e.id===i);if(e&&"event"===e.type){const e=a.filter(e=>"gate"===e.type),t=new Set(r.map(e=>e.target)),n=e.find(e=>e.id&&!t.has(e.id));if(n)i=n.id;else{const t=e.find(e=>e.id);t&&(i=t.id)}}}return u(u({},e),{},{elements:a,connections:r,topEvent:i})}static parseStructuredResponse(e){try{console.log("Attempting structured text parsing...");const t=[],n=[];let o,a="Fault tree generato automaticamente";const r=e.split("\n").map(e=>e.trim()).filter(e=>e);let i="";for(const e of r){if(this.matchesPattern(e,["top event","evento principale","root cause"])){o=this.extractValue(e);continue}if(this.matchesPattern(e,["description","descrizione","sistema"])){const t=this.extractValue(e);t&&(a=t);continue}if(this.matchesPattern(e,["eventi base","basic events","eventi","events"])){i="events";continue}if(this.matchesPattern(e,["porte","gates","porte logiche","logic gates"])){i="gates";continue}if(this.matchesPattern(e,["connessioni","connections","collegamenti","links"])){i="connections";continue}if("events"===i){const n=this.parseEventLine(e);n&&t.push(n)}if("gates"===i){const n=this.parseGateLine(e);n&&t.push(n)}if("connections"===i){const t=this.parseConnectionLine(e);t&&n.push(t)}const r=this.parseInlineElements(e);t.push(...r);const l=this.parseInlineConnections(e);n.push(...l)}if(0===t.length)return this.parseAlternativeFormats(e);const l=this.deduplicateElements(t);return{elements:l,connections:this.deduplicateConnections(n),topEvent:o,description:a}}catch(t){return console.error("Error in structured text parsing:",t),null}}static matchesPattern(e,t){const n=e.toLowerCase();return t.some(e=>n.includes(e.toLowerCase()))}static extractValue(e){var t,n;const o=null===(t=e.split(":")[1])||void 0===t?void 0:t.trim();if(o)return o;const a=null===(n=e.split("=")[1])||void 0===n?void 0:n.trim();return a||void 0}static parseEventLine(e){const t=e.match(/^[-*\u2022]\s*(.+?)\s*\(rate:\s*([\d.]+)\)/i);if(t)return{type:"event",name:t[1].trim(),failureRate:parseFloat(t[2])};const n=e.match(/^[-*\u2022]\s*(.+)/);return n?{type:"event",name:n[1].trim(),failureRate:.001}:null}static parseGateLine(e){const t=e.match(/^[-*\u2022]\s*(.+?)\s*\((AND|OR|PAND|SPARE|SEQ|FDEP)\)/i);if(t)return{type:"gate",name:t[1].trim(),gateType:t[2].toUpperCase()};const n=e.match(/^(AND|OR|PAND|SPARE|SEQ|FDEP)\s+gate:\s*(.+)/i);return n?{type:"gate",name:n[2].trim(),gateType:n[1].toUpperCase()}:null}static parseConnectionLine(e){const t=e.match(/^[-*\u2022]?\s*(.+?)\s*->\s*(.+)/);if(t)return{source:t[1].trim(),target:t[2].trim()};const n=e.match(/(.+?)\s+connects?\s+to\s+(.+)/i);return n?{source:n[1].trim(),target:n[2].trim()}:null}static parseInlineElements(e){const t=[],n=e.match(/Event:\s*([^,\n]+)/gi);n&&n.forEach(e=>{const n=e.replace(/Event:\s*/i,"").trim();n&&t.push({type:"event",name:n,failureRate:.001})});const o=e.match(/Gate:\s*([^,\n]+?)(?:\s*\(([^)]+)\))?/gi);return o&&o.forEach(e=>{const n=e.replace(/Gate:\s*/i,"").trim().match(/^(.+?)\s*\(([^)]+)\)/);if(n){const e=n[2].toUpperCase();["AND","OR","PAND","SPARE","SEQ","FDEP"].includes(e)&&t.push({type:"gate",name:n[1].trim(),gateType:e})}}),t}static parseInlineConnections(e){const t=[],n=e.match(/([^->\n]+)\s*->\s*([^->\n]+)/g);return n&&n.forEach(e=>{const[n,o]=e.split("->").map(e=>e.trim());n&&o&&t.push({source:n,target:o})}),t}static parseAlternativeFormats(e){console.log("Trying alternative parsing formats...");const t=[],n=e.match(/[A-Za-z][A-Za-z0-9\s_-]*(?=\s*(fail|fault|error|guasto))/gi);return n&&n.forEach(e=>{t.push({type:"event",name:e.trim()+" Failure",failureRate:.001})}),t.length<2?{elements:[{type:"event",name:"Component A Failure",failureRate:.001},{type:"event",name:"Component B Failure",failureRate:.001},{type:"gate",name:"System Failure",gateType:"OR"}],connections:[{source:"Component A Failure",target:"System Failure"},{source:"Component B Failure",target:"System Failure"}],topEvent:"System Failure",description:"Fault tree generato da parsing testuale"}:{elements:t,connections:[],description:"Fault tree generato da parsing alternativo"}}static deduplicateElements(e){const t=new Set;return e.filter(e=>{const n="".concat(e.type,"-").concat(e.name);return!t.has(n)&&(t.add(n),!0)})}static deduplicateConnections(e){const t=new Set;return e.filter(e=>{const n="".concat(e.source,"->").concat(e.target);return!t.has(n)&&(t.add(n),!0)})}static generateFaultTreeModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:100,y:100};e=this.prettifyLLMResult(e);const n=[],o=[],a=[],r=new Map,i=e=>e.trim().toLowerCase(),l=new Map,s=this.calculateHierarchicalLayout(e,t);let c;if(e.elements.filter(e=>"event"===e.type).forEach((e,o)=>{const a=e.id&&e.id.length>0?e.id:"event-".concat(Date.now(),"-").concat(o);r.set(e.name,a),r.set(i(e.name),a),e.id&&e.id.length>0&&(r.set(e.id,a),r.set(i(e.id),a));const c=s.events[e.name]||{x:t.x+o%4*180,y:t.y+400},u={id:a,type:"basic-event",name:e.name,description:e.description,failureRate:e.failureRate||.001,position:c,parameters:e.parameters||{}};e.failureProbabilityDistribution&&(u.failureProbabilityDistribution=e.failureProbabilityDistribution),e.repairProbabilityDistribution&&(u.repairProbabilityDistribution=e.repairProbabilityDistribution),n.push(u),l.set(e.name,c)}),e.elements.filter(e=>"gate"===e.type).forEach((e,n)=>{const a=e.id&&e.id.length>0?e.id:"gate-".concat(Date.now(),"-").concat(n);r.set(e.name,a),r.set(i(e.name),a),e.id&&e.id.length>0&&(r.set(e.id,a),r.set(i(e.id),a));const c=s.gates[e.name]||{x:t.x+n%3*250,y:t.y+200};o.push({id:a,type:"gate",gateType:e.gateType||"OR",name:e.name,description:e.description,position:c,inputs:[],parameters:e.parameters||{}}),l.set(e.name,c)}),e.connections.forEach((e,t)=>{if(!e||!e.source||!e.target)return;const l=r.get(e.source)||r.get(i(e.source)),s=r.get(e.target)||r.get(i(e.target)),c=l||e.source,u=s||e.target,d=n.some(e=>e.id===c)||o.some(e=>e.id===c),p=n.some(e=>e.id===u)||o.some(e=>e.id===u);if(!d||!p)return;a.push({id:"connection-".concat(Date.now(),"-").concat(t),source:c,target:u,type:"connection"});const f=o.find(e=>e.id===u);f&&!f.inputs.includes(c)&&f.inputs.push(c)}),e.topEvent&&(c=r.get(e.topEvent)||r.get(i(e.topEvent))||e.topEvent),!c){const e=o.find(e=>!a.some(t=>t.target===e.id));if(e)c=e.id;else{const e=o.find(e=>e.id);e&&(c=e.id)}}return c&&o.forEach(e=>{e.isTopEvent=e.id===c}),{events:n,gates:o,connections:a,topEvent:c}}static calculateHierarchicalLayout(e,t){const n={events:{},gates:{}},o=e.elements.filter(e=>"event"===e.type),a=e.elements.filter(e=>"gate"===e.type),r=this.calculateSimpleLayout(o,a,t);return n.events=r.events,n.gates=r.gates,n}static calculateSimpleLayout(e,t,n){const o={events:{},gates:{}};return t.forEach((e,t)=>{const a=n.x+t%3*250,r=n.y+100;o.gates[e.name]={x:a,y:r}}),e.forEach((e,t)=>{const a=n.x+t%4*180,r=n.y+300;o.events[e.name]={x:a,y:r}}),o}static createFaultTreePrompt(e){let t="Come esperto in Dynamic Fault Tree Analysis, genera un fault tree per il seguente sistema:\n\n**SISTEMA**: ".concat(e.description);return e.topEvent&&(t+="\n**TOP EVENT**: ".concat(e.topEvent)),e.systemType&&(t+="\n**TIPO SISTEMA**: ".concat(e.systemType)),e.components&&e.components.length>0&&(t+="\n**COMPONENTI**: ".concat(e.components.join(", "))),t+='\n\nIMPORTANTE: Fornisci la risposta esclusivamente nel formato JSON richiesto. Non aggiungere testo prima o dopo il JSON.\n\n```json\n{\n  "description": "Descrizione del fault tree",\n  "topEvent": "gate-1",\n  "elements": [\n    {\n      "type": "event",\n      "id": "event-1",\n      "name": "Guasto Componente A",\n      "description": "Descrizione dettagliata del guasto",\n      "failureRate": 0.001,\n      "failureProbabilityDistribution": {\n        "type": "exponential",\n        "lambda": 0.001\n      }\n    },\n    {\n      "type": "event",\n      "id": "event-2",\n      "name": "Guasto Componente B",\n      "description": "Descrizione dettagliata del guasto",\n      "failureRate": 0.002\n    },\n    {\n      "type": "gate",\n      "id": "gate-1",\n      "name": "Guasto Sistema Principale",\n      "gateType": "OR",\n      "description": "Guasto del sistema quando uno dei componenti fallisce"\n    }\n  ],\n  "connections": [\n    {\n      "source": "event-1",\n      "target": "gate-1"\n    },\n    {\n      "source": "event-2", \n      "target": "gate-1"\n    }\n  ]\n}\n```\n\n**REGOLE OBBLIGATORIE PER IL JSON**:\n1. **FORMATO RIGOROSO**: Usa esattamente il formato JSON mostrato sopra\n2. **ID UNICI**: Ogni elemento deve avere un ID unico (event-1, event-2, gate-1, etc.)\n3. **TOP EVENT**: Deve sempre essere l\'ID di una GATE, mai di un event\n4. **GATE TYPES**: Usa solo questi tipi: "AND", "OR", "PAND", "SPARE", "SEQ", "FDEP"\n5. **CONNESSIONI**: Usa sempre gli ID degli elementi, mai i nomi\n6. **SINTASSI**: Assicurati che il JSON sia valido (virgole, virgolette, parentesi bilanciate)\n7. **NO COMMENTI**: Non includere commenti nel JSON\n8. **NO TESTO EXTRA**: Non aggiungere spiegazioni prima o dopo il JSON\n\n**STRUTTURA DEL FAULT TREE**:\n- Inizia dal top event (gate principale) e procedi verso il basso\n- Gli eventi base rappresentano i guasti fondamentali\n- Le gates rappresentano le logiche di combinazione\n- Usa AND per guasti simultanei, OR per guasti alternativi\n- Considera ridondanze e dipendenze temporali appropriate al sistema',t}static getExampleFaultTrees(){return[{name:"Sistema di Alimentazione Elettrica",request:{description:"Sistema di alimentazione elettrica con doppia ridondanza",topEvent:"Perdita Alimentazione Sistema",systemType:"Elettrico",components:["Alimentatore Principale","Alimentatore Backup","UPS","Batteria"]}},{name:"Sistema Frenante Automotive",request:{description:"Sistema frenante automotive con ABS",topEvent:"Perdita Capacit\xe0 Frenante",systemType:"Meccanico",components:["Freni Anteriori","Freni Posteriori","Sistema ABS","Pompa Freno"]}},{name:"Sistema di Controllo Industriale",request:{description:"Sistema di controllo di processo industriale con PLC",topEvent:"Arresto Processo Produttivo",systemType:"Controllo",components:["PLC Principale","PLC Backup","Sensori","Attuatori","HMI"]}}]}}class iu{constructor(e){this.config=void 0,this.config=e}async generateFaultTree(e){try{const t=ru.createFaultTreePrompt(e),n=u(u({},this.config),{},{maxTokens:Math.max(this.config.maxTokens||1e3,2e3),temperature:.3}),o=new iu(n),a=await o.generateResponse(t);if(a.error){console.error("Errore nella generazione LLM:",a.error),console.log("Retrying with standard configuration...");const n=await this.generateResponse(t);return n.error?null:this.processFaultTreeResponse(n,e)}return this.processFaultTreeResponse(a,e)}catch(t){return console.error("Errore nella generazione del fault tree:",t),null}}async processFaultTreeResponse(e,t){console.log("Processing LLM response for fault tree generation..."),console.log("Response length:",e.content.length),console.log("Response preview:",e.content.substring(0,200)+"...");const n=ru.parseLLMResponse(e.content);return n?(console.log("Successfully parsed fault tree result:"),console.log("- Elements:",n.elements.length),console.log("- Connections:",n.connections.length),console.log("- Top Event:",n.topEvent),n.elements&&0!==n.elements.length||n.connections&&0!==n.connections.length?ru.generateFaultTreeModel(n):(console.log("LLM returned empty fault tree, creating minimal fallback..."),this.createMinimalFaultTree(t))):(console.error("Failed to parse LLM response."),console.log("Full response for debugging:",e.content),t.components&&t.components.length>0?(console.log("Attempting to create minimal fault tree from request components..."),this.createMinimalFaultTree(t)):null)}createMinimalFaultTree(e){try{const t=[],n=[];e.components&&e.components.length>0?e.components.forEach((e,n)=>{t.push({type:"event",id:"event-".concat(n+1),name:"Guasto ".concat(e),description:"Guasto del componente ".concat(e),failureRate:.001})}):t.push({type:"event",id:"event-1",name:"Guasto Componente A",description:"Guasto del componente principale A",failureRate:.001},{type:"event",id:"event-2",name:"Guasto Componente B",description:"Guasto del componente principale B",failureRate:.001});const o=e.topEvent||"Guasto Sistema";t.push({type:"gate",id:"gate-1",name:o,gateType:"OR",description:"Gate principale: ".concat(o)}),t.filter(e=>"event"===e.type).forEach(e=>{n.push({source:e.id,target:"gate-1"})});const a={elements:t,connections:n,topEvent:"gate-1",description:e.description||"Fault tree generato automaticamente"};return console.log("Created minimal fault tree as fallback"),ru.generateFaultTreeModel(a)}catch(t){return console.error("Failed to create minimal fault tree:",t),null}}static isGenerationRequest(e){const t=e.toLowerCase();return["genera fault tree","crea fault tree","costruisci fault tree","modella il sistema","analisi del sistema","fault tree per","create fault tree","generate fault tree","build fault tree"].some(e=>t.includes(e))}static extractGenerationRequest(e){const t={description:e},n=e.match(/top event[:\s]+([^.!?\n]+)/i);n&&(t.topEvent=n[1].trim());const o=e.match(/sistema\s+([\w\s]+?)(?:\s+con|\s+per|\.|$)/i);o&&(t.systemType=o[1].trim());const a=e.match(/componenti[:\s]+([^.!?\n]+)/i);return a&&(t.components=a[1].split(/[,;]/).map(e=>e.trim()).filter(e=>e.length>0)),t}async generateResponse(e,t){try{switch(this.config.provider){case"openai":return await this.callOpenAI(e,t);case"anthropic":return await this.callAnthropic(e,t);case"gemini":return await this.callGemini(e,t);case"grok":return await this.callGrok(e,t);case"local":return await this.callLocal(e,t);default:throw new Error("Provider non supportato: ".concat(this.config.provider))}}catch(n){return{content:"",provider:this.config.provider,model:this.config.model,error:n instanceof Error?n.message:"Errore sconosciuto"}}}async callOpenAI(e,t){const n=t?"".concat(t,"\n\nDomanda: ").concat(e):e,o=await fetch("".concat(this.config.baseUrl,"/chat/completions"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.apiKey),"Content-Type":"application/json"},body:JSON.stringify({model:this.config.model,messages:[{role:"system",content:"Sei un esperto assistente specializzato in Dynamic Fault Tree Analysis. Fornisci risposte tecniche accurate e utili per la modellazione di fault tree."},{role:"user",content:n}],temperature:this.config.temperature||.7,max_tokens:this.config.maxTokens||1e3})});if(!o.ok)throw new Error("OpenAI API error: ".concat(o.status," ").concat(o.statusText));const a=await o.json();return{content:a.choices[0].message.content,provider:"openai",model:this.config.model,usage:a.usage}}async callAnthropic(e,t){const n=t?"".concat(t,"\n\nDomanda: ").concat(e):e,o=await fetch("".concat(this.config.baseUrl,"/v1/messages"),{method:"POST",headers:{"x-api-key":this.config.apiKey,"Content-Type":"application/json","anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.config.model,max_tokens:this.config.maxTokens||1e3,messages:[{role:"user",content:"Sei un esperto assistente specializzato in Dynamic Fault Tree Analysis. Fornisci risposte tecniche accurate e utili per la modellazione di fault tree.\n\n".concat(n)}]})});if(!o.ok)throw new Error("Anthropic API error: ".concat(o.status," ").concat(o.statusText));const a=await o.json();return{content:a.content[0].text,provider:"anthropic",model:this.config.model,usage:a.usage}}async callGemini(e,t){const n=t?"".concat(t,"\n\nDomanda: ").concat(e):e,o=await fetch("".concat(this.config.baseUrl,"/v1beta/models/").concat(this.config.model,":generateContent?key=").concat(this.config.apiKey),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Sei un esperto assistente specializzato in Dynamic Fault Tree Analysis. Fornisci risposte tecniche accurate e utili per la modellazione di fault tree.\n\n".concat(n)}]}],generationConfig:{temperature:this.config.temperature||.7,maxOutputTokens:this.config.maxTokens||1e3}})});if(!o.ok)throw new Error("Gemini API error: ".concat(o.status," ").concat(o.statusText));return{content:(await o.json()).candidates[0].content.parts[0].text,provider:"gemini",model:this.config.model}}async callGrok(e,t){const n=t?"".concat(t,"\n\nDomanda: ").concat(e):e,o=await fetch("".concat(this.config.baseUrl,"/chat/completions"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.apiKey),"Content-Type":"application/json"},body:JSON.stringify({model:this.config.model,messages:[{role:"system",content:"Sei un esperto assistente specializzato in Dynamic Fault Tree Analysis. Fornisci risposte tecniche accurate e utili per la modellazione di fault tree."},{role:"user",content:n}],temperature:this.config.temperature||.7,max_tokens:this.config.maxTokens||1e3})});if(!o.ok)throw new Error("Grok API error: ".concat(o.status," ").concat(o.statusText));const a=await o.json();return{content:a.choices[0].message.content,provider:"grok",model:this.config.model,usage:a.usage}}async callLocal(e,t){const n=t?"".concat(t,"\n\nDomanda: ").concat(e):e;try{const e=await fetch("".concat(this.config.baseUrl,"/api/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:this.config.model,prompt:"Sei un esperto assistente specializzato in Dynamic Fault Tree Analysis. Fornisci risposte tecniche accurate e utili per la modellazione di fault tree.\n\n".concat(n),stream:!1,options:{temperature:this.config.temperature||.7,num_predict:this.config.maxTokens||1e3}})});if(!e.ok)throw new Error("Local API error: ".concat(e.status," ").concat(e.statusText));return{content:(await e.json()).response,provider:"local",model:this.config.model}}catch(o){return this.generateLocalFallback(e)}}generateLocalFallback(e){const t=e.toLowerCase();if(t.includes("and")||t.includes("porta and"))return{content:"La porta AND richiede che tutti gli eventi di input si verifichino per causare l'output. \xc8 utilizzata quando tutti i componenti devono fallire simultaneamente per causare il guasto del sistema.",provider:"local",model:"fallback"};if(t.includes("or")||t.includes("porta or"))return{content:"La porta OR si attiva quando almeno uno degli eventi di input si verifica. \xc8 la porta pi\xf9 comune nei fault tree e rappresenta ridondanza alternativa.",provider:"local",model:"fallback"};if(t.includes("pand")||t.includes("priority and"))return{content:"La porta PAND (Priority AND) richiede che gli eventi si verifichino in una sequenza specifica. \xc8 utile per modellare guasti che dipendono dall'ordine temporale.",provider:"local",model:"fallback"};if(t.includes("spare"))return{content:"La porta SPARE modella sistemi con componenti di riserva. Il sistema fallisce solo quando il componente principale E il componente spare falliscono.",provider:"local",model:"fallback"};if(t.includes("seq")||t.includes("sequenziale"))return{content:"La porta SEQ (Sequenziale) modella eventi che devono verificarsi in un ordine temporale specifico per causare il guasto.",provider:"local",model:"fallback"};if(t.includes("fdep")||t.includes("dipendenza"))return{content:"La porta FDEP (Functional Dependency) modella dipendenze funzionali dove il guasto di un componente causa automaticamente il guasto di altri componenti dipendenti.",provider:"local",model:"fallback"};if(t.includes("come")||t.includes("aiuto")||t.includes("help"))return{content:"Posso aiutarti con:\n\u2022 Spiegazioni sui tipi di porte logiche\n\u2022 Consigli sulla struttura del fault tree\n\u2022 Best practices per la modellazione\n\u2022 Interpretazione dei risultati\n\nCosa ti interessa sapere?",provider:"local",model:"fallback"};if(t.includes("evento base")||t.includes("basic event"))return{content:"Gli eventi base rappresentano i guasti fondamentali del sistema. Dovrebbero essere:\n\u2022 Indipendenti tra loro\n\u2022 Non ulteriormente sviluppabili\n\u2022 Associati a tassi di guasto specifici\n\u2022 Chiaramente definiti e misurabili",provider:"local",model:"fallback"};if(t.includes("top event")||t.includes("evento top"))return{content:"Il top event \xe8 il guasto principale che stai analizzando. Dovrebbe essere:\n\u2022 Chiaramente definito\n\u2022 Indesiderabile per il sistema\n\u2022 Il punto di partenza per l'analisi\n\u2022 Collegato logicamente agli eventi sottostanti",provider:"local",model:"fallback"};const n=["Interessante domanda! Nei fault tree dinamici, \xe8 importante considerare le dipendenze temporali tra gli eventi. Puoi fornire pi\xf9 dettagli?","Per una modellazione efficace, ti consiglio di iniziare dal top event e procedere verso il basso, identificando le cause immediate di ogni evento.","Ricorda che un buon fault tree dovrebbe essere completo, accurato e verificabile. Hai considerato tutti i modi di guasto possibili?","Le porte dinamiche come PAND, SPARE e SEQ sono particolarmente utili per sistemi con ridondanza e riparazioni. Stai modellando un sistema di questo tipo?"];return{content:n[Math.floor(Math.random()*n.length)],provider:"local",model:"fallback"}}}const lu=e=>{let{isOpen:t,onClose:n,onConfigChange:a}=e;const[r,i]=(0,o.useState)(Ct),[l,s]=(0,o.useState)({}),[c,d]=(0,o.useState)("openai"),[p,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(t){const t=localStorage.getItem("llm-config");if(t)try{const e=JSON.parse(t);i(u(u({},Ct),e))}catch(e){console.warn("Errore nel caricamento configurazione LLM:",e)}s({}),f(!1)}},[t]);const m=(e,t,n)=>{const o=u(u({},r),{},{[e]:u(u({},r[e]),{},{[t]:n})});i(o);const a=jt(o[e]);s(t=>u(u({},t),{},{[e]:a}))},h=e=>({openai:"OpenAI (GPT)",anthropic:"Anthropic (Claude)",gemini:"Google Gemini",grok:"Grok (xAI)",local:"Modello Locale"}[e]||e);return t?(0,Pt.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Pt.jsxs)("div",{className:"llm-config-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"modal-header",children:[(0,Pt.jsx)("h2",{children:"\ud83e\udd16 Configurazione LLM"}),(0,Pt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"modal-content",children:[(0,Pt.jsx)("div",{className:"tabs",children:Object.keys(r).map(e=>(0,Pt.jsx)("button",{className:"tab ".concat(c===e?"active":""),onClick:()=>d(e),children:h(e)},e))}),(0,Pt.jsx)("div",{className:"tab-content",children:(e=>{const t=r[e],n=l[e]||[];return(0,Pt.jsxs)("div",{className:"provider-config",children:[(0,Pt.jsxs)("div",{className:"provider-header",children:[(0,Pt.jsx)("h3",{children:h(e)}),(0,Pt.jsxs)("label",{className:"enabled-toggle",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:t.enabled,onChange:t=>m(e,"enabled",t.target.checked)}),"Abilitato"]})]}),(0,Pt.jsxs)("div",{className:"config-fields",children:[(0,Pt.jsxs)("div",{className:"field-group",children:[(0,Pt.jsx)("label",{children:"API Key:"}),(0,Pt.jsx)("input",{type:"password",value:t.apiKey,onChange:t=>m(e,"apiKey",t.target.value),placeholder:"Inserisci API Key per ".concat(h(e)),disabled:"local"===e}),"local"===e&&(0,Pt.jsx)("span",{className:"field-help",children:"Non richiesto per il modello locale"})]}),(0,Pt.jsxs)("div",{className:"field-group",children:[(0,Pt.jsx)("label",{children:"Modello:"}),(0,Pt.jsx)("input",{type:"text",value:t.model,onChange:t=>m(e,"model",t.target.value),placeholder:"Nome del modello"})]}),(0,Pt.jsxs)("div",{className:"field-group",children:[(0,Pt.jsx)("label",{children:"Base URL:"}),(0,Pt.jsx)("input",{type:"text",value:t.baseUrl||"",onChange:t=>m(e,"baseUrl",t.target.value),placeholder:"URL base dell'API"})]}),(0,Pt.jsxs)("div",{className:"field-row",children:[(0,Pt.jsxs)("div",{className:"field-group",children:[(0,Pt.jsx)("label",{children:"Temperatura:"}),(0,Pt.jsx)("input",{type:"number",min:"0",max:"2",step:"0.1",value:t.temperature||.7,onChange:t=>m(e,"temperature",parseFloat(t.target.value))}),(0,Pt.jsx)("span",{className:"field-help",children:"0.0 - 2.0"})]}),(0,Pt.jsxs)("div",{className:"field-group",children:[(0,Pt.jsx)("label",{children:"Max Tokens:"}),(0,Pt.jsx)("input",{type:"number",min:"1",value:t.maxTokens||1e3,onChange:t=>m(e,"maxTokens",parseInt(t.target.value))})]})]}),n.length>0&&(0,Pt.jsx)("div",{className:"error-list",children:n.map((e,t)=>(0,Pt.jsxs)("div",{className:"error-item",children:["\u26a0\ufe0f ",e]},t))})]})]})})(c)}),(0,Pt.jsxs)("div",{className:"config-info",children:[(0,Pt.jsx)("h4",{children:"\ud83d\udca1 Informazioni sui Provider"}),(0,Pt.jsxs)("div",{className:"info-grid",children:[(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"OpenAI:"})," GPT-4, GPT-3.5-turbo"]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Anthropic:"})," Claude-3 Haiku, Sonnet, Opus"]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Gemini:"})," Gemini 1.5 Flash, Pro"]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Grok:"})," Grok-beta (xAI)"]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Locale:"})," Ollama, LM Studio, etc."]})]})]})]}),(0,Pt.jsxs)("div",{className:"modal-footer",children:[(0,Pt.jsx)("button",{className:"reset-button",onClick:()=>{i(Ct),s({})},children:"\ud83d\udd04 Reset"}),(0,Pt.jsxs)("div",{className:"footer-buttons",children:[p&&(0,Pt.jsx)("div",{className:"save-success",children:"\u2705 Configurazione salvata!"}),(0,Pt.jsx)("button",{className:"cancel-button",onClick:n,children:"Annulla"}),(0,Pt.jsx)("button",{className:"save-button",onClick:()=>{console.log("Saving config:",r);const e={};let t=!1;Object.entries(r).forEach(n=>{let[o,a]=n;if(a.enabled){const n=jt(a);console.log("Provider ".concat(o," errors:"),n),n.length>0&&(e[o]=n,"local"!==o&&(t=!0))}});const o=Object.values(r).some(e=>!!e.enabled&&("local"===e.provider||e.apiKey&&""!==e.apiKey.trim()));if(t&&!o)return console.log("Validation errors prevent saving:",e),void s(e);console.log("Saving configuration..."),Nt(r),a(r),f(!0),setTimeout(()=>{f(!1),n()},1e3)},disabled:p,children:p?"\u2705 Salvato!":"\ud83d\udcbe Salva Configurazione"})]})]})]})}):null};function su(e){return[{key:"openai",name:"OpenAI",enabled:e.openai.enabled&&!!e.openai.apiKey},{key:"anthropic",name:"Anthropic",enabled:e.anthropic.enabled&&!!e.anthropic.apiKey},{key:"gemini",name:"Gemini",enabled:e.gemini.enabled&&!!e.gemini.apiKey},{key:"grok",name:"Grok",enabled:e.grok.enabled&&!!e.grok.apiKey},{key:"local",name:"Local",enabled:e.local.enabled}].filter(e=>e.enabled)}function cu(e){return{openai:"\ud83e\udd16",anthropic:"\ud83e\udde0",gemini:"\ud83d\udc8e",grok:"\u26a1",local:"\ud83c\udfe0"}[e]||"\ud83d\udd27"}const uu=e=>{let{onGenerateFaultTree:t,onModifyFaultTree:n,currentFaultTree:a,isDarkMode:r,isCollapsed:i,onToggleCollapse:l}=e;const[s,c]=(0,o.useState)([{id:"1",text:'Ciao! Sono il tuo assistente per Dynamic Fault Tree Analysis. Posso aiutarti a:\n\n\u2022 Generare fault tree automaticamente\n\u2022 Spiegare concetti e best practices\n\u2022 Analizzare il tuo modello corrente\n\nProva a scrivere: "Genera un fault tree per un sistema di alimentazione elettrica"',sender:"bot",timestamp:new Date}]),[u,d]=(0,o.useState)(""),[p,f]=(0,o.useState)(!1),[m,h]=(0,o.useState)(Et()),[g,v]=(0,o.useState)(!1),[y,b]=(0,o.useState)("local"),[x,w]=(0,o.useState)(!1),[S,k]=(0,o.useState)({isGenerating:!1}),C=(0,o.useRef)(null);(0,o.useEffect)(()=>{(()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[s]),(0,o.useEffect)(()=>{const e=su(m);e.length>0&&!e.some(e=>e.key===y)&&(b(e[0].key),console.log("Initial provider set to:",e[0].key))},[m,y]),(0,o.useEffect)(()=>{const e=e=>{e.target.closest(".provider-selector")||w(!1)};if(x)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x]);const E=async()=>{if(!u.trim())return;const e={id:Date.now().toString(),text:u,sender:"user",timestamp:new Date};c(t=>[...t,e]);const t=u;d(""),f(!0);try{if(iu.isGenerationRequest(t))return void await N(t);console.log("LLM Config:",m),console.log("Current Provider:",y);const e=m[y];if(console.log("Selected Provider Config:",e),e&&"local"!==e.provider&&e.enabled&&e.apiKey){console.log("Using external LLM:",e.provider);const n=new iu(e),o=a?"Fault tree corrente: ".concat(a.events.length," eventi, ").concat(a.gates.length," porte"):void 0,r=await n.generateResponse(t,o);if(r.error)throw new Error(r.error);const i={id:(Date.now()+1).toString(),text:r.content,sender:"bot",timestamp:new Date};c(e=>[...e,i])}else{console.log("Using local fallback");const e=j(t),n={id:(Date.now()+1).toString(),text:e,sender:"bot",timestamp:new Date};c(e=>[...e,n])}}catch(n){console.error("LLM Error:",n);const e=j(t),o={id:(Date.now()+1).toString(),text:e,sender:"bot",timestamp:new Date};c(e=>[...e,o])}finally{f(!1)}},N=async e=>{if(!t){const e={id:(Date.now()+1).toString(),text:"Funzionalit\xe0 di generazione non disponibile in questa modalit\xe0.",sender:"bot",timestamp:new Date};return c(t=>[...t,e]),void f(!1)}k({isGenerating:!0,message:"Generazione fault tree in corso..."});try{const n=m[y];if(!(n&&n.enabled&&n.apiKey))throw new Error("Provider LLM non configurato");{const o=new iu(n),a=iu.extractGenerationRequest(e),r=await o.generateFaultTree(a);if(!r)throw new Error("Impossibile generare il fault tree");{t(r);const e={id:(Date.now()+1).toString(),text:"\u2705 Ho generato un fault tree con:\n\u2022 ".concat(r.events.length," eventi base\n\u2022 ").concat(r.gates.length," porte logiche\n\u2022 ").concat(r.connections.length," connessioni\n\nIl modello \xe8 stato aggiunto all'editor grafico!"),sender:"bot",timestamp:new Date};c(t=>[...t,e])}}}catch(n){console.error("Errore generazione fault tree:",n);const e={id:(Date.now()+1).toString(),text:"\u274c Errore nella generazione: ".concat(n instanceof Error?n.message:"Errore sconosciuto","\n\nVerifica la configurazione LLM o prova con una descrizione pi\xf9 dettagliata."),sender:"bot",timestamp:new Date};c(t=>[...t,e])}finally{k({isGenerating:!1}),f(!1)}},j=e=>{const t=e.toLowerCase();if(t.includes("and")||t.includes("porta and"))return"La porta AND richiede che tutti gli eventi di input si verifichino per causare l'output. \xc8 utilizzata quando tutti i componenti devono fallire simultaneamente per causare il guasto del sistema.";if(t.includes("or")||t.includes("porta or"))return"La porta OR si attiva quando almeno uno degli eventi di input si verifica. \xc8 la porta pi\xf9 comune nei fault tree e rappresenta ridondanza alternativa.";if(t.includes("pand")||t.includes("priority and"))return"La porta PAND (Priority AND) richiede che gli eventi si verifichino in una sequenza specifica. \xc8 utile per modellare guasti che dipendono dall'ordine temporale.";if(t.includes("spare"))return"La porta SPARE modella sistemi con componenti di riserva. Il sistema fallisce solo quando il componente principale E il componente spare falliscono.";if(t.includes("seq")||t.includes("sequenziale"))return"La porta SEQ (Sequenziale) modella eventi che devono verificarsi in un ordine temporale specifico per causare il guasto.";if(t.includes("fdep")||t.includes("dipendenza"))return"La porta FDEP (Functional Dependency) modella dipendenze funzionali dove il guasto di un componente causa automaticamente il guasto di altri componenti dipendenti.";if(t.includes("come")||t.includes("aiuto")||t.includes("help"))return'Posso aiutarti con:\n\u2022 Generare fault tree automaticamente\n\u2022 Spiegazioni sui tipi di porte logiche\n\u2022 Consigli sulla struttura del fault tree\n\u2022 Best practices per la modellazione\n\u2022 Interpretazione dei risultati\n\nProva a scrivere: "Genera fault tree per [descrizione sistema]"';if(t.includes("evento base")||t.includes("basic event"))return"Gli eventi base rappresentano i guasti fondamentali del sistema. Dovrebbero essere:\n\u2022 Indipendenti tra loro\n\u2022 Non ulteriormente sviluppabili\n\u2022 Associati a tassi di guasto specifici\n\u2022 Chiaramente definiti e misurabili";if(t.includes("top event")||t.includes("evento top"))return"Il top event \xe8 il guasto principale che stai analizzando. Dovrebbe essere:\n\u2022 Chiaramente definito\n\u2022 Indesiderabile per il sistema\n\u2022 Il punto di partenza per l'analisi\n\u2022 Collegato logicamente agli eventi sottostanti";const n=["Interessante domanda! Nei fault tree dinamici, \xe8 importante considerare le dipendenze temporali tra gli eventi. Puoi fornire pi\xf9 dettagli?","Per una modellazione efficace, ti consiglio di iniziare dal top event e procedere verso il basso, identificando le cause immediate di ogni evento.","Ricorda che un buon fault tree dovrebbe essere completo, accurato e verificabile. Hai considerato tutti i modi di guasto possibili?","Le porte dinamiche come PAND, SPARE e SEQ sono particolarmente utili per sistemi con ridondanza e riparazioni. Stai modellando un sistema di questo tipo?"];return n[Math.floor(Math.random()*n.length)]},P=e=>{d(e)};return(0,Pt.jsxs)("div",{className:"right-panel ".concat(r?"dark-mode":""," ").concat(i?"collapsed":""),children:[(0,Pt.jsxs)("div",{className:"panel-header",children:[(0,Pt.jsxs)("div",{className:"header-content",children:[(0,Pt.jsx)("h3",{children:"\ud83e\udd16 Assistente Fault Tree"}),(0,Pt.jsx)("button",{className:"collapse-toggle",onClick:l,title:i?"Mostra pannello":"Nascondi pannello",children:i?"\u25c0":"\u25b6"})]}),(0,Pt.jsxs)("div",{className:"header-controls",children:[(0,Pt.jsxs)("div",{className:"provider-info",children:[(0,Pt.jsx)("span",{className:"provider-label",children:"Provider:"}),(0,Pt.jsxs)("div",{className:"provider-selector",children:[(0,Pt.jsxs)("button",{className:"provider-badge ".concat(y),onClick:()=>w(!x),title:"Provider attuale: ".concat(y.toUpperCase()," - Clicca per cambiare"),children:["\ud83d\udee1\ufe0f ",y.toUpperCase()," ",x?"\u25b2":"\u25bc"]}),x&&(0,Pt.jsx)("div",{className:"provider-dropdown",children:su(m).map(e=>(0,Pt.jsxs)("button",{className:"provider-option ".concat(y===e.key?"active":""),onClick:()=>{b(e.key),w(!1)},children:[cu(e.key)," ",e.name,y===e.key&&" \u2713"]},e.key))})]})]}),(0,Pt.jsx)("button",{className:"config-button",onClick:()=>v(!0),title:"Configura LLM",children:"\u2699\ufe0f"})]})]}),!i&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"chat-container",children:[(0,Pt.jsxs)("div",{className:"messages",children:[s.map(e=>(0,Pt.jsxs)("div",{className:"message ".concat(e.sender),children:[(0,Pt.jsxs)("div",{className:"message-content",children:[(0,Pt.jsx)("strong",{className:"message-prefix",children:"user"===e.sender?"Tu: ":"AFT: "}),e.text.split("\n").map((t,n)=>(0,Pt.jsxs)(o.Fragment,{children:[t,n<e.text.split("\n").length-1&&(0,Pt.jsx)("br",{})]},n))]}),(0,Pt.jsx)("div",{className:"message-time",children:e.timestamp.toLocaleTimeString()})]},e.id)),p&&(0,Pt.jsx)("div",{className:"message bot typing",children:(0,Pt.jsx)("div",{className:"message-content",children:(0,Pt.jsxs)("div",{className:"typing-indicator",children:[(0,Pt.jsx)("span",{}),(0,Pt.jsx)("span",{}),(0,Pt.jsx)("span",{})]})})}),(0,Pt.jsx)("div",{ref:C})]}),(0,Pt.jsxs)("div",{className:"quick-examples",children:[(0,Pt.jsx)("div",{className:"quick-examples-title",children:"\ud83d\ude80 Esempi di Generazione:"}),(0,Pt.jsxs)("div",{className:"quick-buttons",children:[(0,Pt.jsx)("button",{className:"quick-button",onClick:()=>P("Genera un fault tree per un sistema di alimentazione elettrica con ridondanza"),children:"\ud83d\udd0c Sistema Elettrico"}),(0,Pt.jsx)("button",{className:"quick-button",onClick:()=>P("Crea fault tree per sistema frenante automotive con ABS"),children:"\ud83d\ude97 Sistema Frenante"}),(0,Pt.jsx)("button",{className:"quick-button",onClick:()=>P("Modella fault tree per sistema di controllo industriale PLC"),children:"\ud83c\udfed Sistema Controllo"})]})]}),(0,Pt.jsxs)("div",{className:"input-area",children:[(0,Pt.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},onKeyDown:e=>{e.stopPropagation()},placeholder:"Scrivi 'genera fault tree per...' o usa gli esempi sopra!",className:"message-input",rows:3,autoFocus:!1,spellCheck:!1}),(0,Pt.jsx)("button",{onClick:E,disabled:!u.trim()||p,className:"send-button",children:"\ud83d\udce4"})]}),S.isGenerating&&(0,Pt.jsxs)("div",{className:"generation-status",children:[(0,Pt.jsx)("div",{className:"generation-spinner",children:"\u2699\ufe0f"}),(0,Pt.jsx)("span",{children:S.message||"Generazione in corso..."})]})]}),(0,Pt.jsxs)("div",{className:"help-section",children:[(0,Pt.jsx)("h4",{children:"\ud83d\udca1 Suggerimenti"}),(0,Pt.jsxs)("div",{className:"help-items",children:[(0,Pt.jsx)("div",{className:"help-item",children:"\ud83d\udd27 Genera fault tree automaticamente"}),(0,Pt.jsx)("div",{className:"help-item",children:"\u2753 Chiedi informazioni sui tipi di porte"}),(0,Pt.jsx)("div",{className:"help-item",children:"\ud83d\udcca Richiedi consigli sulla modellazione"}),(0,Pt.jsx)("div",{className:"help-item",children:"\ud83c\udfaf Analizza il tuo modello corrente"})]})]})]}),g&&(0,Pt.jsx)(lu,{isOpen:g,onClose:()=>v(!1),onConfigChange:e=>{h(e),Nt(e)}})]})},du=e=>{let{element:t,onSave:n,onClose:a,faultTreeModel:r,onShowResults:i}=e;const[l,s]=(0,o.useState)(u({name:t.name,description:t.description||""},t.parameters)),[c,d]=(0,o.useState)({failureRate:"basic-event"===t.type&&t.failureRate||"",repairRate:"",dormancyFactor:"",testInterval:""}),[p,f]=(0,o.useState)("exponential"),[m,h]=(0,o.useState)({}),[g,v]=(0,o.useState)("exponential"),[y,b]=(0,o.useState)({}),[x,w]=(0,o.useState)(!1),[S,k]=(0,o.useState)({priority:"",delay:"",spareType:"",switchingTime:""}),[C,E]=(0,o.useState)(!1),[N,j]=(0,o.useState)(!1),P=$c.hasSimulationResults(),M=$c.getComponentResults(t.id),[T,_]=(0,o.useState)(null),[D,R]=(0,o.useState)([]),[A,O]=(0,o.useState)([]);(0,o.useEffect)(()=>{if(t.parameters&&("basic-event"===t.type?d(e=>u(u({},e),t.parameters)):k(e=>u(u({},e),t.parameters))),"gate"===t.type){const e=t;E(e.isFailureGate||!1),j(e.isTopEvent||!1),_(e.gateType||null),R(e.inputs||[]),O(e.secondaryInputs||[])}if("basic-event"===t.type){const e=t;if(e.failureProbabilityDistribution)switch(f(e.failureProbabilityDistribution.type),e.failureProbabilityDistribution.type){case"exponential":h({lambda:e.failureProbabilityDistribution.lambda.toString()});break;case"weibull":h({k:e.failureProbabilityDistribution.k.toString(),lambda:e.failureProbabilityDistribution.lambda.toString(),mu:e.failureProbabilityDistribution.mu.toString()});break;case"normal":h({mu:e.failureProbabilityDistribution.mu.toString(),sigma:e.failureProbabilityDistribution.sigma.toString()});break;case"constant":h({probability:e.failureProbabilityDistribution.probability.toString()})}if(e.repairProbabilityDistribution)switch(w(!0),v(e.repairProbabilityDistribution.type),e.repairProbabilityDistribution.type){case"exponential":b({lambda:e.repairProbabilityDistribution.lambda.toString()});break;case"weibull":b({k:e.repairProbabilityDistribution.k.toString(),lambda:e.repairProbabilityDistribution.lambda.toString(),mu:e.repairProbabilityDistribution.mu.toString()});break;case"normal":b({mu:e.repairProbabilityDistribution.mu.toString(),sigma:e.repairProbabilityDistribution.sigma.toString()});break;case"constant":b({probability:e.repairProbabilityDistribution.probability.toString()})}}},[t]);const z=(e,t)=>{s(n=>u(u({},n),{},{[e]:t}))},F=(e,t)=>{d(n=>u(u({},n),{},{[e]:t}))},L=(e,t)=>{k(n=>u(u({},n),{},{[e]:t}))},I=(e,t)=>{h(n=>u(u({},n),{},{[e]:t}))},B=(e,t)=>{b(n=>u(u({},n),{},{[e]:t}))},U=e=>{R(t=>{const n=t.indexOf(e);if(n<=0)return t;const o=[...t];return[o[n-1],o[n]]=[o[n],o[n-1]],o})},H=e=>{R(t=>{const n=t.indexOf(e);if(-1===n||n>=t.length-1)return t;const o=[...t];return[o[n],o[n+1]]=[o[n+1],o[n]],o})},V=e=>{if(!r)return e;const t=r.events.find(t=>t.id===e);if(t)return t.name;const n=r.gates.find(t=>t.id===e);return n?n.name:e},W=e=>{switch(e){case"exponential":default:return"Distribuzione Esponenziale";case"weibull":return"Distribuzione di Weibull (3 parametri)";case"normal":return"Distribuzione Normale (2 parametri)";case"constant":return"Probabilit\xe0 Costante"}};return(0,Pt.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,Pt.jsxs)("div",{className:"parameter-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"modal-header",children:[(0,Pt.jsx)("h3",{children:"basic-event"===t.type?"\u2b1c Parametri Evento Base":"".concat("AND"===t.gateType?"\u2227":"OR"===t.gateType?"\u2228":"PAND"===t.gateType?"\u2295":"SPARE"===t.gateType?"\u27f2":"SEQ"===t.gateType?"\u2192":"\u27f9"," Parametri Porta ").concat(t.gateType)}),(0,Pt.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"modal-content",children:[(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:"Informazioni Generali"}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Nome:"}),(0,Pt.jsx)("input",{type:"text",value:l.name,onChange:e=>z("name",e.target.value),className:"form-input"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Descrizione:"}),(0,Pt.jsx)("textarea",{value:l.description,onChange:e=>z("description",e.target.value),className:"form-textarea",rows:3})]})]}),"basic-event"===t.type&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:"Probabilit\xe0 di Guasto"}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tipo di Distribuzione:"}),(0,Pt.jsxs)("select",{value:p,onChange:e=>{return t=e.target.value,f(t),void h({});var t},className:"form-select",children:[(0,Pt.jsx)("option",{value:"exponential",children:"Distribuzione Esponenziale"}),(0,Pt.jsx)("option",{value:"weibull",children:"Distribuzione di Weibull (3 parametri)"}),(0,Pt.jsx)("option",{value:"normal",children:"Distribuzione Normale (2 parametri)"}),(0,Pt.jsx)("option",{value:"constant",children:"Probabilit\xe0 Costante"})]}),(0,Pt.jsx)("span",{className:"form-help",children:W(p)})]}),"exponential"===p&&(0,Pt.jsx)("div",{className:"distribution-params",children:(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tasso di Guasto (\u03bb):"}),(0,Pt.jsx)("input",{type:"text",value:m.lambda||"",onChange:e=>I("lambda",e.target.value),className:"form-input",placeholder:"es. 0.001"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h\u207b\xb9 (ore alla meno 1)"})]})}),"weibull"===p&&(0,Pt.jsxs)("div",{className:"distribution-params",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Parametro di Forma (k):"}),(0,Pt.jsx)("input",{type:"text",value:m.k||"",onChange:e=>I("k",e.target.value),className:"form-input",placeholder:"es. 2.0"}),(0,Pt.jsx)("span",{className:"form-help",children:"Adimensionale"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Parametro di Scala (\u03bb):"}),(0,Pt.jsx)("input",{type:"text",value:m.lambda||"",onChange:e=>I("lambda",e.target.value),className:"form-input",placeholder:"es. 1000"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Parametro di Posizione (\u03bc):"}),(0,Pt.jsx)("input",{type:"text",value:m.mu||"",onChange:e=>I("mu",e.target.value),className:"form-input",placeholder:"es. 0"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]})]}),"normal"===p&&(0,Pt.jsxs)("div",{className:"distribution-params",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Media (\u03bc):"}),(0,Pt.jsx)("input",{type:"text",value:m.mu||"",onChange:e=>I("mu",e.target.value),className:"form-input",placeholder:"es. 8760"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Deviazione Standard (\u03c3):"}),(0,Pt.jsx)("input",{type:"text",value:m.sigma||"",onChange:e=>I("sigma",e.target.value),className:"form-input",placeholder:"es. 1000"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]})]}),"constant"===p&&(0,Pt.jsx)("div",{className:"distribution-params",children:(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Probabilit\xe0 Costante:"}),(0,Pt.jsx)("input",{type:"text",value:m.probability||"",onChange:e=>I("probability",e.target.value),className:"form-input",placeholder:"es. 0.001"}),(0,Pt.jsx)("span",{className:"form-help",children:"Adimensionale (0-1)"})]})})]}),(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:(0,Pt.jsxs)("label",{className:"section-checkbox",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:x,onChange:e=>{return t=e.target.checked,w(t),void(t||b({}));var t}}),"Probabilit\xe0 di Riparazione"]})}),x&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tipo di Distribuzione:"}),(0,Pt.jsxs)("select",{value:g,onChange:e=>{return t=e.target.value,v(t),void b({});var t},className:"form-select",children:[(0,Pt.jsx)("option",{value:"exponential",children:"Distribuzione Esponenziale"}),(0,Pt.jsx)("option",{value:"weibull",children:"Distribuzione di Weibull (3 parametri)"}),(0,Pt.jsx)("option",{value:"normal",children:"Distribuzione Normale (2 parametri)"}),(0,Pt.jsx)("option",{value:"constant",children:"Probabilit\xe0 Costante"})]}),(0,Pt.jsx)("span",{className:"form-help",children:W(g)})]}),"exponential"===g&&(0,Pt.jsx)("div",{className:"distribution-params",children:(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tasso di Riparazione (\u03bc):"}),(0,Pt.jsx)("input",{type:"text",value:y.lambda||"",onChange:e=>B("lambda",e.target.value),className:"form-input",placeholder:"es. 0.1"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h\u207b\xb9 (ore alla meno 1)"})]})}),"weibull"===g&&(0,Pt.jsxs)("div",{className:"distribution-params",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Parametro di Forma (k):"}),(0,Pt.jsx)("input",{type:"text",value:y.k||"",onChange:e=>B("k",e.target.value),className:"form-input",placeholder:"es. 2.0"}),(0,Pt.jsx)("span",{className:"form-help",children:"Adimensionale"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Parametro di Scala (\u03bb):"}),(0,Pt.jsx)("input",{type:"text",value:y.lambda||"",onChange:e=>B("lambda",e.target.value),className:"form-input",placeholder:"es. 100"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Parametro di Posizione (\u03bc):"}),(0,Pt.jsx)("input",{type:"text",value:y.mu||"",onChange:e=>B("mu",e.target.value),className:"form-input",placeholder:"es. 0"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]})]}),"normal"===g&&(0,Pt.jsxs)("div",{className:"distribution-params",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Media (\u03bc):"}),(0,Pt.jsx)("input",{type:"text",value:y.mu||"",onChange:e=>B("mu",e.target.value),className:"form-input",placeholder:"es. 24"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Deviazione Standard (\u03c3):"}),(0,Pt.jsx)("input",{type:"text",value:y.sigma||"",onChange:e=>B("sigma",e.target.value),className:"form-input",placeholder:"es. 4"}),(0,Pt.jsx)("span",{className:"form-help",children:"Unit\xe0: h (ore)"})]})]}),"constant"===g&&(0,Pt.jsx)("div",{className:"distribution-params",children:(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Probabilit\xe0 Costante:"}),(0,Pt.jsx)("input",{type:"text",value:y.probability||"",onChange:e=>B("probability",e.target.value),className:"form-input",placeholder:"es. 0.8"}),(0,Pt.jsx)("span",{className:"form-help",children:"Adimensionale (0-1)"})]})})]})]}),(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:"Altri Parametri"}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Fattore di Dormancy:"}),(0,Pt.jsx)("input",{type:"text",value:c.dormancyFactor,onChange:e=>F("dormancyFactor",e.target.value),className:"form-input",placeholder:"es. 0.5"}),(0,Pt.jsx)("span",{className:"form-help",children:"Valore tra 0 e 1"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Intervallo di Test:"}),(0,Pt.jsx)("input",{type:"text",value:c.testInterval,onChange:e=>F("testInterval",e.target.value),className:"form-input",placeholder:"es. 720"}),(0,Pt.jsx)("span",{className:"form-help",children:"Ore tra i test"})]})]})]}),"gate"===t.type&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsxs)("h4",{children:["Configurazione Porta ",t.gateType]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{className:"checkbox-label",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:C,onChange:e=>E(e.target.checked),className:"form-checkbox"}),(0,Pt.jsx)("span",{className:"checkbox-text",children:"Failure Gate"})]}),(0,Pt.jsx)("span",{className:"form-help",children:"Indica se questa porta rappresenta un guasto (default: false)"})]})]}),(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:"TOP Event"}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{className:"checkbox-label",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:N,onChange:e=>j(e.target.checked),className:"form-checkbox"}),(0,Pt.jsx)("span",{className:"checkbox-text",children:"Imposta come TOP Event"})]}),(0,Pt.jsx)("span",{className:"form-help",children:"Solo una porta pu\xf2 essere TOP EVENT; se impostata verr\xe0 rimossa l'etichetta da altre porte."})]})]}),(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:"Cambia Tipo Porta"}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tipo:"}),(0,Pt.jsxs)("select",{value:T||t.gateType,onChange:e=>_(e.target.value),className:"form-select",children:[(0,Pt.jsx)("option",{value:"AND",children:"AND"}),(0,Pt.jsx)("option",{value:"OR",children:"OR"}),(0,Pt.jsx)("option",{value:"PAND",children:"PAND"}),(0,Pt.jsx)("option",{value:"SPARE",children:"SPARE"}),(0,Pt.jsx)("option",{value:"SEQ",children:"SEQ"}),(0,Pt.jsx)("option",{value:"FDEP",children:"FDEP"})]}),(0,Pt.jsx)("span",{className:"form-help",children:"Modifica il tipo di porta. Confermando la modale, la vista verr\xe0 aggiornata."})]})]}),"SPARE"!==t.gateType&&"FDEP"!==t.gateType&&(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsx)("h4",{children:"Ordina Input"}),(0,Pt.jsx)("p",{className:"section-description",children:"Ordina gli input nell'ordine desiderato (verr\xe0 usato nell'export MATLAB)"}),(0,Pt.jsxs)("div",{className:"input-list",children:[(0,Pt.jsxs)("h5",{children:["Inputs (",D.length,")"]}),(0,Pt.jsxs)("div",{className:"input-items",children:[D.map(e=>(0,Pt.jsx)("div",{className:"input-item",children:(0,Pt.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>U(e),title:"Sposta su",children:"\u25b2"}),(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>H(e),title:"Sposta gi\xf9",children:"\u25bc"}),(0,Pt.jsx)("span",{className:"input-name",children:V(e)})]})},e)),0===D.length&&(0,Pt.jsx)("div",{className:"empty-list",children:"Nessun input"})]})]})]}),("SPARE"===t.gateType||"FDEP"===t.gateType)&&(0,Pt.jsxs)("div",{className:"form-section",children:[(0,Pt.jsxs)("h4",{children:["Gestione Input - ",t.gateType]}),(0,Pt.jsxs)("p",{className:"section-description",children:["Per le porte ",t.gateType,", \xe8 possibile distinguere tra input primari e secondari. Trascina gli elementi tra le due liste per configurarli."]}),(0,Pt.jsxs)("div",{className:"input-management",children:[(0,Pt.jsxs)("div",{className:"input-list",children:[(0,Pt.jsxs)("h5",{children:["\ud83d\udd35 Input Primari (",D.length,")"]}),(0,Pt.jsxs)("div",{className:"input-items",children:[D.map((e,t)=>(0,Pt.jsxs)("div",{className:"input-item primary",children:[(0,Pt.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>U(e),title:"Sposta su",children:"\u25b2"}),(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>H(e),title:"Sposta gi\xf9",children:"\u25bc"}),(0,Pt.jsx)("span",{className:"input-name",children:V(e)})]}),(0,Pt.jsx)("div",{children:(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>(e=>{R(t=>t.filter(t=>t!==e)),O(t=>[...t,e])})(e),title:"Sposta a secondari",children:"\u27a1\ufe0f"})})]},e)),0===D.length&&(0,Pt.jsx)("div",{className:"empty-list",children:"Nessun input primario"})]})]}),(0,Pt.jsxs)("div",{className:"input-list",children:[(0,Pt.jsxs)("h5",{children:["\ud83d\udfe1 Input Secondari (",A.length,")"]}),(0,Pt.jsxs)("div",{className:"input-items",children:[A.map(e=>(0,Pt.jsxs)("div",{className:"input-item secondary",children:[(0,Pt.jsx)("div",{children:(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>(e=>{O(t=>t.filter(t=>t!==e)),R(t=>[...t,e])})(e),title:"Sposta a primari",children:"\u2b05\ufe0f"})}),(0,Pt.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Pt.jsx)("span",{className:"input-name",children:V(e)}),(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>(e=>{O(t=>{const n=t.indexOf(e);if(n<=0)return t;const o=[...t];return[o[n-1],o[n]]=[o[n],o[n-1]],o})})(e),title:"Sposta su",children:"\u25b2"}),(0,Pt.jsx)("button",{type:"button",className:"move-button",onClick:()=>(e=>{O(t=>{const n=t.indexOf(e);if(-1===n||n>=t.length-1)return t;const o=[...t];return[o[n],o[n+1]]=[o[n+1],o[n]],o})})(e),title:"Sposta gi\xf9",children:"\u25bc"})]})]},e)),0===A.length&&(0,Pt.jsx)("div",{className:"empty-list",children:"Nessun input secondario"})]})]})]})]}),(0,Pt.jsxs)("div",{className:"form-section",children:["SPARE"===t.gateType&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tipo di Spare:"}),(0,Pt.jsxs)("select",{value:S.spareType,onChange:e=>L("spareType",e.target.value),className:"form-select",children:[(0,Pt.jsx)("option",{value:"",children:"Seleziona tipo"}),(0,Pt.jsx)("option",{value:"cold",children:"Cold Spare"}),(0,Pt.jsx)("option",{value:"warm",children:"Warm Spare"}),(0,Pt.jsx)("option",{value:"hot",children:"Hot Spare"})]})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Tempo di Commutazione:"}),(0,Pt.jsx)("input",{type:"number",step:"any",value:S.switchingTime,onChange:e=>L("switchingTime",e.target.value),className:"form-input",placeholder:"es. 0.1"}),(0,Pt.jsx)("span",{className:"form-help",children:"Tempo per attivare lo spare (ore)"})]})]}),"FDEP"===t.gateType&&(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"Ritardo di Propagazione:"}),(0,Pt.jsx)("input",{type:"number",step:"any",value:S.delay,onChange:e=>L("delay",e.target.value),className:"form-input",placeholder:"es. 0.01"}),(0,Pt.jsx)("span",{className:"form-help",children:"Ritardo nella propagazione del guasto"})]})]})]})]}),(0,Pt.jsxs)("div",{className:"modal-footer",children:[(0,Pt.jsx)("button",{className:"cancel-button",onClick:a,children:"Annulla"}),P&&M&&i&&(0,Pt.jsx)("button",{className:"results-button",onClick:()=>i(t.id),title:"Visualizza risultati simulazione (PDF/CDF)",children:"\ud83d\udcca Risultati Simulazione"}),(0,Pt.jsx)("button",{className:"save-button",onClick:()=>{const e=u(u({},t),{},{name:l.name,description:l.description,parameters:"basic-event"===t.type?c:S});if("basic-event"===t.type){let t;switch(e.failureRate=c.failureRate?parseFloat(c.failureRate.toString()):void 0,p){case"exponential":default:t={type:"exponential",lambda:parseFloat(m.lambda)||0};break;case"weibull":t={type:"weibull",k:parseFloat(m.k)||1,lambda:parseFloat(m.lambda)||1,mu:parseFloat(m.mu)||0};break;case"normal":t={type:"normal",mu:parseFloat(m.mu)||0,sigma:parseFloat(m.sigma)||1};break;case"constant":t={type:"constant",probability:parseFloat(m.probability)||0}}if(e.failureProbabilityDistribution=t,x){let t;switch(g){case"exponential":default:t={type:"exponential",lambda:parseFloat(y.lambda)||0};break;case"weibull":t={type:"weibull",k:parseFloat(y.k)||1,lambda:parseFloat(y.lambda)||1,mu:parseFloat(y.mu)||0};break;case"normal":t={type:"normal",mu:parseFloat(y.mu)||0,sigma:parseFloat(y.sigma)||1};break;case"constant":t={type:"constant",probability:parseFloat(y.probability)||0}}e.repairProbabilityDistribution=t}else e.repairProbabilityDistribution=void 0}else"gate"===t.type&&(e.isFailureGate=C,e.inputs=D,e.secondaryInputs=A,e.isTopEvent=N,T&&(e.gateType=T));n(e)},children:"Salva"})]})]})})},pu=e=>{let{isOpen:t,onClose:n,elementId:a}=e;const[r,i]=(0,o.useState)(null),[l,s]=(0,o.useState)("summary");if((0,o.useEffect)(()=>{if(t&&a){const e=$c.getComponentResults(a);i(e)}},[t,a]),!t||!r)return null;const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e.toFixed(t)).toString()},u=e=>{const t="cdf"===e?r.cdfData:r.pdfData,n="cdf"===e?"Funzione di Distribuzione Cumulativa (CDF)":"Funzione di Densit\xe0 di Probabilit\xe0 (PDF)",o="cdf"===e?"Probabilit\xe0 Cumulativa":"Densit\xe0";if(console.log("\ud83d\udd0d [DEBUG] Rendering ".concat(e.toUpperCase()," chart for ").concat(r.componentName)),console.log("  \ud83d\udcca Data available:",!!t),console.log("  \ud83d\udcc8 Data length:",null===t||void 0===t?void 0:t.length),console.log("  \ud83d\udccb First 3 data points:",null===t||void 0===t?void 0:t.slice(0,3)),!t||0===t.length)return console.log("\u274c [DEBUG] No data available for ".concat(e.toUpperCase()," chart")),(0,Pt.jsx)("div",{className:"chart-placeholder",children:(0,Pt.jsxs)("div",{className:"chart-error",children:[(0,Pt.jsx)("h3",{children:n}),(0,Pt.jsx)("p",{children:"\u274c Dati non disponibili per la visualizzazione"}),(0,Pt.jsxs)("p",{children:["I dati per il grafico ",e.toUpperCase()," non sono stati generati correttamente."]})]})});const a=Math.max(...t.map(e=>e.time)),i=Math.max(...t.map(t=>"cdf"===e?t.probability:t.density)),l=300,s=20,u=60,d=600-u-30,p=l-s-50,f=t.map((t,n)=>{const o=u+t.time/a*d,r=s+p-("cdf"===e?t.probability:t.density)/i*p;return"".concat(0===n?"M":"L"," ").concat(o," ").concat(r)}).join(" ");return(0,Pt.jsxs)("div",{className:"chart-container",children:[(0,Pt.jsx)("h3",{children:n}),(0,Pt.jsx)("div",{className:"chart-wrapper",children:(0,Pt.jsxs)("svg",{width:600,height:l,className:"reliability-chart",children:[(0,Pt.jsx)("defs",{children:(0,Pt.jsx)("pattern",{id:"grid",width:"40",height:"30",patternUnits:"userSpaceOnUse",children:(0,Pt.jsx)("path",{d:"M 40 0 L 0 0 0 30",fill:"none",stroke:"#e0e0e0",strokeWidth:"1"})})}),(0,Pt.jsx)("rect",{width:d,height:p,x:u,y:s,fill:"url(#grid)"}),(0,Pt.jsx)("line",{x1:u,y1:s+p,x2:u+d,y2:s+p,stroke:"#333",strokeWidth:"2"}),(0,Pt.jsx)("line",{x1:u,y1:s,x2:u,y2:s+p,stroke:"#333",strokeWidth:"2"}),(0,Pt.jsx)("path",{d:f,fill:"none",stroke:"cdf"===e?"#3498db":"#e74c3c",strokeWidth:"2"}),(0,Pt.jsx)("text",{x:u+d/2,y:290,textAnchor:"middle",className:"axis-label",children:"Tempo (ore)"}),(0,Pt.jsx)("text",{x:15,y:s+p/2,textAnchor:"middle",transform:"rotate(-90, 15, ".concat(s+p/2,")"),className:"axis-label",children:o}),[0,.25,.5,.75,1].map(e=>(0,Pt.jsx)("text",{x:u+e*d,y:275,textAnchor:"middle",className:"axis-tick",children:c(e*a,0)},e)),[0,.25,.5,.75,1].map(t=>(0,Pt.jsx)("text",{x:u-10,y:s+p-t*p+5,textAnchor:"end",className:"axis-tick",children:c(t*i,"cdf"===e?2:4)},t))]})}),(0,Pt.jsxs)("div",{className:"chart-description",children:[(0,Pt.jsxs)("p",{children:[(0,Pt.jsxs)("strong",{children:["cdf"===e?"CDF":"PDF",":"]})," ","cdf"===e?"Mostra la probabilit\xe0 che il componente si guasti entro un tempo t.":"Mostra la densit\xe0 di probabilit\xe0 di guasto in funzione del tempo."]}),(0,Pt.jsxs)("p",{className:"chart-stats",children:["\ud83d\udcca ",(0,Pt.jsx)("strong",{children:"Punti dati:"})," ",t.length," |",(0,Pt.jsx)("strong",{children:" Max X:"})," ",c(a)," ore |",(0,Pt.jsx)("strong",{children:" Max Y:"})," ",c(i,"cdf"===e?3:6)]})]})]})};return(0,Pt.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Pt.jsxs)("div",{className:"component-results-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"modal-header",children:[(0,Pt.jsxs)("h2",{children:["\ud83d\udcc8 Risultati Simulazione - ",r.componentName]}),(0,Pt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"modal-tabs",children:[(0,Pt.jsx)("button",{className:"tab-button ".concat("summary"===l?"active":""),onClick:()=>s("summary"),children:"\ud83d\udcca Sommario"}),(0,Pt.jsx)("button",{className:"tab-button ".concat("cdf"===l?"active":""),onClick:()=>s("cdf"),children:"\ud83d\udcc8 CDF"}),(0,Pt.jsx)("button",{className:"tab-button ".concat("pdf"===l?"active":""),onClick:()=>s("pdf"),children:"\ud83d\udcca PDF"})]}),(0,Pt.jsxs)("div",{className:"modal-content",children:["summary"===l&&(0,Pt.jsxs)("div",{className:"results-summary",children:[(0,Pt.jsx)("h3",{children:"\ud83d\udcca Sommario Risultati"}),(0,Pt.jsxs)("div",{className:"results-grid",children:[(0,Pt.jsxs)("div",{className:"result-card",children:[(0,Pt.jsx)("div",{className:"result-label",children:"Componente"}),(0,Pt.jsx)("div",{className:"result-value",children:r.componentName})]}),(0,Pt.jsxs)("div",{className:"result-card",children:[(0,Pt.jsx)("div",{className:"result-label",children:"Tipo"}),(0,Pt.jsx)("div",{className:"result-value",children:"event"===r.componentType?"\u2b1c Evento Base":"\ud83d\udd17 Porta"})]}),(0,Pt.jsxs)("div",{className:"result-card reliability-card",children:[(0,Pt.jsx)("div",{className:"result-label",children:"Affidabilit\xe0"}),(0,Pt.jsxs)("div",{className:"result-value reliability-value",children:[(100*r.reliability).toFixed(2),"%"]})]}),(0,Pt.jsxs)("div",{className:"result-card unreliability-card",children:[(0,Pt.jsx)("div",{className:"result-label",children:"Inaffidabilit\xe0"}),(0,Pt.jsxs)("div",{className:"result-value unreliability-value",children:[(100*r.unreliability).toFixed(2),"%"]})]}),(0,Pt.jsxs)("div",{className:"result-card",children:[(0,Pt.jsx)("div",{className:"result-label",children:"Iterazioni Guastate"}),(0,Pt.jsx)("div",{className:"result-value",children:r.nFailures})]}),(0,Pt.jsxs)("div",{className:"result-card",children:[(0,Pt.jsx)("div",{className:"result-label",children:"Iterazioni Totali"}),(0,Pt.jsx)("div",{className:"result-value",children:r.totalIterations})]})]}),(0,Pt.jsxs)("div",{className:"detailed-info",children:[(0,Pt.jsx)("h4",{children:"\ud83d\udccb Informazioni Dettagliate"}),(0,Pt.jsxs)("div",{className:"info-grid",children:[(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Affidabilit\xe0 R(t):"})," La probabilit\xe0 che il componente funzioni correttamente per tutto il tempo di missione."]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Calcolo:"})," R = (Iterazioni senza guasto) / (Iterazioni totali) = ",r.totalIterations-r.nFailures,"/",r.totalIterations]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("strong",{children:"Tempo di Guasto:"})," Per ogni iterazione viene registrato il tempo di primo guasto (\u221e se mai guastato)."]})]})]})]}),"cdf"===l&&u("cdf"),"pdf"===l&&u("pdf")]}),(0,Pt.jsx)("div",{className:"modal-footer",children:(0,Pt.jsx)("button",{className:"close-modal-button",onClick:n,children:"Chiudi"})})]})})};function fu(e){const t=(new Date).toISOString();return{modelType:e,version:"1.0.0",createdAt:t,lastModified:t}}const mu=["_metadata"];class hu{static async saveModelWithMetadata(e,t,n){const o=u({_metadata:fu(t)},e),a=JSON.stringify(o,null,2),r=new Blob([a],{type:"application/json"}),i=n||"".concat("fault-tree"===t?"fault-tree":"markov-chain","-").concat((new Date).toISOString().split("T")[0],".json");if("undefined"!==typeof window&&"showSaveFilePicker"in window)try{const e=await window.showSaveFilePicker({suggestedName:i,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),t=await e.createWritable();return await t.write(r),await t.close(),{url:"",filename:i,fileHandle:e}}catch(c){if("AbortError"===c.name)throw new Error("Salvataggio annullato dall'utente");throw console.error("Errore durante il salvataggio:",c),c}const l=URL.createObjectURL(r),s=document.createElement("a");return s.href=l,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),{url:l,filename:i}}static async saveFaultTree(e,t){const n=JSON.stringify(e,null,2),o=new Blob([n],{type:"application/json"});if("undefined"!==typeof window&&"showSaveFilePicker"in window)try{const e=t||"fault-tree-".concat((new Date).toISOString().split("T")[0],".json"),n=await window.showSaveFilePicker({suggestedName:e,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]});if("createWritable"in n){const e=await n.createWritable();await e.write(o),await e.close()}else{if(!("createSyncAccessHandle"in n))throw new Error("API File System Access non supportata");{const e=await n.createSyncAccessHandle(),t=await o.arrayBuffer();e.write(t,{at:0}),e.close()}}return}catch(i){console.log("File System Access non disponibile o annullato, uso fallback:",i)}const a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=t||"fault-tree-".concat((new Date).toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(a)}static async overwriteExistingFile(e,t){const n=JSON.stringify(e,null,2),o=new Blob([n],{type:"application/json"});try{if("createWritable"in t){const e=await t.createWritable();await e.write(o),await e.close()}else if("createSyncAccessHandle"in t){const e=await t.createSyncAccessHandle(),n=await o.arrayBuffer();e.write(n,{at:0}),e.close()}else{const e=await t.createWritable();await e.write(o),await e.close()}}catch(a){console.log("File System Access fallito, uso fallback:",a);const e=URL.createObjectURL(o),t=document.createElement("a");throw t.href=e,t.download="fault-tree-".concat((new Date).toISOString().split("T")[0],".json"),t.click(),URL.revokeObjectURL(e),new Error("Errore durante la sovrascrittura del file: ".concat(a instanceof Error?a.message:"Errore sconosciuto"))}}static async openModelWithValidation(e,t){return new Promise((n,o)=>{const a=new FileReader;a.onload=e=>{try{var a;const i=null===(a=e.target)||void 0===a?void 0:a.result,l=JSON.parse(i),s=function(e){if(e&&"object"===typeof e){if(e._metadata&&e._metadata.modelType)return e._metadata.modelType;if(void 0!==e.events&&void 0!==e.gates&&void 0!==e.connections)return"fault-tree";if(void 0!==e.states&&void 0!==e.transitions)return"markov-chain"}return"unknown"}(l);if("unknown"===s)return void o(new Error("Formato file non riconosciuto. Il file deve contenere un modello Fault Tree o Markov Chain valido."));if(s!==t){const e={"fault-tree":"Fault Tree","markov-chain":"Markov Chain"};return void o(new Error("Tipo di modello errato. Hai caricato un modello ".concat(e[s],", ma ti trovi nell'editor ").concat(e[t],".")))}const{_metadata:c}=l,u=r(l,mu);if("fault-tree"===s){if(!u.events||!u.gates||!u.connections)throw new Error("Formato Fault Tree non valido: mancano eventi, porte o connessioni")}else if("markov-chain"===s&&(!u.states||!u.transitions))throw new Error("Formato Markov Chain non valido: mancano stati o transizioni");n({model:u,actualType:s})}catch(i){i instanceof Error?o(i):o(new Error("Errore nel parsing del file: ".concat(i instanceof Error?i.message:"Errore sconosciuto")))}},a.onerror=()=>{o(new Error("Errore nella lettura del file"))},a.readAsText(e)})}static async openFaultTree(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=e=>{try{var o;const n=null===(o=e.target)||void 0===o?void 0:o.result,a=JSON.parse(n);if(!a.events||!a.gates||!a.connections)throw new Error("Formato file non valido: mancano eventi, porte o connessioni");t(a)}catch(a){n(new Error("Errore nel parsing del file: ".concat(a instanceof Error?a.message:"Errore sconosciuto")))}},o.onerror=()=>{n(new Error("Errore nella lettura del file"))},o.readAsText(e)})}static async exportToXML(e,t){const n=this.generateXML(e),o=new Blob([n],{type:"application/xml"});if("undefined"!==typeof window&&"showSaveFilePicker"in window)try{const e=t||"fault-tree-".concat((new Date).toISOString().split("T")[0],".xml"),n=await window.showSaveFilePicker({suggestedName:e,types:[{description:"XML Files",accept:{"application/xml":[".xml"]}}]});if("createWritable"in n){const e=await n.createWritable();await e.write(o),await e.close()}else{if(!("createSyncAccessHandle"in n))throw new Error("API File System Access non supportata");{const e=await n.createSyncAccessHandle(),t=await o.arrayBuffer();e.write(t,{at:0}),e.close()}}return}catch(i){console.log("File System Access non disponibile o annullato, uso fallback:",i)}const a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=t||"fault-tree-".concat((new Date).toISOString().split("T")[0],".xml"),r.click(),URL.revokeObjectURL(a)}static async exportToCSV(e,t){const n=this.generateCSV(e),o=new Blob([n],{type:"text/csv"});if("undefined"!==typeof window&&"showSaveFilePicker"in window)try{const e=t||"fault-tree-".concat((new Date).toISOString().split("T")[0],".csv"),n=await window.showSaveFilePicker({suggestedName:e,types:[{description:"CSV Files",accept:{"text/csv":[".csv"]}}]});if("createWritable"in n){const e=await n.createWritable();await e.write(o),await e.close()}else{if(!("createSyncAccessHandle"in n))throw new Error("API File System Access non supportata");{const e=await n.createSyncAccessHandle(),t=await o.arrayBuffer();e.write(t,{at:0}),e.close()}}return}catch(i){console.log("File System Access non disponibile o annullato, uso fallback:",i)}const a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=t||"fault-tree-".concat((new Date).toISOString().split("T")[0],".csv"),r.click(),URL.revokeObjectURL(a)}static async exportCode(e,t){const n=new Blob([e],{type:"text/plain"});if("undefined"!==typeof window&&"showSaveFilePicker"in window)try{const e=t||"fault-tree-code-".concat((new Date).toISOString().split("T")[0],".txt"),o=await window.showSaveFilePicker({suggestedName:e,types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}]});if("createWritable"in o){const e=await o.createWritable();await e.write(n),await e.close()}else{if(!("createSyncAccessHandle"in o))throw new Error("API File System Access non supportata");{const e=await o.createSyncAccessHandle(),t=await n.arrayBuffer();e.write(t,{at:0}),e.close()}}return}catch(r){console.log("File System Access non disponibile o annullato, uso fallback:",r)}const o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=t||"fault-tree-code-".concat((new Date).toISOString().split("T")[0],".txt"),a.click(),URL.revokeObjectURL(o)}static generateXML(e){let t='<?xml version="1.0" encoding="UTF-8"?>\n';return t+="<faultTree>\n",t+="  <events>\n",e.events.forEach(e=>{if(t+='    <event id="'.concat(e.id,'" type="').concat(e.type,'">\n'),t+="      <name>".concat(this.escapeXML(e.name),"</name>\n"),e.description&&(t+="      <description>".concat(this.escapeXML(e.description),"</description>\n")),e.failureRate&&(t+="      <failureRate>".concat(e.failureRate,"</failureRate>\n")),e.failureProbabilityDistribution){switch(t+='      <failureProbabilityDistribution type="'.concat(e.failureProbabilityDistribution.type,'">\n'),e.failureProbabilityDistribution.type){case"exponential":t+="        <lambda>".concat(e.failureProbabilityDistribution.lambda,"</lambda>\n");break;case"weibull":t+="        <k>".concat(e.failureProbabilityDistribution.k,"</k>\n"),t+="        <lambda>".concat(e.failureProbabilityDistribution.lambda,"</lambda>\n"),t+="        <mu>".concat(e.failureProbabilityDistribution.mu,"</mu>\n");break;case"normal":t+="        <mu>".concat(e.failureProbabilityDistribution.mu,"</mu>\n"),t+="        <sigma>".concat(e.failureProbabilityDistribution.sigma,"</sigma>\n");break;case"constant":t+="        <probability>".concat(e.failureProbabilityDistribution.probability,"</probability>\n")}t+="      </failureProbabilityDistribution>\n"}if(e.repairProbabilityDistribution){switch(t+='      <repairProbabilityDistribution type="'.concat(e.repairProbabilityDistribution.type,'">\n'),e.repairProbabilityDistribution.type){case"exponential":t+="        <lambda>".concat(e.repairProbabilityDistribution.lambda,"</lambda>\n");break;case"weibull":t+="        <k>".concat(e.repairProbabilityDistribution.k,"</k>\n"),t+="        <lambda>".concat(e.repairProbabilityDistribution.lambda,"</lambda>\n"),t+="        <mu>".concat(e.repairProbabilityDistribution.mu,"</mu>\n");break;case"normal":t+="        <mu>".concat(e.repairProbabilityDistribution.mu,"</mu>\n"),t+="        <sigma>".concat(e.repairProbabilityDistribution.sigma,"</sigma>\n");break;case"constant":t+="        <probability>".concat(e.repairProbabilityDistribution.probability,"</probability>\n")}t+="      </repairProbabilityDistribution>\n"}t+='      <position x="'.concat(e.position.x,'" y="').concat(e.position.y,'" />\n'),t+="    </event>\n"}),t+="  </events>\n",t+="  <gates>\n",e.gates.forEach(e=>{t+='    <gate id="'.concat(e.id,'" type="').concat(e.type,'" gateType="').concat(e.gateType,'">\n'),t+="      <name>".concat(this.escapeXML(e.name),"</name>\n"),e.description&&(t+="      <description>".concat(this.escapeXML(e.description),"</description>\n")),t+='      <position x="'.concat(e.position.x,'" y="').concat(e.position.y,'" />\n'),t+="      <inputs>\n",e.inputs.forEach(e=>{t+="        <input>".concat(e,"</input>\n")}),t+="      </inputs>\n",t+="    </gate>\n"}),t+="  </gates>\n",t+="  <connections>\n",e.connections.forEach(e=>{t+='    <connection id="'.concat(e.id,'" source="').concat(e.source,'" target="').concat(e.target,'" type="').concat(e.type,'" />\n')}),t+="  </connections>\n",e.topEvent&&(t+="  <topEvent>".concat(e.topEvent,"</topEvent>\n")),t+="</faultTree>",t}static generateCSV(e){let t="Element Type,ID,Name,Description,Position X,Position Y,Failure Distribution,Repair Distribution,Additional Info\n";return e.events.forEach(e=>{let n="",o="",a="";if(e.failureProbabilityDistribution){const t=[];switch(e.failureProbabilityDistribution.type){case"exponential":t.push("lambda: ".concat(e.failureProbabilityDistribution.lambda," h\u207b\xb9"));break;case"weibull":t.push("k: ".concat(e.failureProbabilityDistribution.k)),t.push("lambda: ".concat(e.failureProbabilityDistribution.lambda," h")),t.push("mu: ".concat(e.failureProbabilityDistribution.mu," h"));break;case"normal":t.push("mu: ".concat(e.failureProbabilityDistribution.mu," h")),t.push("sigma: ".concat(e.failureProbabilityDistribution.sigma," h"));break;case"constant":t.push("probability: ".concat(e.failureProbabilityDistribution.probability))}n="".concat(e.failureProbabilityDistribution.type,": ").concat(t.join("; "))}if(e.repairProbabilityDistribution){const t=[];switch(e.repairProbabilityDistribution.type){case"exponential":t.push("lambda: ".concat(e.repairProbabilityDistribution.lambda," h\u207b\xb9"));break;case"weibull":t.push("k: ".concat(e.repairProbabilityDistribution.k)),t.push("lambda: ".concat(e.repairProbabilityDistribution.lambda," h")),t.push("mu: ".concat(e.repairProbabilityDistribution.mu," h"));break;case"normal":t.push("mu: ".concat(e.repairProbabilityDistribution.mu," h")),t.push("sigma: ".concat(e.repairProbabilityDistribution.sigma," h"));break;case"constant":t.push("probability: ".concat(e.repairProbabilityDistribution.probability))}o="".concat(e.repairProbabilityDistribution.type,": ").concat(t.join("; "))}e.failureRate&&(a="Failure Rate: ".concat(e.failureRate)),t+="Event,".concat(e.id,',"').concat(e.name,'","').concat(e.description||"",'",').concat(e.position.x,",").concat(e.position.y,',"').concat(n,'","').concat(o,'","').concat(a,'"\n')}),e.gates.forEach(e=>{t+="Gate,".concat(e.id,',"').concat(e.name,'","').concat(e.description||"",'",').concat(e.position.x,",").concat(e.position.y,',"","","Type: ').concat(e.gateType,", Inputs: ").concat(e.inputs.length,'"\n')}),t+="\nConnections\n",t+="Source,Target,Type\n",e.connections.forEach(e=>{t+="".concat(e.source,",").concat(e.target,",").concat(e.type,"\n")}),t}static escapeXML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}static validateModel(e){const t=[];e.events&&0!==e.events.length||t.push("Il modello deve contenere almeno un evento base"),e.gates&&0!==e.gates.length||t.push("Il modello deve contenere almeno una porta"),e.connections&&0!==e.connections.length||t.push("Il modello deve contenere almeno una connessione");const n=new Set([...e.events.map(e=>e.id),...e.gates.map(e=>e.id)]);return e.connections.forEach(e=>{n.has(e.source)||t.push("Connessione con source ID '".concat(e.source,"' non trovato")),n.has(e.target)||t.push("Connessione con target ID '".concat(e.target,"' non trovato"))}),{isValid:0===t.length,errors:t}}static generateDefaultFilename(){const e=new Date,t=e.toISOString().split("T")[0],n=e.toTimeString().split(" ")[0].replace(/:/g,"-");return"fault-tree-".concat(t,"-").concat(n)}}const gu=e=>{let{isOpen:t,onClose:n,faultTreeModel:a}=e;const[r,i]=(0,o.useState)(hu.generateDefaultFilename()),[l,s]=(0,o.useState)("json"),[c,u]=(0,o.useState)(!0),[d,p]=(0,o.useState)(!1);if(!t)return null;const f=()=>{i(hu.generateDefaultFilename()),s("json"),u(!0),p(!1),n()};return(0,Pt.jsx)("div",{className:"save-modal-overlay",onClick:f,children:(0,Pt.jsxs)("div",{className:"save-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"save-modal-header",children:[(0,Pt.jsx)("h2",{children:"\ud83d\udcbe Salva Fault Tree"}),(0,Pt.jsx)("button",{className:"close-button",onClick:f,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"save-modal-content",children:[(0,Pt.jsx)("div",{className:"info-message",children:(0,Pt.jsxs)("p",{children:["\ud83d\udca1 ",(0,Pt.jsx)("strong",{children:"Nuovo!"})," Ora puoi scegliere la cartella di destinazione e modificare il nome file per tutti i tipi di salvataggio."]})}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"filename",children:"Nome File:"}),(0,Pt.jsx)("input",{id:"filename",type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Inserisci nome file",className:"filename-input"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"format",children:"Formato:"}),(0,Pt.jsxs)("select",{id:"format",value:l,onChange:e=>s(e.target.value),className:"format-select",children:[(0,Pt.jsx)("option",{value:"json",children:"JSON (.json)"}),(0,Pt.jsx)("option",{value:"xml",children:"XML (.xml)"}),(0,Pt.jsx)("option",{value:"csv",children:"CSV (.csv)"})]})]}),(0,Pt.jsx)("div",{className:"form-group",children:(0,Pt.jsxs)("label",{className:"checkbox-label",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked)}),"Includi metadati (data, versione, ecc.)"]})}),(0,Pt.jsxs)("div",{className:"file-info",children:[(0,Pt.jsx)("h4",{children:"Informazioni File:"}),(0,Pt.jsxs)("ul",{children:[(0,Pt.jsxs)("li",{children:["\ud83d\udcca Eventi: ",a.events.length]}),(0,Pt.jsxs)("li",{children:["\ud83d\udd0c Porte: ",a.gates.length]}),(0,Pt.jsxs)("li",{children:["\ud83d\udd17 Connessioni: ",a.connections.length]}),(0,Pt.jsxs)("li",{children:["\ud83d\udcc1 Formato: ",l.toUpperCase()]})]})]})]}),(0,Pt.jsxs)("div",{className:"save-modal-actions",children:[(0,Pt.jsx)("button",{className:"save-button primary",onClick:async()=>{if(r.trim()){p(!0);try{const e=hu.validateModel(a);if(!e.isValid)return void alert("Errore di validazione:\n".concat(e.errors.join("\n")));switch(l){case"json":await hu.saveFaultTree(a,"".concat(r,".json"));break;case"xml":await hu.exportToXML(a,"".concat(r,".xml"));break;case"csv":await hu.exportToCSV(a,"".concat(r,".csv"))}alert("File salvato con successo!"),n()}catch(e){alert("Errore durante il salvataggio: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}finally{p(!1)}}else alert("Inserisci un nome file valido")},disabled:d||!r.trim(),children:d?"\u23f3 Salvando...":"\ud83d\udcbe Salva"}),(0,Pt.jsx)("button",{className:"save-button secondary",onClick:async()=>{try{await hu.saveFaultTree(a),n()}catch(e){alert("Errore durante il salvataggio rapido: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}},disabled:d,children:"\ud83d\ude80 Salvataggio Rapido (JSON)"}),(0,Pt.jsx)("button",{className:"cancel-button",onClick:f,disabled:d,children:"\u274c Annulla"})]})]})})};class vu{static async exportToMatlab(e,t){const n=this.generateMatlabCode(e,t),o=new Blob([n],{type:"text/plain"});if("undefined"!==typeof window&&"showSaveFilePicker"in window)try{const e=t.filename||"fault-tree-".concat((new Date).toISOString().split("T")[0],".m"),n=await window.showSaveFilePicker({suggestedName:e,types:[{description:"MATLAB Files",accept:{"text/plain":[".m"]}}]}),a=await n.createWritable();return await a.write(o),void await a.close()}catch(i){console.log("File System Access non disponibile o annullato, uso fallback:",i)}const a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=t.filename||"fault-tree-".concat((new Date).toISOString().split("T")[0],".m"),r.click(),URL.revokeObjectURL(a)}static generateMatlabCode(e,t){let n="%% Define the Fault Tree Structure %%\n";n+="Tm = ".concat(t.missionTime,"; %[h]\n\n"),n+="%% Define BEs %%\n\n",e.events.forEach(e=>{n+=this.generateBasicEventCode(e)}),n+="\n%% Define Gates %%\n";this.getBottomUpOrdering(e).forEach(t=>{n+=this.generateGateCode(t,e)});const o=this.findTopEvent(e);return o&&(n+="TOP = ".concat(o.name,";\n")),n+="%% Recall Matlab Script %%\n",n+="%verify if the FT Structure is valid (it will modify the value of the variable UNVALID_FT)\n",n+="createFTStructure\n",n}static generateBasicEventCode(e){const t=this.sanitizeMatlabName(e.name);let n="''",o="''",a="[]",r="[]";if(e.failureProbabilityDistribution){const t=e.failureProbabilityDistribution;switch(t.type){case"exponential":n="'exp'",a="[".concat(t.lambda,"]");break;case"weibull":n="'weibull'",a="[".concat(t.k,", ").concat(t.lambda,", ").concat(t.mu,"]");break;case"normal":n="'normal'",a="[".concat(t.mu,", ").concat(t.sigma,"]");break;case"constant":n="'constant'",a="[".concat(t.probability,"]")}}else e.failureRate&&(n="'exp'",a="[".concat(e.failureRate,"]"));if(e.repairProbabilityDistribution){const t=e.repairProbabilityDistribution;switch(t.type){case"exponential":o="'exp'",r="[".concat(t.lambda,"]");break;case"weibull":o="'weibull'",r="[".concat(t.k,", ").concat(t.lambda,", ").concat(t.mu,"]");break;case"normal":o="'normal'",r="[".concat(t.mu,", ").concat(t.sigma,"]");break;case"constant":o="'constant'",r="[".concat(t.probability,"]")}}return"".concat(t," = BasicEvent('").concat(t,"',").concat(n,",").concat(o,",").concat(a,",").concat(r,");\n")}static generateGateCode(e,t){const n=this.sanitizeMatlabName(e.name),o=e.gateType,a=e.isFailureGate||!1,r=e.inputs.map(e=>{const n=this.findElementById(t,e);return n?this.sanitizeMatlabName(n.name):e});if("SPARE"===o||"FDEP"===o){const i="[".concat(r.join(", "),"]");let l="[]";if(e.secondaryInputs&&e.secondaryInputs.length>0){const n=e.secondaryInputs.map(e=>{const n=this.findElementById(t,e);return n?this.sanitizeMatlabName(n.name):e});l="[".concat(n.join(", "),"]")}return"".concat(n," = Gate('").concat(n,"', '").concat(o,"', ").concat(a?"true":"false",", ").concat(i,", ").concat(l,");\n")}{const e="[".concat(r.join(", "),"]");return"".concat(n," = Gate('").concat(n,"', '").concat(o,"', ").concat(a?"true":"false",", ").concat(e,");\n")}}static getBottomUpOrdering(e){const t=new Set,n=new Set,o=[],a=r=>{if(t.has(r))return;if(n.has(r))return void console.warn("Circular dependency detected involving gate ".concat(r));const i=e.gates.find(e=>e.id===r);i&&(n.add(r),i.inputs.forEach(n=>{e.gates.find(e=>e.id===n)&&!t.has(n)&&a(n)}),n.delete(r),t.add(r),o.push(i))};return e.gates.forEach(e=>{t.has(e.id)||a(e.id)}),o}static findTopEvent(e){if(e.topEvent)return e.gates.find(t=>t.id===e.topEvent)||null;const t=new Set;e.gates.forEach(n=>{n.inputs.forEach(n=>{e.gates.some(e=>e.id===n)&&t.add(n)})});const n=e.gates.filter(e=>!t.has(e.id));return n.length>0?n[0]:null}static findElementById(e,t){const n=e.events.find(e=>e.id===t);if(n)return n;const o=e.gates.find(e=>e.id===t);return o||null}static sanitizeMatlabName(e){let t=e.replace(/[^a-zA-Z0-9_]/g,"_");return/^[a-zA-Z]/.test(t)||(t="E_"+t),t=t.replace(/_+/g,"_"),t=t.replace(/_+$/,""),t}}const yu=e=>{let{isOpen:t,onClose:n,faultTreeModel:a,missionTime:r=500}=e;const[i,l]=(0,o.useState)("fault-tree-".concat((new Date).toISOString().split("T")[0],".m")),[s,c]=(0,o.useState)(r),[u,d]=(0,o.useState)(!1);if(!t)return null;return(0,Pt.jsx)("div",{className:"matlab-export-modal-overlay",onClick:n,children:(0,Pt.jsxs)("div",{className:"matlab-export-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"matlab-export-modal-header",children:[(0,Pt.jsx)("h2",{children:"\ud83e\uddee Esporta MATLAB"}),(0,Pt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"matlab-export-modal-content",children:[(0,Pt.jsxs)("div",{className:"export-info",children:[(0,Pt.jsx)("h3",{children:"\ud83d\udcca Informazioni Modello"}),(0,Pt.jsxs)("div",{className:"model-stats",children:[(0,Pt.jsxs)("div",{className:"stat-item",children:[(0,Pt.jsx)("span",{className:"stat-label",children:"Eventi Base:"}),(0,Pt.jsx)("span",{className:"stat-value",children:a.events.length})]}),(0,Pt.jsxs)("div",{className:"stat-item",children:[(0,Pt.jsx)("span",{className:"stat-label",children:"Porte:"}),(0,Pt.jsx)("span",{className:"stat-value",children:a.gates.length})]}),(0,Pt.jsxs)("div",{className:"stat-item",children:[(0,Pt.jsx)("span",{className:"stat-label",children:"Connessioni:"}),(0,Pt.jsx)("span",{className:"stat-value",children:a.connections.length})]})]})]}),(0,Pt.jsxs)("div",{className:"export-options",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"filename",children:"\ud83d\udcc1 Nome File:"}),(0,Pt.jsx)("input",{id:"filename",type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"fault-tree.m"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"missionTime",children:"\u23f1\ufe0f Tempo di Missione (Tm) [h]:"}),(0,Pt.jsx)("input",{id:"missionTime",type:"number",value:s,onChange:e=>c(Number(e.target.value)),placeholder:"500",min:"0",step:"0.1"}),(0,Pt.jsx)("small",{className:"form-help",children:"Tempo di missione in ore per l'analisi del fault tree"})]})]}),(0,Pt.jsxs)("div",{className:"export-preview",children:[(0,Pt.jsx)("h4",{children:"\ud83d\udccb Anteprima Struttura"}),(0,Pt.jsxs)("div",{className:"preview-content",children:[(0,Pt.jsxs)("p",{children:[(0,Pt.jsx)("strong",{children:"Formato MATLAB:"})," Bottom-up ordering"]}),(0,Pt.jsxs)("p",{children:[(0,Pt.jsx)("strong",{children:"Eventi Base:"})," BasicEvent('nome', 'failure_prob', 'repair_prob', [params_failure], [params_repair])"]}),(0,Pt.jsxs)("p",{children:[(0,Pt.jsx)("strong",{children:"Porte:"})," Gate('nome', 'tipo', false, [inputs])"]}),(0,Pt.jsxs)("p",{children:[(0,Pt.jsx)("strong",{children:"Porte SPARE/FDEP:"})," Gate('nome', 'tipo', false, [primary_inputs], [secondary_inputs])"]})]})]})]}),(0,Pt.jsxs)("div",{className:"matlab-export-modal-actions",children:[(0,Pt.jsx)("button",{className:"cancel-button",onClick:n,disabled:u,children:"Annulla"}),(0,Pt.jsx)("button",{className:"export-button primary",onClick:async()=>{if(i.trim())if(s<=0)alert("Il tempo di missione deve essere maggiore di 0");else{d(!0);try{if(0===a.events.length&&0===a.gates.length)return void alert("Il modello di fault tree \xe8 vuoto. Aggiungi almeno un evento base o una porta.");await vu.exportToMatlab(a,{missionTime:s,filename:i.endsWith(".m")?i:"".concat(i,".m")}),alert("File MATLAB esportato con successo!"),n()}catch(e){alert("Errore durante l'esportazione: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}finally{d(!1)}}else alert("Inserisci un nome file valido")},disabled:u,children:u?"Esportazione...":"\ud83e\uddee Esporta MATLAB"})]})]})})},bu={shyftaLibFolder:"",defaultIterations:1e3,defaultConfidence:.95,defaultConfidenceToggle:!0,lastUsedModelName:"",resultsTimestep:1},xu="shyfta-settings";class wu{static loadSettings(){try{const e=localStorage.getItem(xu);if(e){const t=JSON.parse(e);return u(u({},bu),t)}}catch(e){console.warn("Error loading SHyFTA settings:",e)}return bu}static saveSettings(e){try{localStorage.setItem(xu,JSON.stringify(e))}catch(t){console.error("Error saving SHyFTA settings:",t)}}static updateSetting(e,t){const n=this.loadSettings();n[e]=t,this.saveSettings(n)}static resetSettings(){return this.saveSettings(bu),bu}static generateDefaultModelName(){const e=new Date,t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear(),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return"initFaultTree_".concat(t).concat(n).concat(o,"_").concat(a,"_").concat(r,"_").concat(i,".m")}static validateFolderPath(e){if(!e||0===e.trim().length)return!1;return/^[a-zA-Z]:(\\[^\\/:*?"<>|]+)*\\?$|^\/([^/]+\/)*[^/]*$/.test(e.trim())}}class Su{static setProgressCallback(e){this.progressCallback=e}static updateProgress(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.progressCallback&&this.progressCallback({progress:e,currentStep:t,logOutput:n,isRunning:e<100,isCompleted:e>=100})}static async generateZFTAMainContent(e){try{const t=await fetch("/assets/ZFTAMain.m");let n;n=t.ok?await t.text():"clear all; %to modify to clear only PROGRAMS variables\naddpath(genpath(pwd));\ntic\nUNVALID_FT = 0; % 0, FT is valid (1 otherwise) This check is performed inside the \"initFaultTree\" script.\n\ninputFullFileNameRound = fullfile(pwd, '\\src\\func\\zround.m');\noutputFullFileNameRound = fullfile(pwd, '\\src\\func\\rround.m');\ncopyfile (inputFullFileNameRound, outputFullFileNameRound);\nclear inputFullFileNameRound outputFullFileNameRound;\n\n%% SIMULATION PARAMETERS\ndebugMode = false;\niter = <ITER>;\n%% STOP CRITERIA PARAMETERS\nconfidenceLevel = <CONFIDENCE>;\nstopCriteriaOn = <TRUEFALSE>;\npercentageErrorTollerance = 0.001;\nzvalue = norminv(1-((1-confidenceLevel)/2));\nerr_iter = 0;\nmuX =  0;\nerr_i = 0;\nerr_vect = 0;\nTOP_i = 0;\nstopCriteriaMet = false;\n\ncounter_error = 1;\nmu_i = 0;\nS_i = 0;\n%%\nrng('shuffle')\nfailureTime = zeros(1,iter);\n\nTimeStep = Constants.TIMESTEP;\ncurrentTime = 0;\ncounter_i = 1;\n\n%% Debug Mode\nif debugMode\n   debugLogFile = createDebugMode; %return the ID to the debug file\nend\n%%\n\n<MODEL_NAME>\n\nif (UNVALID_FT)\n    return\nend\n\nsetStopCriteria;\n\nttfComponents = zeros(counterComponents-1,iter);\nwhile(nextEventTime<Tm) \n    ZFTAevaluateFT;\nend\ncomputeUpTime;\nupdateNFailure;\n\nfor counter_i=2:iter\n    pct = counter_i/iter*100;               % percentuale completata\n    fprintf('\\rAvanzamento: %6.2f%%%%', pct);  % \\r torna a inizio riga e sovrascrive\n    drawnow;                        % obbliga l'aggiornamento della Console\n    if(~stopCriteriaMet)\n        reinit;\n        while(nextEventTime<Tm) \n            ZFTAevaluateFT;\n        end\n        computeUpTime;\n        updateNFailure;\n        if(stopCriteriaOn)\n            verifyStopCriteria; \n        end\n       % disp(counter_i);\n    else\n        toc\n        return;\n    end\n    if(mod(counter_i,100000)==0)\n        save('workspace_great');\n    end\nend\ntoc";const o=e.modelName.replace(/\.m$/,"");return n.replace(/<MODEL_NAME>/g,o).replace(/<ITER>/g,e.iterations.toString()).replace(/<CONFIDENCE>/g,e.confidence.toString()).replace(/<TRUEFALSE>/g,e.confidenceToggle.toString())}catch(t){throw new Error("Failed to generate ZFTAMain.m content: ".concat(t instanceof Error?t.message:"Unknown error"))}}static async prepareFilesForBackend(e,t){try{console.log("Preparing files for backend processing: ".concat(t.shyftaLibFolder));const n=await this.generateModelCode(e,t),o=await fetch("/assets/ZFTAMain.m");let a=await o.text();const r=t.modelName.replace(/\.m$/,"");return a=a.replace(/<MODEL_NAME>/g,r).replace(/<ITER>/g,t.iterations.toString()).replace(/<CONFIDENCE>/g,t.confidence.toString()).replace(/<TRUEFALSE>/g,t.confidenceToggle.toString()),console.log("Files prepared for backend - Model: ".concat(n.length," chars, ZFTA: ").concat(a.length," chars")),{modelContent:n,zftaContent:a}}catch(n){throw new Error("Failed to prepare files for backend: ".concat(n instanceof Error?n.message:"Unknown error"))}}static async generateModelCode(e,t){return vu.generateMatlabCode(e,{missionTime:t.missionTime,filename:t.modelName})}static validateConfig(e,t){return e.shyftaLibFolder.trim()?e.modelName.trim()?e.iterations<=0?"Il numero di iterazioni deve essere maggiore di 0":e.confidence<=0||e.confidence>=1?"L'intervallo di confidenza deve essere tra 0 e 1":0===t.events.length&&0===t.gates.length?"Il modello di fault tree \xe8 vuoto":null:"Inserisci un nome modello valido":"Seleziona una cartella SHyFTALib valida"}static async clearOutputFolder(e){return console.log("Clearing output folder at: ".concat(e,"/output")),Promise.resolve()}static async executeMatlabCommand(e,t,n,o){return new Promise(async(a,r)=>{this.abortController=new AbortController,this.isRunning=!0;try{this.startSimulationMonitoring(e,t,n,o,a,r)}catch(i){this.isRunning=!1,this.abortController=null,r(i)}})}static async startSimulationMonitoring(e,t,o,a,r,i){this.updateProgress(0,"\ud83d\udd27 Controllo backend e avvio MATLAB...","Verifico backend e preparo simulazione...");try{const{MatlabExecutionService:s}=await n.e(699).then(n.bind(n,699));if(await s.checkBackendAvailability()){this.updateProgress(0,"\ud83d\ude80 Lancio MATLAB via backend...","Backend API disponibile - avvio simulazione automatica..."),console.log("\ud83d\udce6 Using prepared files for backend execution:"),console.log("   Model file: ".concat(o.modelName," (").concat(a.modelContent.length," chars)")),console.log("   ZFTAMain.m: ".concat(a.zftaContent.length," chars")),await s.startMatlabWithMonitoring({shyftaPath:e,modelName:o.modelName,modelContent:a.modelContent,zftaContent:a.zftaContent},(e,t)=>{this.updateProgress(e,"\ud83d\udd04 MATLAB: ".concat(e.toFixed(2),"%"),"Log MATLAB in tempo reale:\n".concat(t)),console.log("\ud83d\udcca MATLAB Progress: ".concat(e.toFixed(2),"%")),console.log("\ud83d\udcdd MATLAB Output:",t)}),this.updateProgress(100,"\u2705 Simulazione completata! Caricamento risultati...","MATLAB terminato automaticamente.\nCaricamento e analisi dei risultati in corso...");try{console.log("\ud83d\udd04 [SHyFTAService] Starting automatic results loading...");const n=wu.loadSettings();console.log("   \u2699\ufe0f Settings: timestep=".concat(n.resultsTimestep,"h"));await $c.loadResultsAfterSimulation(e,t.events,t.gates,o.missionTime,o.iterations,{timestep:n.resultsTimestep})?(console.log("\u2705 [SHyFTAService] Results loaded successfully - UI should update now"),this.updateProgress(100,"\ud83c\udf89 Simulazione completata! Risultati caricati.",'Simulazione completata con successo!\nRisultati di affidabilit\xe0 ora disponibili sui componenti.\nUsa "Risultati Simulazione" nei dettagli dei componenti per visualizzare PDF/CDF.')):(console.log("\u26a0\ufe0f [SHyFTAService] Results loading failed - using fallback message"),this.updateProgress(100,"\u2705 Simulazione completata!","MATLAB terminato automaticamente.\nControlla output/results.mat per i risultati."))}catch(l){console.error("\u274c [SHyFTAService] Error loading simulation results:",l),this.updateProgress(100,"\u2705 Simulazione completata!","MATLAB terminato automaticamente.\nControlla output/results.mat per i risultati.")}this.progressCallback&&this.progressCallback({progress:100,currentStep:"\ud83c\udf89 Simulazione SHyFTA completata automaticamente!",logOutput:"Simulazione eseguita dal backend.\nRisultati di affidabilit\xe0 disponibili sui componenti.\n",isRunning:!1,isCompleted:!0}),this.isRunning=!1,this.abortController=null,r()}else{console.error("\u274c Backend API non disponibile"),this.isRunning=!1,this.abortController=null;const e="Backend non disponibile per eseguire la simulazione MATLAB automaticamente.";this.progressCallback&&this.progressCallback({progress:0,currentStep:"\u274c Backend non disponibile",logOutput:"".concat(e,"\n\nPer risolvere:\n1. Avvia il backend: node backend-server.js\n2. Verifica che sia raggiungibile su http://").concat(window.location.hostname,":3001\n3. Riprova la simulazione\n"),isRunning:!1,isCompleted:!1}),i(new Error(e))}}catch(l){console.error("\u274c Errore durante esecuzione automatica:",l),this.isRunning=!1,this.abortController=null,this.progressCallback&&this.progressCallback({progress:0,currentStep:"\u274c Errore backend",logOutput:"Errore durante l'esecuzione via backend:\n".concat(l instanceof Error?l.message:"Errore sconosciuto","\n\nVerifica che:\n1. Il backend sia avviato (node backend-server.js)\n2. Il percorso SHyFTALib sia corretto\n3. MATLAB sia installato e nel PATH\n"),isRunning:!1,isCompleted:!1}),i(l)}}static checkSimulationResults(e,t,n){this.updateProgress(100,"\u2705 Simulazione completata!","MATLAB terminato con successo!\n\nOutput completo:\n".concat(t,"\n\nControlla output/results.mat per i risultati.")),this.progressCallback&&this.progressCallback({progress:100,currentStep:"\ud83c\udf89 Simulazione SHyFTA completata!",logOutput:"Simulazione terminata!\nLog completo MATLAB visibile nella console Node.js\n",isRunning:!1}),this.isRunning=!1,this.abortController=null,n()}static async prepareBatchFileContent(e){try{const t=await fetch("/assets/runSHyFTA.bat");let n=await t.text();const o=e.modelName.replace(/\.m$/,"");return n=n.replace("set SHYFTA_PATH=C:\\Path\\To\\SHyFTALib","set SHYFTA_PATH=".concat(e.shyftaLibFolder)).replace("set MODEL_NAME=ModelName","set MODEL_NAME=".concat(o)),console.log("Batch file content prepared for backend processing"),n}catch(t){throw new Error("Failed to prepare batch file content: ".concat(t instanceof Error?t.message:"Unknown error"))}}static async runSimulation(e,t){try{const n=this.validateConfig(t,e);if(n)throw new Error(n);this.updateProgress(0,"Preparazione simulazione...","Validazione configurazione e preparazione file...");const{modelContent:o,zftaContent:a}=await this.prepareFilesForBackend(e,t);await this.clearOutputFolder(t.shyftaLibFolder),await this.executeMatlabCommand(t.shyftaLibFolder,e,t,{modelContent:o,zftaContent:a})}catch(n){throw this.isRunning=!1,this.progressCallback&&this.progressCallback({progress:0,currentStep:"Errore durante la preparazione",logOutput:"Errore: ".concat(n instanceof Error?n.message:"Errore sconosciuto","\n"),isRunning:!1,isCompleted:!1}),n}}static async stopSimulation(){if(this.isRunning){try{const{MatlabExecutionService:e}=await n.e(699).then(n.bind(n,699));await e.stopMatlabSimulation()?console.log("\u2705 MATLAB simulation stopped via backend"):console.warn("\u26a0\ufe0f Failed to stop via backend, using fallback")}catch(e){console.error("\u274c Error stopping MATLAB via backend:",e)}this.abortController&&this.abortController.abort(),this.isRunning=!1,console.log("\ud83d\uded1 Simulation stop requested by user"),this.progressCallback&&this.progressCallback({progress:0,currentStep:"\u23f9\ufe0f Simulazione arrestata dall'utente",logOutput:"Simulazione interrotta manualmente.\n",isRunning:!1,isCompleted:!1})}}static isSimulationRunning(){return this.isRunning}static resetSimulation(){this.progressCallback&&this.progressCallback({progress:0,currentStep:"Pronto per nuova simulazione",logOutput:"",isRunning:!1})}static generateDefaultModelName(){const e=new Date,t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear(),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return"initFaultTree_".concat(t).concat(n).concat(o,"_").concat(a,":").concat(r,":").concat(i,".m")}static parseProgressFromLog(e){const t=e.match(/Avanzamento:\s*(\d+\.?\d*)%/);return t?parseFloat(t[1]):null}}Su.progressCallback=null,Su.abortController=null,Su.isRunning=!1;const ku=e=>{let{isOpen:t,onClose:n,onConfirm:o,simulationProgress:a=0}=e;if(!t)return null;return(0,Pt.jsx)("div",{className:"stop-confirmation-overlay",onClick:n,children:(0,Pt.jsxs)("div",{className:"stop-confirmation-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsx)("div",{className:"stop-confirmation-header",children:(0,Pt.jsx)("h2",{children:"\u26a0\ufe0f Conferma Interruzione"})}),(0,Pt.jsxs)("div",{className:"stop-confirmation-content",children:[(0,Pt.jsx)("div",{className:"warning-icon",children:"\ud83d\uded1"}),(0,Pt.jsxs)("div",{className:"confirmation-message",children:[(0,Pt.jsx)("h3",{children:"Sei sicuro di voler interrompere la simulazione?"}),(0,Pt.jsx)("div",{className:"simulation-info",children:(0,Pt.jsxs)("div",{className:"progress-info",children:[(0,Pt.jsx)("span",{className:"label",children:"Progresso attuale:"}),(0,Pt.jsxs)("div",{className:"mini-progress-bar",children:[(0,Pt.jsx)("div",{className:"mini-progress-fill",style:{width:"".concat(a,"%")}}),(0,Pt.jsxs)("span",{className:"progress-text",children:[a.toFixed(1),"%"]})]})]})}),(0,Pt.jsxs)("div",{className:"warning-details",children:[(0,Pt.jsxs)("p",{children:["\u26a0\ufe0f ",(0,Pt.jsx)("strong",{children:"Attenzione:"})]}),(0,Pt.jsxs)("ul",{children:[(0,Pt.jsx)("li",{children:"La simulazione MATLAB verr\xe0 terminata immediatamente"}),(0,Pt.jsx)("li",{children:"I risultati parziali potrebbero essere perduti"}),(0,Pt.jsx)("li",{children:"Dovrai riavviare la simulazione dall'inizio"})]})]}),(0,Pt.jsx)("div",{className:"recommendation",children:(0,Pt.jsxs)("p",{children:["\ud83d\udca1 ",(0,Pt.jsx)("strong",{children:"Suggerimento:"})," Se la simulazione sta procedendo normalmente, \xe8 consigliabile attendere il completamento automatico."]})})]})]}),(0,Pt.jsxs)("div",{className:"stop-confirmation-actions",children:[(0,Pt.jsx)("button",{className:"cancel-button",onClick:n,children:"\u21a9\ufe0f Continua Simulazione"}),(0,Pt.jsx)("button",{className:"confirm-stop-button",onClick:()=>{o(),n()},children:"\ud83d\uded1 S\xec, Interrompi"})]})]})})},Cu=e=>{let{isOpen:t,onClose:n,faultTreeModel:a,missionTime:r=500}=e;const[i,l]=(0,o.useState)(""),[s,c]=(0,o.useState)(1e3),[u,d]=(0,o.useState)(.95),[p,f]=(0,o.useState)(!0),[m,h]=(0,o.useState)(1),[g,v]=(0,o.useState)(!1),[y,b]=(0,o.useState)(!1),[x,w]=(0,o.useState)(0),[S,k]=(0,o.useState)(""),[C,E]=(0,o.useState)(""),[N,j]=(0,o.useState)(!1),[P,M]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{if(t){const e=wu.loadSettings();e.shyftaLibFolder&&l(e.shyftaLibFolder),c(e.defaultIterations),d(e.defaultConfidence),f(e.defaultConfidenceToggle),h(e.resultsTimestep),Su.setProgressCallback(e=>{w(e.progress),k(e.currentStep),E(t=>t+e.logOutput),v(e.isRunning),b(e.isCompleted||!1)})}return()=>{Su.setProgressCallback(()=>{})}},[t]),!t)return null;const T=async()=>{const e={shyftaLibFolder:i,modelName:"ZFTATree.m",iterations:s,confidence:u,confidenceToggle:p,missionTime:r},t={shyftaLibFolder:i,defaultIterations:s,defaultConfidence:u,defaultConfidenceToggle:p,lastUsedModelName:"ZFTATree.m",resultsTimestep:m};wu.saveSettings(t),v(!0),b(!1),w(0),E(""),k("Inizializzazione...");try{await Su.runSimulation(a,e)}catch(n){alert("Errore durante la simulazione: ".concat(n instanceof Error?n.message:"Errore sconosciuto"))}finally{v(!1)}};return(0,Pt.jsx)("div",{className:"shyfta-modal-overlay",onClick:n,children:(0,Pt.jsxs)("div",{className:"shyfta-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"shyfta-modal-header",children:[(0,Pt.jsx)("h2",{children:"\ud83d\udd2c SHyFTA Simulation"}),(0,Pt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"shyfta-modal-content",children:[(0,Pt.jsxs)("div",{className:"config-section",children:[(0,Pt.jsx)("h3",{children:"\u2699\ufe0f Configurazione"}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"\ud83d\udcc1 Cartella SHyFTALib:"}),(0,Pt.jsx)("div",{className:"folder-input",children:(0,Pt.jsx)("input",{type:"text",value:i,onChange:e=>{l(e.target.value),wu.updateSetting("shyftaLibFolder",e.target.value)},placeholder:"SHyFTALib",disabled:g,className:"folder-name-input"})}),(0,Pt.jsxs)("small",{className:"folder-help",children:["\ud83d\udca1 Inserisci il path assoluto della cartella SHyFTALib ",(0,Pt.jsx)("br",{})]})]}),(0,Pt.jsxs)("div",{className:"form-row",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"\ud83d\udd04 Iterazioni:"}),(0,Pt.jsx)("input",{type:"number",value:s,onChange:e=>c(Number(e.target.value)),min:"1",disabled:g})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"\ud83d\udcca Intervallo di Confidenza:"}),(0,Pt.jsxs)("div",{className:"confidence-input",children:[(0,Pt.jsx)("input",{type:"number",value:u,onChange:e=>d(Number(e.target.value)),min:"0.01",max:"0.99",step:"0.01",disabled:g}),(0,Pt.jsxs)("div",{className:"toggle-group",children:[(0,Pt.jsx)("span",{className:"toggle-label",children:"Stop Criteria:"}),(0,Pt.jsxs)("label",{className:"toggle-switch",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:p,onChange:e=>f(e.target.checked),disabled:g}),(0,Pt.jsx)("span",{className:"toggle-slider"})]}),(0,Pt.jsx)("span",{className:"toggle-status",children:p?"ON":"OFF"})]})]})]})]})]}),(g||y)&&(0,Pt.jsxs)("div",{className:"progress-section",children:[(0,Pt.jsx)("h3",{children:g?"\ud83d\udd04 Simulazione Automatica in Corso":"\u2705 Simulazione Completata"}),(0,Pt.jsxs)("div",{className:"progress-info",children:[(0,Pt.jsx)("div",{className:"current-step",children:y?"Simulazione completata con successo!":S}),(0,Pt.jsxs)("div",{className:"progress-bar",children:[(0,Pt.jsx)("div",{className:"progress-fill",style:{width:"".concat(x,"%")}}),(0,Pt.jsxs)("span",{className:"progress-text",children:[x.toFixed(1),"%"]})]})]}),(0,Pt.jsxs)("div",{className:"log-output",children:[(0,Pt.jsxs)("div",{className:"log-header",children:[(0,Pt.jsx)("h4",{children:"\ud83d\udcdd Output Log:"}),y&&(0,Pt.jsx)("button",{className:"close-log-button",onClick:()=>{b(!1),w(0),k(""),E("")},children:"\u2716\ufe0f Chiudi Log"})]}),(0,Pt.jsx)("textarea",{value:C,readOnly:!0,rows:6,placeholder:"I log della simulazione appariranno qui..."})]})]}),(0,Pt.jsxs)("div",{className:"config-section",children:[(0,Pt.jsx)("h3",{children:"\ud83d\udcca Configurazione Analisi Risultati"}),(0,Pt.jsx)("div",{className:"form-row",children:(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{children:"\u23f1\ufe0f Timestep Analisi:"}),(0,Pt.jsx)("input",{type:"number",value:m,onChange:e=>h(Number(e.target.value)),min:"0.01",step:"0.1",disabled:g}),(0,Pt.jsx)("small",{className:"help-text",children:"Delta temporale per calcoli PDF/CDF (ore)"})]})})]}),(0,Pt.jsxs)("div",{className:"model-info",children:[(0,Pt.jsx)("h3",{children:"\ud83d\udccb Informazioni Modello"}),(0,Pt.jsxs)("div",{className:"info-grid",children:[(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("span",{className:"info-label",children:"Eventi Base:"}),(0,Pt.jsx)("span",{className:"info-value",children:a.events.length})]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("span",{className:"info-label",children:"Porte:"}),(0,Pt.jsx)("span",{className:"info-value",children:a.gates.length})]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("span",{className:"info-label",children:"Connessioni:"}),(0,Pt.jsx)("span",{className:"info-value",children:a.connections.length})]}),(0,Pt.jsxs)("div",{className:"info-item",children:[(0,Pt.jsx)("span",{className:"info-label",children:"Mission Time:"}),(0,Pt.jsxs)("span",{className:"info-value",children:[r,"h"]})]})]})]})]}),(0,Pt.jsxs)("div",{className:"shyfta-modal-actions",children:[(0,Pt.jsx)("button",{className:"cancel-button",onClick:n,disabled:g,children:g?"Chiudi quando completato":"Chiudi"}),!g&&(0,Pt.jsx)("button",{className:"test-button",onClick:async()=>{console.log("\ud83e\uddea [DEBUG] Testing results loading manually..."),M(!0);console.log("\ud83d\udcc1 Testing with path: ".concat("C:/SHyFTOO/output/results.mat"));try{await $c.loadResultsAfterSimulation("C:/SHyFTOO",a.events,a.gates,r,s,{timestep:m})?alert("\u2705 Real results loaded from results.mat! Check console and components for actual data."):alert("\u274c Failed to load results - check console for details.")}catch(e){console.error("Error during test:",e),alert("\u274c Error: ".concat(e))}finally{M(!1)}},title:"Test caricamento risultati (usa dati mock)",disabled:P,children:P?(0,Pt.jsx)("span",{children:"\u23f3 Loading..."}):(0,Pt.jsx)("span",{children:"\ud83d\udd0d Retrieve Results"})}),!g&&!y&&(0,Pt.jsx)("button",{className:"run-button primary",onClick:T,disabled:!i,children:"\ud83d\ude80 Run SHyFTA"}),!g&&y&&(0,Pt.jsx)("button",{className:"run-button primary",onClick:()=>{b(!1),w(0),k(""),E(""),T()},disabled:!i,children:"\ud83d\udd04 Esegui Nuovamente"}),g&&(0,Pt.jsx)("button",{className:"stop-button",onClick:()=>{j(!0)},children:"\u23f9\ufe0f Ferma Simulazione"})]}),(0,Pt.jsx)(ku,{isOpen:N,onClose:()=>j(!1),onConfirm:async()=>{await Su.stopSimulation(),j(!1)},simulationProgress:x})]})})},Eu=e=>{let{isOpen:t,onClose:n,onConfirm:o,title:a,message:r,confirmText:i="Conferma",cancelText:l="Annulla",confirmButtonClass:s="confirm-button"}=e;if(!t)return null;return(0,Pt.jsx)("div",{className:"confirmation-modal-overlay",onClick:n,children:(0,Pt.jsxs)("div",{className:"confirmation-modal",onClick:e=>e.stopPropagation(),children:[(0,Pt.jsxs)("div",{className:"confirmation-modal-header",children:[(0,Pt.jsx)("h2",{children:a}),(0,Pt.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"confirmation-modal-content",children:[(0,Pt.jsx)("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,Pt.jsx)("p",{className:"confirmation-message",children:r})]}),(0,Pt.jsxs)("div",{className:"confirmation-modal-actions",children:[(0,Pt.jsx)("button",{className:"".concat(s," primary"),onClick:()=>{o(),n()},children:i}),(0,Pt.jsx)("button",{className:"cancel-button",onClick:n,children:l})]})]})})},Nu={mobile:768,tablet:1024},ju=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nu;const[t,n]=(0,o.useState)("desktop");return(0,o.useEffect)(()=>{const t=()=>{const t=window.innerWidth;t<e.mobile?n("mobile"):t<e.tablet?n("tablet"):n("desktop")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t},Pu=e=>{let t="// Dynamic Fault Tree Code\n\n";return t+="// EVENTI BASE\n",e.events.forEach(e=>{if(t+="BaseEvent ".concat(e.name," {\n"),t+='  id: "'.concat(e.id,'"\n'),e.description&&(t+='  description: "'.concat(e.description,'"\n')),e.failureRate&&(t+="  failureRate: ".concat(e.failureRate,"\n")),e.failureProbabilityDistribution){switch(t+="  failureProbabilityDistribution: {\n",t+='    type: "'.concat(e.failureProbabilityDistribution.type,'"\n'),e.failureProbabilityDistribution.type){case"exponential":t+="    lambda: ".concat(e.failureProbabilityDistribution.lambda," // h\u207b\xb9\n");break;case"weibull":t+="    k: ".concat(e.failureProbabilityDistribution.k," // adimensionale\n"),t+="    lambda: ".concat(e.failureProbabilityDistribution.lambda," // h\n"),t+="    mu: ".concat(e.failureProbabilityDistribution.mu," // h\n");break;case"normal":t+="    mu: ".concat(e.failureProbabilityDistribution.mu," // h\n"),t+="    sigma: ".concat(e.failureProbabilityDistribution.sigma," // h\n");break;case"constant":t+="    probability: ".concat(e.failureProbabilityDistribution.probability," // adimensionale\n")}t+="  }\n"}if(e.repairProbabilityDistribution){switch(t+="  repairProbabilityDistribution: {\n",t+='    type: "'.concat(e.repairProbabilityDistribution.type,'"\n'),e.repairProbabilityDistribution.type){case"exponential":t+="    lambda: ".concat(e.repairProbabilityDistribution.lambda," // h\u207b\xb9\n");break;case"weibull":t+="    k: ".concat(e.repairProbabilityDistribution.k," // adimensionale\n"),t+="    lambda: ".concat(e.repairProbabilityDistribution.lambda," // h\n"),t+="    mu: ".concat(e.repairProbabilityDistribution.mu," // h\n");break;case"normal":t+="    mu: ".concat(e.repairProbabilityDistribution.mu," // h\n"),t+="    sigma: ".concat(e.repairProbabilityDistribution.sigma," // h\n");break;case"constant":t+="    probability: ".concat(e.repairProbabilityDistribution.probability," // adimensionale\n")}t+="  }\n"}e.parameters&&Object.entries(e.parameters).forEach(e=>{let[n,o]=e;t+="  ".concat(n,": ").concat(JSON.stringify(o),"\n")}),t+="}\n\n"}),t+="// PORTE\n",e.gates.forEach(e=>{t+="Gate ".concat(e.name," {\n"),t+='  id: "'.concat(e.id,'"\n'),t+='  type: "'.concat(e.gateType,'"\n'),e.description&&(t+='  description: "'.concat(e.description,'"\n')),e.inputs.length>0&&(t+="  inputs: [".concat(e.inputs.map(e=>'"'.concat(e,'"')).join(", "),"]\n")),e.parameters&&Object.entries(e.parameters).forEach(e=>{let[n,o]=e;t+="  ".concat(n,": ").concat(JSON.stringify(o),"\n")}),t+="}\n\n"}),e.connections.length>0&&(t+="// CONNESSIONI\n",e.connections.forEach(e=>{t+="Connection: ".concat(e.source," -> ").concat(e.target,"\n")})),t},Mu=()=>{const e=he(),{showLLMConfigModal:t,setShowLLMConfigModal:n,updateLLMConfig:a}=Tt(),[r,i]=(0,o.useState)({events:[],gates:[],connections:[]}),[l,s]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),[m,h]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[y,b]=(0,o.useState)(!1),[x,w]=(0,o.useState)(!1),[S,k]=(0,o.useState)(null),[C,E]=(0,o.useState)(500),[N,j]=(0,o.useState)(!1),[P,M]=(0,o.useState)(null),T=ju(),_=(0,o.useCallback)(e=>{let t=0;e.events.forEach(e=>{const n=e.name.match(/^BE_(\d+)$/);n&&(t=Math.max(t,parseInt(n[1])))});let n=0;e.gates.forEach(e=>{const t=e.name.match(/_(\d+)$/);t&&(n=Math.max(n,parseInt(t[1])))}),U(t+1),V(n+1)},[]),[D,R]=(0,o.useState)(!1),[A,O]=(0,o.useState)(null),[z,F]=(0,o.useState)(!1),[L,I]=(0,o.useState)(!1),[B,U]=(0,o.useState)(1),[H,V]=(0,o.useState)(1);(0,o.useEffect)(()=>{"mobile"===T||"tablet"===T?(F(!0),I(!0)):(F(!1),I(!1))},[T]);const W=(0,o.useCallback)(()=>{if(D)O({type:"event"});else{const e={id:"event-".concat(Date.now()),type:"basic-event",name:"BE_".concat(B),position:{x:300+200*Math.random(),y:200+200*Math.random()},parameters:{},failureProbabilityDistribution:{type:"exponential",lambda:.01}};i(t=>u(u({},t),{},{events:[...t.events,e]})),U(e=>e+1)}},[D,B]),X=(0,o.useCallback)(e=>{if(D)O({type:"gate",gateType:e});else{const t={id:"gate-".concat(Date.now()),type:"gate",gateType:e,name:"".concat(e,"_").concat(H),position:{x:300+200*Math.random(),y:200+200*Math.random()},inputs:[],isFailureGate:!1,parameters:{}};i(e=>u(u({},e),{},{gates:[...e.gates,t]})),V(e=>e+1)}},[D,H]),Y=(0,o.useCallback)(e=>{s(e),d(!0)},[]),K=(0,o.useCallback)(e=>{if(A)if("event"===A.type){const t={id:"event-".concat(Date.now()),type:"basic-event",name:"BE_".concat(B),position:e,parameters:{},failureProbabilityDistribution:{type:"exponential",lambda:.01}};i(e=>u(u({},e),{},{events:[...e.events,t]})),U(e=>e+1)}else if("gate"===A.type&&A.gateType){const t={id:"gate-".concat(Date.now()),type:"gate",gateType:A.gateType,name:"".concat(A.gateType,"_").concat(H),position:e,inputs:[],isFailureGate:!1,parameters:{}};i(e=>u(u({},e),{},{gates:[...e.gates,t]})),V(e=>e+1)}},[A,B,H]),G=(0,o.useCallback)(()=>{R(e=>!e),O(null)},[]),$=(0,o.useCallback)(e=>{"basic-event"===e.type?i(t=>u(u({},t),{},{events:t.events.map(t=>t.id===e.id?e:t)})):i(t=>u(u({},t),{},{gates:t.gates.map(t=>t.id===e.id?e:t)})),d(!1),s(null)},[]),q=(0,o.useCallback)(e=>{k(e),w(!0),d(!1)},[]),Z=(0,o.useCallback)(async()=>{try{const e=await hu.saveModelWithMetadata(r,"fault-tree");M(e),alert("Fault Tree salvato con successo!")}catch(e){alert("Errore durante il salvataggio: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}},[r]),Q=(0,o.useCallback)(async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)try{const{model:e}=await hu.openModelWithValidation(n,"fault-tree");i(e),_(e),M({url:URL.createObjectURL(n),filename:n.name}),alert("Fault Tree caricato con successo!")}catch(o){alert("Errore nel caricamento del file: ".concat(o instanceof Error?o.message:"Errore sconosciuto"))}},[_]),J=(0,o.useCallback)(async()=>{if("undefined"!==typeof window&&"showOpenFilePicker"in window)try{const[e]=await window.showOpenFilePicker({types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),t=await e.getFile(),{model:n}=await hu.openModelWithValidation(t,"fault-tree");i(n),_(n),M({url:URL.createObjectURL(t),filename:t.name,fileHandle:e}),alert("Fault Tree caricato con successo!")}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;if(e instanceof Error&&"NotAllowedError"===e.name)return void alert('Permessi negati per l\'accesso ai file. Usa il pulsante "Apri" per selezionare manualmente un file.');console.error("Errore durante l'apertura del file:",e),alert("Errore durante l'apertura del file: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}else{const e=document.createElement("input");e.type="file",e.accept=".json,.xml,.csv",e.onchange=e=>Q(e),e.click()}},[Q,_]),ee=(0,o.useCallback)(async()=>{try{await hu.exportToXML(r)}catch(e){alert("Errore durante l'esportazione XML: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}},[r]),te=(0,o.useCallback)(async()=>{try{await hu.exportToCSV(r)}catch(e){alert("Errore durante l'esportazione CSV: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}},[r]),ne=(0,o.useCallback)(()=>{f(!0)},[]),oe=(0,o.useCallback)(()=>{n(!0)},[n]),ae=(0,o.useCallback)(()=>{h(!0)},[]),re=(0,o.useCallback)(()=>{v(!0)},[]),ie=(0,o.useCallback)(e=>{E(e)},[]),le=(0,o.useCallback)(e=>{a(e)},[a]),se=(0,o.useCallback)(()=>{j(e=>!e)},[]),ce=(0,o.useCallback)(()=>{e("/markov-chain-editor")},[e]),ue=(0,o.useCallback)(()=>{},[]),de=(0,o.useCallback)(()=>{e("/")},[e]),pe=(0,o.useCallback)(()=>{F(e=>!e)},[]),fe=(0,o.useCallback)(()=>{I(e=>!e)},[]),me=(0,o.useCallback)(async()=>{try{const e=Pu(r);await hu.exportCode(e)}catch(e){alert("Errore durante l'esportazione del codice: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}},[r]),ge=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(t.has(e))return[];t.add(e);const n=r.gates.find(t=>t.id===e);if(!n)return[];const o=[];return n.inputs.forEach(e=>{o.push(e);r.gates.find(t=>t.id===e)&&o.push(...ge(e,t))}),o},[r.gates]),ve=(0,o.useCallback)(e=>{const t=[...r.events,...r.gates].find(t=>t.id===e);if(t)if("gate"===t.type){const t=ge(e);i(n=>u(u({},n),{},{events:n.events.filter(e=>!t.includes(e.id)),gates:n.gates.filter(n=>n.id!==e&&!t.includes(n.id)),connections:n.connections.filter(n=>n.source!==e&&n.target!==e&&!t.includes(n.source)&&!t.includes(n.target))}))}else i(t=>u(u({},t),{},{events:t.events.filter(t=>t.id!==e),connections:t.connections.filter(t=>t.source!==e&&t.target!==e),gates:t.gates.map(t=>u(u({},t),{},{inputs:t.inputs.filter(t=>t!==e)}))}))},[r,ge]),ye=(0,o.useCallback)(e=>{const t=r.connections.find(t=>t.id===e);t&&i(n=>u(u({},n),{},{connections:n.connections.filter(t=>t.id!==e),gates:n.gates.map(e=>e.id===t.target?u(u({},e),{},{inputs:e.inputs.filter(e=>e!==t.source)}):e)}))},[r]),be=(0,o.useCallback)(()=>{const e=[...r.events,...r.gates];if(0===e.length)return;const t=Math.ceil(Math.sqrt(e.length)),n=Math.ceil(e.length/t),o=e.map((e,o)=>{const a=Math.floor(o/t),r=400+120*(o%t-(t-1)/2),i=300+120*(a-(n-1)/2);return u(u({},e),{},{position:{x:r,y:i}})});i(e=>u(u({},e),{},{events:o.filter(e=>"basic-event"===e.type),gates:o.filter(e=>"gate"===e.type)}))},[r]),xe=(0,o.useCallback)(e=>{const t={events:[...r.events,...e.events],gates:[...r.gates,...e.gates],connections:[...r.connections,...e.connections],topEvent:e.topEvent||r.topEvent};i(t),_(t)},[r,_]),we=(0,o.useCallback)(e=>{e.forEach(e=>{switch(e.type){case"add":if("event"===e.elementType){const t={id:"event-".concat(Date.now()),type:"basic-event",name:e.data.name||"Nuovo Evento",position:e.data.position||{x:300,y:200},parameters:e.data.parameters||{},failureProbabilityDistribution:e.data.failureProbabilityDistribution||{type:"exponential",lambda:.01}};i(e=>u(u({},e),{},{events:[...e.events,t]}))}else if("gate"===e.elementType){const t={id:"gate-".concat(Date.now()),type:"gate",gateType:e.data.gateType||"OR",name:e.data.name||"Nuova Porta",position:e.data.position||{x:300,y:200},inputs:[],isFailureGate:!1,parameters:e.data.parameters||{}};i(e=>u(u({},e),{},{gates:[...e.gates,t]}))}break;case"remove":e.elementId&&ve(e.elementId);break;case"update":e.elementId&&e.data&&i(t=>u(u({},t),{},{events:t.events.map(t=>t.id===e.elementId?u(u({},t),e.data):t),gates:t.gates.map(t=>t.id===e.elementId?u(u({},t),e.data):t)}))}})},[ve]),Se=(0,o.useCallback)(()=>{i({events:[],gates:[],connections:[]}),s(null),d(!1),O(null),M(null),U(1),V(1)},[]),ke=(0,o.useCallback)(()=>{r.events.length>0||r.gates.length>0||r.connections.length>0?b(!0):Se()},[r,Se]);return(0,Pt.jsxs)("div",{className:"fault-tree-editor ".concat(N?"dark-mode":""),children:[(0,Pt.jsx)(Rt,{onSave:Z,onOpenWithFileSystem:J,onExportCode:me,onShowSaveModal:ne,onExportXML:ee,onExportCSV:te,onExportMatlab:ae,onShowLLMConfig:oe,onShowSHyFTA:re,isDarkMode:N,onToggleDarkMode:se,onNewModel:ke,openedFile:P,currentEditor:"fault-tree",onNavigateToFaultTree:ue,onNavigateToMarkov:ce,onLogout:de}),(0,Pt.jsxs)("div",{className:"editor-content ".concat(z?"left-panel-collapsed":""," ").concat(L?"right-panel-collapsed":""),children:[(0,Pt.jsx)(At,{onAddBaseEvent:W,onAddGate:X,clickToPlaceMode:D,onToggleClickToPlace:G,componentToPlace:A,missionTime:C,onMissionTimeChange:ie,isDarkMode:N,isCollapsed:z,onToggleCollapse:pe}),(0,Pt.jsx)(au,{faultTreeModel:r,onElementClick:Y,onModelChange:i,onDeleteElement:ve,onDeleteConnection:ye,onPanelClick:K,componentToPlace:A,isDarkMode:N,disableDeletion:c,onReorganizeComponents:be}),(0,Pt.jsx)(uu,{onGenerateFaultTree:xe,onModifyFaultTree:we,currentFaultTree:r,isDarkMode:N,isCollapsed:L,onToggleCollapse:fe})]}),c&&l&&(0,Pt.jsx)(du,{element:l,onSave:$,onClose:()=>{d(!1),s(null)},faultTreeModel:r,onShowResults:q}),(0,Pt.jsx)(gu,{isOpen:p,onClose:()=>f(!1),faultTreeModel:r}),(0,Pt.jsx)(lu,{isOpen:t,onClose:()=>n(!1),onConfigChange:le}),(0,Pt.jsx)(yu,{isOpen:m,onClose:()=>h(!1),faultTreeModel:r,missionTime:C}),(0,Pt.jsx)(Cu,{isOpen:g,onClose:()=>v(!1),faultTreeModel:r,missionTime:C}),(0,Pt.jsx)(Eu,{isOpen:y,onClose:()=>b(!1),onConfirm:Se,title:"\u26a0\ufe0f Nuovo Modello",message:"Il modello esistente verr\xe0 perduto se non \xe8 stato salvato. Sei sicuro di voler continuare?",confirmText:"S\xec, Nuovo Modello",cancelText:"Annulla",confirmButtonClass:"danger"}),(0,Pt.jsx)(pu,{isOpen:x,onClose:()=>{w(!1),k(null)},elementId:S})]})},Tu=e=>{let{onAddState:t,clickToPlaceMode:n,onToggleClickToPlace:o,componentToPlace:a,setComponentToPlace:r,isDarkMode:i,isCollapsed:l,onToggleCollapse:s}=e;return(0,Pt.jsxs)("div",{className:"markov-left-panel ".concat(i?"dark-mode":""," ").concat(l?"collapsed":""),children:[(0,Pt.jsx)("div",{className:"panel-header",children:(0,Pt.jsxs)("div",{className:"header-content",children:[(0,Pt.jsx)("h3",{children:"\ud83d\udd17 Componenti Markov"}),(0,Pt.jsx)("button",{className:"collapse-toggle",onClick:s,title:l?"Mostra pannello":"Nascondi pannello",children:l?"\u25b6":"\u25c0"})]})}),!l&&(0,Pt.jsxs)("div",{className:"panel-content",children:[(0,Pt.jsxs)("div",{className:"component-section",children:[(0,Pt.jsx)("h4",{children:"States"}),(0,Pt.jsx)("div",{className:"components-grid",children:(0,Pt.jsxs)("div",{className:"component-item ".concat("state"===a?"selected":""),onClick:()=>{n?r("state"):t()},title:"Add State",children:[(0,Pt.jsx)("div",{className:"state-icon",children:(0,Pt.jsx)("div",{className:"state-circle",children:"S"})}),(0,Pt.jsx)("span",{children:"State"})]})})]}),(0,Pt.jsxs)("div",{className:"mode-section",children:[(0,Pt.jsx)("div",{className:"mode-toggle",children:(0,Pt.jsxs)("label",{children:[(0,Pt.jsx)("input",{type:"checkbox",checked:n,onChange:o}),(0,Pt.jsx)("span",{children:"Click to Place Mode"})]})}),(0,Pt.jsx)("p",{className:"mode-description",children:n?"Click on the canvas to place components":"Click components to add them to the center"})]}),(0,Pt.jsxs)("div",{className:"info-section",children:[(0,Pt.jsx)("h4",{children:"Instructions"}),(0,Pt.jsxs)("ul",{children:[(0,Pt.jsx)("li",{children:"Drag states to move them around"}),(0,Pt.jsx)("li",{children:"Connect states by dragging from one to another"}),(0,Pt.jsx)("li",{children:"Click on states to edit properties"}),(0,Pt.jsx)("li",{children:"Click on transitions to edit probabilities"}),(0,Pt.jsx)("li",{children:"Use right-click to delete elements"})]})]})]})]})},_u=e=>{let{data:t,selected:n}=e;const{state:o,onStateClick:a,onDeleteState:r,isDarkMode:i,disableDeletion:l}=t;return(0,Pt.jsxs)("div",{className:"state-node ".concat(i?"dark-mode":""," ").concat(n?"selected":""," ").concat(o.isAbsorbing?"absorbing":""),onClick:e=>{e.stopPropagation(),a(o)},onContextMenu:e=>{e.preventDefault(),l||r(o.id)},children:[(0,Pt.jsx)(gl,{type:"target",position:_i.Left,style:{background:i?"#ffffff":"#333333",border:"2px solid transparent",width:"10px",height:"10px"}}),(0,Pt.jsx)(gl,{type:"source",position:_i.Right,style:{background:i?"#ffffff":"#333333",border:"2px solid transparent",width:"10px",height:"10px"}}),(0,Pt.jsx)(gl,{type:"target",position:_i.Top,style:{background:i?"#ffffff":"#333333",border:"2px solid transparent",width:"10px",height:"10px"}}),(0,Pt.jsx)(gl,{type:"source",position:_i.Bottom,style:{background:i?"#ffffff":"#333333",border:"2px solid transparent",width:"10px",height:"10px"}}),(0,Pt.jsx)("div",{className:"state-circle drag-handle",children:(0,Pt.jsxs)("div",{className:"state-content",children:[(0,Pt.jsx)("div",{className:"state-name",children:o.name}),1!==o.rewardFunction&&(0,Pt.jsxs)("div",{className:"state-reward",children:["R: ",o.rewardFunction]})]})}),o.isAbsorbing&&(0,Pt.jsx)("div",{className:"absorbing-indicator",title:"Absorbing State",children:(0,Pt.jsx)("div",{className:"absorbing-ring"})}),!l&&(0,Pt.jsx)("button",{className:"delete-button",onClick:e=>{e.stopPropagation(),l||r(o.id)},title:"Delete State",children:"\xd7"})]})},Du=e=>{let{id:t,sourceX:n,sourceY:o,targetX:a,targetY:r,sourcePosition:i,targetPosition:l,data:s,selected:c}=e;if(!s)return null;const{transition:u,onTransitionClick:d,onDeleteTransition:p,isDarkMode:f,disableDeletion:m}=s,[h,g,v]=Wi({sourceX:n,sourceY:o,sourcePosition:i,targetX:a,targetY:r,targetPosition:l}),y=e=>{e.stopPropagation(),d(u)},b=()=>{const e=u.probabilityDistribution;switch(e.type){case"constant":return"p=".concat(e.probability);case"exponential":return"\u03bb=".concat(e.lambda);case"weibull":return"k=".concat(e.k,", \u03bb=").concat(e.lambda);case"normal":return"\u03bc=".concat(e.mu,", \u03c3=").concat(e.sigma);default:return"p=?"}};return(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsx)("path",{id:t,className:"transition-edge ".concat(f?"dark-mode":""," ").concat(c?"selected":""),d:h,onClick:y,style:{stroke:c?"#007bff":f?"#ffffff":"#333333",strokeWidth:c?3:2,cursor:"pointer"}}),(0,Pt.jsx)(Pc,{children:(0,Pt.jsxs)("div",{style:{position:"absolute",transform:"translate(-50%, -50%) translate(".concat(g,"px,").concat(v,"px)"),pointerEvents:"all"},className:"transition-label ".concat(f?"dark-mode":""),children:[(0,Pt.jsx)("div",{className:"label-content",onClick:y,title:"Transition: ".concat(b()),children:(0,Pt.jsx)("div",{className:"probability-text",children:b()})}),!m&&(0,Pt.jsx)("button",{className:"delete-transition-button",onClick:e=>{e.stopPropagation(),m||p(u.id)},title:"Delete Transition",children:"\xd7"})]})})]})},Ru={stateNode:(0,o.memo)(_u)},Au={transitionEdge:(0,o.memo)(Du)},Ou=e=>{let{markovChainModel:t,onElementClick:n,onModelChange:a,onDeleteElement:r,onCreateConnection:i,onPanelClick:l,componentToPlace:s,isDarkMode:c,disableDeletion:d=!1}=e;const[p,f,m]=Tc([]),[h,g,v]=_c([]),y=es(),b=(0,o.useMemo)(()=>{const e=t.states.map(e=>({id:e.id,type:"stateNode",position:e.position,data:{state:e,onStateClick:n,onDeleteState:r,isDarkMode:c,disableDeletion:d},dragHandle:".drag-handle",selectable:!d})),o=t.transitions.map(e=>({id:e.id,source:e.source,target:e.target,type:"transitionEdge",data:{transition:e,onTransitionClick:n,onDeleteTransition:r,isDarkMode:c,disableDeletion:d},markerEnd:{type:Ti.ArrowClosed,width:20,height:20,color:c?"#ffffff":"#000000"},animated:!0,style:{stroke:c?"#ffffff":"#000000",strokeWidth:2}}));return{nodes:e,edges:o}},[t,n,r,c,d]);(0,o.useEffect)(()=>{const{nodes:e,edges:t}=b;f(e),g(t)},[b,f,g]);const x=(0,o.useCallback)(e=>{m(e),e.forEach(e=>{if("position"===e.type&&e.position){const n=t.states.map(t=>t.id===e.id?u(u({},t),{},{position:e.position}):t);a(u(u({},t),{},{states:n}))}})},[m,t,a]),w=(0,o.useCallback)(e=>{v(e)},[v]),S=(0,o.useCallback)(e=>{e.source&&e.target&&i(e.source,e.target)},[i]),k=(0,o.useCallback)(e=>{if(s&&y){const t=y.screenToFlowPosition({x:e.clientX,y:e.clientY}),n={width:120,height:40},o={x:t.x-n.width/2,y:t.y-n.height/2};l(o)}},[s,l,y]);return(0,Pt.jsxs)("div",{className:"markov-central-panel ".concat(c?"dark-mode":""),children:[(0,Pt.jsxs)(Nc,{nodes:p,edges:h,onNodesChange:x,onEdgesChange:w,onConnect:S,onPaneClick:k,nodeTypes:Ru,edgeTypes:Au,connectionMode:Ni.Loose,snapToGrid:!0,snapGrid:[15,15],selectionMode:Pi.Partial,multiSelectionKeyCode:"Shift",fitView:!0,attributionPosition:"bottom-left",proOptions:{hideAttribution:!0},className:s?"placing-component":"",children:[(0,Pt.jsx)(Gc,{variant:Bc.Dots,gap:20,size:1,color:c?"#404040":"#e0e0e0"}),(0,Pt.jsx)(Uc,{style:{backgroundColor:c?"#2a2a2a":"#ffffff",border:"1px solid ".concat(c?"#444":"#e0e0e0")},nodeColor:c?"#666":"#ccc",maskColor:c?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",position:"top-right"})]}),s&&(0,Pt.jsx)("div",{className:"placement-hint",children:"Click on the canvas to place the selected component"})]})},zu=e=>(0,Pt.jsx)(yc,{children:(0,Pt.jsx)(Ou,u({},e))}),Fu=e=>{let{state:t,onSave:n,onClose:a,isDarkMode:r}=e;const[i,l]=(0,o.useState)(t.name),[s,c]=(0,o.useState)(t.description||""),[d,p]=(0,o.useState)(t.rewardFunction),[f,m]=(0,o.useState)(t.isAbsorbing),[h,g]=(0,o.useState)(""),[v,y]=(0,o.useState)(""),b=(0,o.useCallback)(()=>{let e=!0;return i.trim()?i.trim().length>50?(g("State name must be 50 characters or less"),e=!1):g(""):(g("State name is required"),e=!1),isNaN(d)||d<0?(y("Reward function must be a non-negative number"),e=!1):y(""),e},[i,d]),x=(0,o.useCallback)(()=>{if(b()){const e=u(u({},t),{},{name:i.trim(),description:s.trim()||void 0,rewardFunction:d,isAbsorbing:f});n(e)}},[t,i,s,d,f,n,b]),w=(0,o.useCallback)(e=>{"Enter"===e.key&&e.ctrlKey?x():"Escape"===e.key&&a()},[x,a]);return(0,o.useEffect)(()=>{(i.trim()||d!==t.rewardFunction)&&b()},[i,d,t.rewardFunction,b]),(0,Pt.jsx)("div",{className:"modal-overlay ".concat(r?"dark-mode":""),onClick:a,children:(0,Pt.jsxs)("div",{className:"markov-state-modal ".concat(r?"dark-mode":""),onClick:e=>e.stopPropagation(),onKeyDown:w,tabIndex:-1,children:[(0,Pt.jsxs)("div",{className:"modal-header",children:[(0,Pt.jsx)("h2",{children:"Edit State Properties"}),(0,Pt.jsx)("button",{className:"close-button",onClick:a,"aria-label":"Close",children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"modal-body",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"state-name",children:["State Name ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"state-name",type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Enter state name (e.g., S1, Working, Failed)",className:h?"error":"",maxLength:50,autoFocus:!0}),h&&(0,Pt.jsx)("span",{className:"error-message",children:h})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"state-description",children:"Description"}),(0,Pt.jsx)("textarea",{id:"state-description",value:s,onChange:e=>c(e.target.value),placeholder:"Optional description of the state",rows:3,maxLength:500}),(0,Pt.jsxs)("div",{className:"character-count",children:[s.length,"/500"]})]}),(0,Pt.jsxs)("div",{className:"form-row",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"reward-function",children:["Reward Function ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"reward-function",type:"number",value:d,onChange:e=>p(parseFloat(e.target.value)||0),min:"0",step:"0.1",placeholder:"1.0",className:v?"error":""}),v&&(0,Pt.jsx)("span",{className:"error-message",children:v}),(0,Pt.jsx)("div",{className:"help-text",children:"The reward value associated with being in this state (default: 1)"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{className:"toggle-label",children:[(0,Pt.jsx)("input",{type:"checkbox",checked:f,onChange:e=>m(e.target.checked)}),(0,Pt.jsx)("span",{className:"toggle-switch"}),"Absorbing State"]}),(0,Pt.jsx)("div",{className:"help-text",children:"An absorbing state is one where the process ends (no outgoing transitions)"})]})]}),(0,Pt.jsxs)("div",{className:"state-preview",children:[(0,Pt.jsx)("h4",{children:"Preview"}),(0,Pt.jsxs)("div",{className:"preview-state ".concat(f?"absorbing":""),children:[(0,Pt.jsxs)("div",{className:"preview-circle",children:[(0,Pt.jsx)("div",{className:"preview-name",children:i||"State"}),1!==d&&(0,Pt.jsxs)("div",{className:"preview-reward",children:["R: ",d]})]}),f&&(0,Pt.jsx)("div",{className:"preview-indicator",children:"Absorbing"})]})]})]}),(0,Pt.jsxs)("div",{className:"modal-footer",children:[(0,Pt.jsx)("button",{className:"button secondary",onClick:a,children:"Cancel"}),(0,Pt.jsx)("button",{className:"button primary",onClick:x,disabled:!!h||!!v,children:"Save State"})]}),(0,Pt.jsx)("div",{className:"keyboard-shortcuts",children:(0,Pt.jsxs)("small",{children:["Press ",(0,Pt.jsx)("kbd",{children:"Ctrl+Enter"})," to save, ",(0,Pt.jsx)("kbd",{children:"Esc"})," to cancel"]})})]})})},Lu=e=>{let{transition:t,onSave:n,onClose:a,isDarkMode:r}=e;const[i,l]=(0,o.useState)(t.probabilityDistribution.type),[s,c]=(0,o.useState)("constant"===t.probabilityDistribution.type?t.probabilityDistribution.probability:.5),[d,p]=(0,o.useState)("exponential"===t.probabilityDistribution.type?t.probabilityDistribution.lambda:1),[f,m]=(0,o.useState)("weibull"===t.probabilityDistribution.type?t.probabilityDistribution.k:1),[h,g]=(0,o.useState)("weibull"===t.probabilityDistribution.type?t.probabilityDistribution.lambda:1),[v,y]=(0,o.useState)("weibull"===t.probabilityDistribution.type?t.probabilityDistribution.mu:0),[b,x]=(0,o.useState)("normal"===t.probabilityDistribution.type?t.probabilityDistribution.mu:0),[w,S]=(0,o.useState)("normal"===t.probabilityDistribution.type?t.probabilityDistribution.sigma:1),[k,C]=(0,o.useState)({}),E=(0,o.useCallback)(()=>{const e={};switch(i){case"constant":(s<0||s>1)&&(e.constant="Probability must be between 0 and 1");break;case"exponential":d<=0&&(e.lambda="Lambda must be positive");break;case"weibull":f<=0&&(e.weibullK="Shape parameter (k) must be positive"),h<=0&&(e.weibullLambda="Scale parameter (\u03bb) must be positive");break;case"normal":w<=0&&(e.normalSigma="Standard deviation (\u03c3) must be positive")}return C(e),0===Object.keys(e).length},[i,s,d,f,h,w]),N=(0,o.useCallback)(()=>{if(E()){let e;switch(i){case"constant":e={type:"constant",probability:s};break;case"exponential":e={type:"exponential",lambda:d};break;case"weibull":e={type:"weibull",k:f,lambda:h,mu:v};break;case"normal":e={type:"normal",mu:b,sigma:w};break;default:return}const o=u(u({},t),{},{probabilityDistribution:e});n(o)}},[t,i,s,d,f,h,v,b,w,E,n]),j=(0,o.useCallback)(e=>{"Enter"===e.key&&e.ctrlKey?N():"Escape"===e.key&&a()},[N,a]);(0,o.useEffect)(()=>{E()},[E]);return(0,Pt.jsx)("div",{className:"modal-overlay ".concat(r?"dark-mode":""),onClick:a,children:(0,Pt.jsxs)("div",{className:"markov-transition-modal ".concat(r?"dark-mode":""),onClick:e=>e.stopPropagation(),onKeyDown:j,tabIndex:-1,children:[(0,Pt.jsxs)("div",{className:"modal-header",children:[(0,Pt.jsx)("h2",{children:"Edit Transition Properties"}),(0,Pt.jsx)("button",{className:"close-button",onClick:a,"aria-label":"Close",children:"\xd7"})]}),(0,Pt.jsxs)("div",{className:"modal-body",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"distribution-type",children:["Probability Distribution ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsxs)("select",{id:"distribution-type",value:i,onChange:e=>l(e.target.value),children:[(0,Pt.jsx)("option",{value:"constant",children:"Constant"}),(0,Pt.jsx)("option",{value:"exponential",children:"Exponential"}),(0,Pt.jsx)("option",{value:"weibull",children:"Weibull"}),(0,Pt.jsx)("option",{value:"normal",children:"Normal"})]}),(0,Pt.jsx)("div",{className:"help-text",children:(e=>{switch(e){case"constant":return"Fixed probability value between 0 and 1";case"exponential":return"Exponential distribution with rate parameter \u03bb";case"weibull":return"Weibull distribution with shape k, scale \u03bb, and location \u03bc";case"normal":return"Normal distribution with mean \u03bc and standard deviation \u03c3"}})(i)})]}),(()=>{switch(i){case"constant":return(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"constant",children:["Probability ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"constant",type:"number",value:s,onChange:e=>c(parseFloat(e.target.value)||0),min:"0",max:"1",step:"0.01",className:k.constant?"error":""}),k.constant&&(0,Pt.jsx)("span",{className:"error-message",children:k.constant}),(0,Pt.jsx)("div",{className:"help-text",children:"Constant probability value (0 \u2264 p \u2264 1)"})]});case"exponential":return(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"lambda",children:["Rate Parameter (\u03bb) ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"lambda",type:"number",value:d,onChange:e=>p(parseFloat(e.target.value)||0),min:"0.001",step:"0.1",className:k.lambda?"error":""}),k.lambda&&(0,Pt.jsx)("span",{className:"error-message",children:k.lambda}),(0,Pt.jsxs)("div",{className:"help-text",children:["Rate parameter \u03bb ",">"," 0 (events per unit time)"]})]});case"weibull":return(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:"form-row",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"weibull-k",children:["Shape (k) ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"weibull-k",type:"number",value:f,onChange:e=>m(parseFloat(e.target.value)||0),min:"0.001",step:"0.1",className:k.weibullK?"error":""}),k.weibullK&&(0,Pt.jsx)("span",{className:"error-message",children:k.weibullK})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"weibull-lambda",children:["Scale (\u03bb) ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"weibull-lambda",type:"number",value:h,onChange:e=>g(parseFloat(e.target.value)||0),min:"0.001",step:"0.1",className:k.weibullLambda?"error":""}),k.weibullLambda&&(0,Pt.jsx)("span",{className:"error-message",children:k.weibullLambda})]})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"weibull-mu",children:"Location (\u03bc)"}),(0,Pt.jsx)("input",{id:"weibull-mu",type:"number",value:v,onChange:e=>y(parseFloat(e.target.value)||0),step:"0.1"}),(0,Pt.jsx)("div",{className:"help-text",children:"Location parameter \u03bc (shift along time axis)"})]})]});case"normal":return(0,Pt.jsxs)("div",{className:"form-row",children:[(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsx)("label",{htmlFor:"normal-mu",children:"Mean (\u03bc)"}),(0,Pt.jsx)("input",{id:"normal-mu",type:"number",value:b,onChange:e=>x(parseFloat(e.target.value)||0),step:"0.1"})]}),(0,Pt.jsxs)("div",{className:"form-group",children:[(0,Pt.jsxs)("label",{htmlFor:"normal-sigma",children:["Std Dev (\u03c3) ",(0,Pt.jsx)("span",{className:"required",children:"*"})]}),(0,Pt.jsx)("input",{id:"normal-sigma",type:"number",value:w,onChange:e=>S(parseFloat(e.target.value)||0),min:"0.001",step:"0.1",className:k.normalSigma?"error":""}),k.normalSigma&&(0,Pt.jsx)("span",{className:"error-message",children:k.normalSigma})]})]})}})(),(0,Pt.jsxs)("div",{className:"transition-info",children:[(0,Pt.jsx)("h4",{children:"Transition Information"}),(0,Pt.jsxs)("div",{className:"info-row",children:[(0,Pt.jsx)("span",{className:"label",children:"From State:"}),(0,Pt.jsx)("span",{className:"value",children:t.source})]}),(0,Pt.jsxs)("div",{className:"info-row",children:[(0,Pt.jsx)("span",{className:"label",children:"To State:"}),(0,Pt.jsx)("span",{className:"value",children:t.target})]}),(0,Pt.jsxs)("div",{className:"info-row",children:[(0,Pt.jsx)("span",{className:"label",children:"Distribution:"}),(0,Pt.jsx)("span",{className:"value",children:i})]})]})]}),(0,Pt.jsxs)("div",{className:"modal-footer",children:[(0,Pt.jsx)("button",{className:"button secondary",onClick:a,children:"Cancel"}),(0,Pt.jsx)("button",{className:"button primary",onClick:N,disabled:Object.keys(k).length>0,children:"Save Transition"})]}),(0,Pt.jsx)("div",{className:"keyboard-shortcuts",children:(0,Pt.jsxs)("small",{children:["Press ",(0,Pt.jsx)("kbd",{children:"Ctrl+Enter"})," to save, ",(0,Pt.jsx)("kbd",{children:"Esc"})," to cancel"]})})]})})},Iu=()=>{const e=he(),{showLLMConfigModal:t,setShowLLMConfigModal:n,updateLLMConfig:a}=Tt(),[r,i]=(0,o.useState)({states:[],transitions:[]}),[l,s]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),[m,h]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[y,b]=(0,o.useState)(!1),[x,w]=(0,o.useState)(!1),[S,k]=(0,o.useState)(null),[C,E]=(0,o.useState)(1),N=(0,o.useCallback)(()=>{const e=r.states.map(e=>{const t=e.name.match(/^S(\d+)$/);return t?parseInt(t[1]):0}).filter(e=>e>0),t=e.length>0?Math.max(...e):0;E(t+1)},[r.states]);(0,o.useEffect)(()=>{N()},[N]);const j=(0,o.useCallback)(e=>{const t={id:"state-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:"state",name:"S".concat(C),position:e||{x:100,y:100},rewardFunction:1,isAbsorbing:!1};i(e=>u(u({},e),{},{states:[...e.states,t]})),N()},[C,N]),P=(0,o.useCallback)(e=>{s(e),"state"===e.type?d(!0):"transition"===e.type&&f(!0)},[]),M=(0,o.useCallback)(e=>{x&&"state"===S&&(j(e),w(!1),k(null))},[x,S,j]),T=(0,o.useCallback)(()=>{w(e=>!e),k(null)},[]),_=(0,o.useCallback)(e=>{"state"===e.type?(i(t=>u(u({},t),{},{states:t.states.map(t=>t.id===e.id?e:t)})),d(!1)):"transition"===e.type&&(i(t=>u(u({},t),{},{transitions:t.transitions.map(t=>t.id===e.id?e:t)})),f(!1)),s(null)},[]),D=(0,o.useCallback)(e=>{i(t=>u(u({},t),{},{states:t.states.filter(t=>t.id!==e),transitions:t.transitions.filter(t=>t.id!==e&&t.source!==e&&t.target!==e)}))},[]),R=(0,o.useCallback)((e,t)=>{const n={id:"transition-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:"transition",source:e,target:t,probabilityDistribution:{type:"constant",probability:.5}};i(e=>u(u({},e),{},{transitions:[...e.transitions,n]}))},[]),A=(0,o.useCallback)(async()=>{try{await hu.saveModelWithMetadata(r,"markov-chain"),alert("Markov Chain salvato con successo!")}catch(e){alert("Errore durante il salvataggio: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}},[r]),O=(0,o.useCallback)(()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)try{const{model:e}=await hu.openModelWithValidation(n,"markov-chain");i(e),alert("Markov Chain caricato con successo!")}catch(o){alert("Errore nel caricamento del file: ".concat(o instanceof Error?o.message:"Errore sconosciuto"))}},e.click()},[]),z=(0,o.useCallback)(()=>{const e="// Markov Chain Model\n// States: ".concat(r.states.length,"\n// Transitions: ").concat(r.transitions.length,"\n\nStates:\n").concat(r.states.map(e=>"- ".concat(e.name,": ").concat(e.isAbsorbing?"Absorbing":"Transient",", Reward: ").concat(e.rewardFunction)).join("\n"),"\n\nTransitions:\n").concat(r.transitions.map(e=>{var t,n;const o=(null===(t=r.states.find(t=>t.id===e.source))||void 0===t?void 0:t.name)||e.source,a=(null===(n=r.states.find(t=>t.id===e.target))||void 0===n?void 0:n.name)||e.target,i=e.probabilityDistribution;let l="";switch(i.type){case"constant":l="p=".concat(i.probability);break;case"exponential":l="\u03bb=".concat(i.lambda);break;case"weibull":l="k=".concat(i.k,", \u03bb=").concat(i.lambda,", \u03bc=").concat(i.mu);break;case"normal":l="\u03bc=".concat(i.mu,", \u03c3=").concat(i.sigma)}return"- ".concat(o," \u2192 ").concat(a,": ").concat(i.type,"(").concat(l,")")}).join("\n")),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="markov-chain-code-".concat(Date.now(),".txt"),o.click(),URL.revokeObjectURL(n)},[r]),F=(0,o.useCallback)(()=>{A()},[A]),L=(0,o.useCallback)(()=>{alert("XML export for Markov chains not implemented yet")},[]),I=(0,o.useCallback)(()=>{const e=["ID,Name,Type,RewardFunction,IsAbsorbing",...r.states.map(e=>"".concat(e.id,",").concat(e.name,",State,").concat(e.rewardFunction,",").concat(e.isAbsorbing))].join("\n"),t=["ID,Source,Target,DistributionType,Parameters",...r.transitions.map(e=>{const t=e.probabilityDistribution;let n="";switch(t.type){case"constant":n="probability=".concat(t.probability);break;case"exponential":n="lambda=".concat(t.lambda);break;case"weibull":n="k=".concat(t.k,";lambda=").concat(t.lambda,";mu=").concat(t.mu);break;case"normal":n="mu=".concat(t.mu,";sigma=").concat(t.sigma)}return"".concat(e.id,",").concat(e.source,",").concat(e.target,",").concat(t.type,',"').concat(n,'"')})].join("\n"),n="States:\n".concat(e,"\n\nTransitions:\n").concat(t),o=new Blob([n],{type:"text/csv"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="markov-chain-".concat(Date.now(),".csv"),i.click(),URL.revokeObjectURL(a)},[r]),B=(0,o.useCallback)(()=>{alert("MATLAB export for Markov chains not implemented yet")},[]),U=(0,o.useCallback)(()=>{n(!0)},[n]),H=(0,o.useCallback)(e=>{a(e)},[a]),V=(0,o.useCallback)(()=>{(r.states.length>0||r.transitions.length>0)&&window.confirm("Are you sure you want to create a new model? All unsaved changes will be lost.")&&(i({states:[],transitions:[]}),s(null))},[r]),W=(0,o.useCallback)(()=>{h(e=>!e)},[]),X=(0,o.useCallback)(()=>{e("/fault-tree-editor")},[e]),Y=(0,o.useCallback)(()=>{},[]),K=(0,o.useCallback)(()=>{console.log("MSolver clicked")},[]),G=(0,o.useCallback)(()=>{e("/")},[e]),$=(0,o.useCallback)(()=>{v(e=>!e)},[]),q=(0,o.useCallback)(()=>{b(e=>!e)},[]);return(0,Pt.jsxs)("div",{className:"markov-chain-editor ".concat(m?"dark-mode":""),children:[(0,Pt.jsx)(Rt,{onSave:A,onOpenWithFileSystem:O,onExportCode:z,onShowSaveModal:F,onExportXML:L,onExportCSV:I,onExportMatlab:B,onShowLLMConfig:U,onShowMSolver:K,isDarkMode:m,onToggleDarkMode:W,onNewModel:V,openedFile:null,currentEditor:"markov-chain",onNavigateToFaultTree:X,onNavigateToMarkov:Y,onLogout:G}),(0,Pt.jsx)(Tu,{onAddState:j,clickToPlaceMode:x,onToggleClickToPlace:T,componentToPlace:S,setComponentToPlace:k,isDarkMode:m,isCollapsed:g,onToggleCollapse:$}),(0,Pt.jsx)("div",{className:"editor-content ".concat(g?"left-panel-collapsed":""," ").concat(y?"right-panel-collapsed":""),children:(0,Pt.jsx)(zu,{markovChainModel:r,onElementClick:P,onModelChange:i,onDeleteElement:D,onCreateConnection:R,onPanelClick:M,componentToPlace:S,isDarkMode:m,disableDeletion:c||p})}),(0,Pt.jsx)(uu,{onGenerateFaultTree:()=>{},onModifyFaultTree:()=>{},currentFaultTree:{events:[],gates:[],connections:[]},isDarkMode:m,isCollapsed:y,onToggleCollapse:q}),c&&l&&"state"===l.type&&(0,Pt.jsx)(Fu,{state:l,onSave:_,onClose:()=>{d(!1),s(null)},isDarkMode:m}),p&&l&&"transition"===l.type&&(0,Pt.jsx)(Lu,{transition:l,onSave:_,onClose:()=>{f(!1),s(null)},isDarkMode:m}),(0,Pt.jsx)(lu,{isOpen:t,onClose:()=>n(!1),onConfigChange:H})]})},Bu=()=>(0,Pt.jsx)("div",{className:"app",children:(0,Pt.jsx)(_t,{children:(0,Pt.jsx)(mt,{children:(0,Pt.jsxs)(Ae,{children:[(0,Pt.jsx)(De,{path:"/",element:(0,Pt.jsx)(Dt,{})}),(0,Pt.jsx)(De,{path:"/fault-tree-editor",element:(0,Pt.jsx)(Mu,{})}),(0,Pt.jsx)(De,{path:"/markov-chain-editor",element:(0,Pt.jsx)(Iu,{})})]})})})});a.createRoot(document.getElementById("root")).render((0,Pt.jsx)(o.StrictMode,{children:(0,Pt.jsx)(Bu,{})}))})();
//# sourceMappingURL=main.b67cc921.js.map